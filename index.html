<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูพุงฺฉุณุชุงู ููุงุฒ ูนุงุฆู ูนุจู - M.FAREED MUSTAFAI</title>
    <style>
        :root {
            --primary: #00695c;
            --accent: #ffa000;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333;
            --danger: #c62828;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            text-align: center;
        }

        .container { max-width: 1100px; margin: auto; }

        header {
            background: linear-gradient(135deg, var(--primary), #004d40);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        h1 { margin: 0; font-size: 26px; }
        h2 { margin: 5px 0; font-size: 16px; opacity: 0.9; }
        .dev-name { display: block; margin-top: 10px; font-weight: bold; color: var(--accent); font-size: 22px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }

        .selection-panel {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .field-group { flex: 1; min-width: 250px; text-align: right; }
        .field-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 14px; color: var(--primary); }

        select {
            width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #ddd;
            font-size: 15px; font-family: inherit; background: white;
        }

        .today-card {
            background: linear-gradient(135deg, #00695c, #004d40);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,215,0,0.3);
            border-top-color: gold;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: gold;
            font-size: 18px;
            font-weight: bold;
        }

        .city-badge {
            background: var(--accent);
            color: black;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .source-badge {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid gold;
            padding: 10px 25px;
            border-radius: 40px;
            font-size: 18px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            box-shadow: 0 0 15px rgba(255,215,0,0.3);
        }
        
        .verified {
            background: gold;
            color: black;
            padding: 4px 15px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .halal-badge {
            background: #4caf50;
            color: white;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        .date-info { 
            font-size: 32px;
            margin-bottom: 20px; 
            line-height: 1.6; 
            font-weight: bold;
        }
        
        .hijri-date { 
            color: gold; 
            font-weight: bold; 
            border-right: 2px solid rgba(255,255,255,0.3); 
            padding-right: 12px; 
            margin-right: 12px;
            font-size: 32px;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }
        
        .day-highlight {
            display: inline-block;
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid gold;
            padding: 5px 20px;
            border-radius: 30px;
            margin-left: 10px;
            font-size: 32px;
            font-weight: bold;
        }
        
        .special-day-box {
            background: rgba(255,255,255,0.15);
            border: 2px dashed gold;
            padding: 15px;
            border-radius: 15px;
            margin: 15px auto;
            font-size: 28px;
            max-width: 700px;
            font-weight: bold;
            line-height: 1.5;
        }
        
        .chand-rat {
            color: gold;
            font-weight: bold;
            display: block;
            margin-top: 10px;
            font-size: 26px;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }

        .times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 12px;
        }

        .time-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .t-label { font-size: 12px; display: block; margin-bottom: 5px; opacity: 0.9; }
        .t-val { font-size: 18px; font-weight: bold; }
        .j-tag { font-size: 11px; color: var(--accent); font-weight: bold; display: block; margin-top: 5px; }

        .table-wrap {
            background: var(--card-bg);
            border-radius: 15px;
            overflow-x: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        table { width: 100%; border-collapse: collapse; font-size: 11px; min-width: 1050px; }
        th { background: var(--primary); color: white; padding: 12px 5px; position: sticky; top: 0; }
        td { padding: 10px 4px; border-bottom: 1px solid #eee; text-align: center; }
        .j-mini { display: block; font-size: 9px; color: #00796b; font-weight: bold; }
        .danger { color: var(--danger); font-weight: bold; }
        .active-day { background: #fff9c4 !important; font-weight: bold; color: #000; }

        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #555;
            padding: 25px;
            background: #eee;
            border-radius: 20px;
            line-height: 1.8;
        }
        .footer-name { margin-top: 15px; font-weight: bold; color: var(--primary); font-size: 18px; }
        
        .city-count {
            background: var(--primary);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ูพุงฺฉุณุชุงู ููุงุฒ ูนุงุฆู ูนุจู</h1>
        <h2>ูุทุงุจู ุฏุงุฑุงูุงูุชุงุก ุงูุณูุช (ุญูู) <span class="city-count">200+ ุดุฑ</span></h2>
        <span class="dev-name">M.FAREED MUSTAFAI</span>
    </header>

    <div class="selection-panel">
        <div class="field-group">
            <label>ุดุฑ ููุชุฎุจ ฺฉุฑฺบ (200+ ุดุฑ)</label>
            <select id="citySelect" onchange="renderApp()"></select>
        </div>
        <div class="field-group">
            <label>ูู ููุชุฎุจ ฺฉุฑฺบ</label>
            <select id="monthSelect" onchange="renderApp()">
                <option value="0">ุฌููุฑ</option><option value="1">ูุฑูุฑ</option><option value="2">ูุงุฑฺ</option>
                <option value="3">ุงูพุฑู</option><option value="4">ูุฆ</option><option value="5">ุฌูู</option>
                <option value="6">ุฌููุงุฆ</option><option value="7">ุงฺฏุณุช</option><option value="8">ุณุชูุจุฑ</option>
                <option value="9">ุงฺฉุชูุจุฑ</option><option value="10">ูููุจุฑ</option><option value="11">ุฏุณูุจุฑ</option>
            </select>
        </div>
    </div>

    <div class="today-card" id="todayCard">
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">ุฑูุช ูุงู ฺฉููน ฺฉ ูุจ ุณุงุฆูน ุณ ฺูนุง ูุง ุฌุง ุฑุง ...</div>
            <div class="loading-text" style="font-size: 14px; margin-top: 10px;">ุจุฑุง ฺฉุฑู ุงูุชุธุงุฑ ฺฉุฑฺบ</div>
        </div>
        <div id="cityNameLabel" class="city-badge">ฺฉุฑุงฺ</div>
        <div class="source-badge" id="sourceBadge">
            <span>๐ ุฑูุช ูุงู ฺฉููน ูพุงฺฉุณุชุงู</span>
            <span class="verified">โ ุณุฑฺฉุงุฑ</span>
            <span class="halal-badge">ุญูุงู ฺฉููน</span>
        </div>
        <div class="date-info" id="fullDateDisplay">ููฺูฺฏ...</div>
        <div class="special-day-box" id="makhsoosDin">ูุฎุตูุต ุฏู: ููฺูฺฏ...</div>
        <div class="times-grid" id="cardGrid"></div>
    </div>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>ุชุงุฑุฎ</th><th>ูุฌุฑ</th><th>ุทููุน</th><th>ุงุดุฑุงู</th><th>ฺุงุดุช</th><th>ุถุญู</th><th>ููููุน</th><th>ุธุฑ</th><th>ุนุตุฑ</th><th>ูุบุฑุจ</th><th>ุนุดุงุก</th>
                </tr>
            </thead>
            <tbody id="tableContent"></tbody>
        </table>
    </div>

    <footer>
        <b>ุงู ูุนูููุงุช:</b>  ุงููุงุช ุฏุงุฑุงูุงูุชุงุก ุงูุณูุช ฺฉุฑุงฺ ฺฉ ุฏุงุฆู ููุด ฺฉ ูุทุงุจู ฺบ <br>
        1. <b>ุงุณูุงู ุชุงุฑุฎ:</b> ุฑูุช ูุงู ฺฉููน ูพุงฺฉุณุชุงู ฺฉ ูุจ ุณุงุฆูน ุณ ุจุฑุง ุฑุงุณุช ู ุฌุงุช  <br>
        2. <b>ุชูุงู ูุฎุตูุต ุฏู ุดุงูู ฺบ:</b> ุงูุจุงุกุ ุตุญุงุจุ ุงููุงุกุ ุจุฒุฑฺฏุงู ุฏู (ูุฑุฏ ู ุฎูุงุชู) ฺฉ ููุงุฏุช ู ููุงุช
        <div class="footer-name">Developed By: M.FAREED MUSTAFAI</div>
    </footer>
</div>

<script>
    // ========== 200+ ูพุงฺฉุณุชุงู ุดุฑ - ุฏุงุฑุงูุงูุชุงุก ุงูุณูุช ฺฉ ูุทุงุจู ==========
    const pkCities = [
        {n:"ฺฉุฑุงฺ", o:0}, {n:"ุญุฏุฑุขุจุงุฏ", o:-3}, {n:"ุณฺฉฺพุฑ", o:-9}, {n:"ูุงฺฺฉุงู", o:-8}, 
        {n:"ููุงุจ ุดุง", o:-5}, {n:"ูุฑูพูุฑ ุฎุงุต", o:-2}, {n:"ุฏุงุฏู", o:-6}, {n:"ุฌฺฉุจ ุขุจุงุฏ", o:-12},
        {n:"ุดฺฉุงุฑูพูุฑ", o:-10}, {n:"ุฎุฑูพูุฑ", o:-7}, {n:"ูนฺพูน", o:-1}, {n:"ุจุฏู", o:0},
        {n:"ูนูฺู ุงูู ุงุฑ", o:-3}, {n:"ูนูฺู ูุญูุฏ ุฎุงู", o:-3}, {n:"ููนุงุฑ", o:-4},
        {n:"ููุจุฑ", o:-8}, {n:"ุดุฏุงุฏ ฺฉููน", o:-9}, {n:"ฺฏฺพููนฺฉ", o:-10}, {n:"ูพูู ุนุงูู", o:-11},
        {n:"ฺฉูุฑ", o:-9}, {n:"ูุฑ", o:-8}, {n:"ูุตุฑ ุขุจุงุฏ", o:-7}, {n:"ุณูู", o:-4},
        {n:"ุณุฌุงูู", o:-2}, {n:"ุฌฺพู ูฺฏุณ", o:-12}, {n:"ุนูุฑ ฺฉููน", o:-1}, {n:"ุณุงูฺฏฺพฺ", o:-4},
        {n:"ููฺฉุงู", o:-5}, {n:"ฺฉููนุฑ", o:-4}, {n:"ุญุณู ุงุจุงุฏ", o:-6}, {n:"ุฑู ูพูุฑ", o:-8},
        {n:"ูุงูุฑ", o:-40}, {n:"ูุตู ุขุจุงุฏ", o:-32}, {n:"ุฑุงูููพูฺ", o:-46}, {n:"ููุชุงู", o:-25},
        {n:"ฺฏูุฌุฑุงููุงู", o:-42}, {n:"ุณุฑฺฏูุฏฺพุง", o:-35}, {n:"ุณุงูฺฉููน", o:-44}, {n:"ุจุงูููพูุฑ", o:-26},
        {n:"ฺฏุฌุฑุงุช", o:-43}, {n:"ุฌูู", o:-48}, {n:"ฺฺฉูุงู", o:-45}, {n:"ุงูนฺฉ", o:-48},
        {n:"ุงูฺฉุงฺ", o:-35}, {n:"ูุตูุฑ", o:-41}, {n:"ุดุฎููพูุฑ", o:-41}, {n:"ุฑุญู ุงุฑ ุฎุงู", o:-18},
        {n:"ฺุฑ ุบุงุฒ ุฎุงู", o:-18}, {n:"ุณุงูุงู", o:-32}, {n:"ุฎุงููุงู", o:-28}, {n:"ฺูููน", o:-33},
        {n:"ุญุงูุธ ุขุจุงุฏ", o:-40}, {n:"ููฺ ุจุงุคุงูุฏู", o:-43}, {n:"ูุงุฑููุงู", o:-44}, {n:"ูุฒุฑ ุขุจุงุฏ", o:-43},
        {n:"ูุธูุฑ ฺฏฺฺพ", o:-22}, {n:"ู", o:-20}, {n:"ุจฺพฺฉุฑ", o:-22}, {n:"ูุงููุงู", o:-24},
        {n:"ุฎูุดุงุจ", o:-30}, {n:"ูนูุจ ูนฺฉ ุณูฺฏฺพ", o:-33}, {n:"ุฌฺพูฺฏ", o:-30}, {n:"ููุฏฺพุฑุงฺบ", o:-24},
        {n:"ูพุงฺฉูพุชู", o:-32}, {n:"ุนุงุฑู ูุงูุง", o:-33}, {n:"ุจูุฑูุงู", o:-32}, {n:"ฺฉูุงู", o:-33},
        {n:"ุณููุฏุฑ", o:-34}, {n:"ฺฏูุฌุฑ", o:-33}, {n:"ฺฺ ูุทู", o:-34}, {n:"ูพฺพุงู", o:-42},
        {n:"ูพูฺ ุฏุงุฏู ุฎุงู", o:-46}, {n:"ุชู ฺฏูฺฏ", o:-47}, {n:"ูุชุญ ุฌูฺฏ", o:-47}, {n:"ุญุณู ุงุจุฏุงู", o:-47},
        {n:"ุฑ ูพูุฑ", o:-47}, {n:"ุงุจูน ุขุจุงุฏ", o:-48}, {n:"ูุงูุณุฑ", o:-49}, {n:"ฺฉูุงูน", o:-25},
        {n:"ุจุงูููฺฏุฑ", o:-31}, {n:"ุญุงุตู ูพูุฑ", o:-30}, {n:"ฺุดุชุงฺบ", o:-28}, {n:"ููุฑูน ุนุจุงุณ", o:-27},
        {n:"ุฎุฑูพูุฑ ูนุงููุงู", o:-26}, {n:"ุตุงุฏู ุขุจุงุฏ", o:-19}, {n:"ุงุญูุฏ ูพูุฑ ุดุฑู", o:-22},
        {n:"ุนู ูพูุฑ", o:-21}, {n:"ุฌุชูุฆ", o:-20}, {n:"ฺฉุฑูฺ ูพฺฉุง", o:-23}, {n:"ุฏูุง ูพูุฑ", o:-24},
        {n:"ูพุดุงูุฑ", o:-24}, {n:"ูุฑุฏุงู", o:-45}, {n:"ููุดุฑ", o:-26}, {n:"ฺุงุฑุณุฏ", o:-26},
        {n:"ุตูุงุจ", o:-28}, {n:"ุงุจูน ุขุจุงุฏ", o:-48}, {n:"ูุงูุณุฑ", o:-49}, {n:"ุจูนฺฏุฑุงู", o:-50},
        {n:"ฺฉูุณุชุงู", o:-51}, {n:"ุดุงูฺฏู", o:-47}, {n:"ุจููุฑ", o:-45}, {n:"ุณูุงุช", o:-44},
        {n:"ุฏุฑ", o:-42}, {n:"ฺุชุฑุงู", o:-35}, {n:"ุฏุฑ ุฒุฑฺบ", o:-43}, {n:"ุฏุฑ ุจุงูุง", o:-42},
        {n:"ุจุงุฌูฺ", o:-22}, {n:"ูููุฏ", o:-23}, {n:"ุฎุจุฑ", o:-24}, {n:"ุงูุฑฺฉุฒุฆ", o:-24},
        {n:"ฺฉุฑู", o:-25}, {n:"ุดูุงู ูุฒุฑุณุชุงู", o:-26}, {n:"ุฌููุจ ูุฒุฑุณุชุงู", o:-27},
        {n:"ุจููฺบ", o:-23}, {n:"ูฺฉ ูุฑูุช", o:-22}, {n:"ูนุงูฺฉ", o:-21}, {n:"ฺุฑ ุงุณูุงุนู ุฎุงู", o:-20},
        {n:"ูฺฏู", o:-24}, {n:"ฺฉุฑฺฉ", o:-24}, {n:"ฺฉูุงูน", o:-25}, {n:"ููุดุฑ", o:-26},
        {n:"ฺฉูุฆูน", o:12}, {n:"ฺูู", o:10}, {n:"ููุงุช", o:9}, {n:"ุฎุถุฏุงุฑ", o:7},
        {n:"ูุณุจู", o:3}, {n:"ฺฏูุงุฏุฑ", o:-5}, {n:"ูพูุฌฺฏูุฑ", o:-2}, {n:"ุชุฑุจุช", o:-3},
        {n:"ุณุจ", o:9}, {n:"ูุตุฑ ุขุจุงุฏ", o:7}, {n:"ุฌุนูุฑ ุขุจุงุฏ", o:6}, {n:"ฺูุจ", o:14},
        {n:"ููุน ุณู ุงูู", o:13}, {n:"ููุน ุนุจุฏุงูู", o:11}, {n:"ูุณุชููฺฏ", o:11},
        {n:"ูพุดู", o:12}, {n:"ูู", o:10}, {n:"ุฏุงูุจูุฏู", o:15}, {n:"ููุดฺฉ", o:14},
        {n:"ุฎุงุฑุงู", o:8}, {n:"ูุงุดฺฉ", o:6}, {n:"ุขูุงุฑุงู", o:4}, {n:"ฺฉฺ", o:-2},
        {n:"ุขฺฏ", o:10}, {n:"ุจููุงู", o:8}, {n:"ุฑูุงุฆ", o:10}, {n:"ููุฑุงูุงุฆ", o:12},
        {n:"ุจุงุฑฺฉฺพุงู", o:11}, {n:"ููุณูฐ ุฎู", o:12}, {n:"ฺฉููู", o:10}, {n:"ฺุฑ ุจฺฏูน", o:9},
        {n:"ุงุณูุงู ุขุจุงุฏ", o:-46}, {n:"ุฑุงูููพูฺ", o:-46}, {n:"ฺฺฉ ุดุฒุงุฏ", o:-46},
        {n:"ุจฺพุงุฑ ฺฉู", o:-46}, {n:"ุณูฺฏุฌุงู", o:-46}, {n:"ุณูุงู", o:-46}, {n:"ุชุฑููู", o:-46},
        {n:"ฺฏูฺฏุช", o:-56}, {n:"ุณฺฉุฑุฏู", o:-59}, {n:"ูุฒ", o:-57}, {n:"ูฺฏุฑ", o:-57},
        {n:"ุบุงูฺ", o:-59}, {n:"ุดฺฏุฑ", o:-59}, {n:"ุฎูพูู", o:-60}, {n:"ุงุณุชูุฑ", o:-58},
        {n:"ุฏุงูุฑ", o:-55}, {n:"ฺูุงุณ", o:-54}, {n:"ฺฏููพุณ", o:-56}, {n:"ุงุณู", o:-56},
        {n:"ูพููุงู", o:-55}, {n:"ูฺุฑ", o:-57}, {n:"ุฏููุฑ", o:-56}, {n:"ุณฺฉุฑุฏู", o:-59},
        {n:"ฺฉฺพุฑููฺฏ", o:-58}, {n:"ุดููุดุงู", o:-57}, {n:"ูพุงุณู", o:-57}, {n:"ุญุณู ุขุจุงุฏ", o:-57},
        {n:"ูุธูุฑ ุขุจุงุฏ", o:-52}, {n:"ููู", o:-53}, {n:"ูนุงฺบ", o:-52}, {n:"ุจุงุบ", o:-50},
        {n:"ูพููฺฺพ", o:-51}, {n:"ุณูฺฺพููุช", o:-51}, {n:"ฺฉูุชู", o:-50}, {n:"ูุฑูพูุฑ", o:-49},
        {n:"ุจฺพูุจุฑ", o:-48}, {n:"ุณูู", o:-49}, {n:"ุณุฑูููฺ", o:-50}, {n:"ฺฺฉ ุฑ", o:-50},
        {n:"ฺฺพุจ", o:-49}, {n:"ฺู", o:-51}, {n:"ุนุจุงุณ ูพูุฑ", o:-49}, {n:"ุจููฺ", o:-50},
        {n:"ุจฺพุฑ", o:-44}, {n:"ุจฺพููุงู", o:-38}, {n:"ุจฺพูุงู", o:-39}, {n:"ุจฺพฺฉุฑ", o:-22},
        {n:"ฺฺฉ ุฌฺพูุฑ", o:-40}, {n:"ฺูุจุงุฑ", o:-35}, {n:"ฺุณฺฉ", o:-43}, {n:"ฺูฺฏุฑ", o:-41},
        {n:"ุงูู ุขุจุงุฏ", o:-37}, {n:"ูุงุถู ูพูุฑ", o:-25}, {n:"ูุชุญ ูพูุฑ", o:-28}, {n:"ูุฑูุฒ ูุงูุง", o:-36},
        {n:"ฺฏฺฏู ููฺ", o:-39}, {n:"ฺฏูุฌุฑ ุฎุงู", o:-45}, {n:"ุญูู ูฺฉฺพุง", o:-34}, {n:"ุฌูุงููพูุฑ ุฌูนุงฺบ", o:-44},
        {n:"ุฌูุงููพูุฑ ูพุฑูุงู", o:-30}, {n:"ุฌฺุงู", o:-45}, {n:"ฺฉุจุฑ ูุงูุง", o:-30}, {n:"ฺฉุฑูฺ ูพฺฉุง", o:-23},
        {n:"ฺฉูุงู", o:-33}, {n:"ฺฉุงููฺฉ", o:-42}, {n:"ฺฉุงูุฏุงฺบ", o:-21}, {n:"ฺฉฺพุงุฑุงฺบ", o:-44},
        {n:"ฺฉููน ุงุฏู", o:-20}, {n:"ฺฉููน ุฑุงุฏฺพุง ฺฉุดู", o:-38}, {n:"ฺฉูฺุงู", o:-21}, {n:"ูุงู ููุณูฐ", o:-44},
        {n:"ูุงูุช ูพูุฑ", o:-25}, {n:"ููุณ", o:-28}, {n:"ููฺ ุจุงุคุงูุฏู", o:-43}, {n:"ููฺฏู ูุงู", o:-22},
        {n:"ููฺู ุขุจุงุฏ", o:-26}, {n:"ูุงู ฺููฺบ", o:-35}, {n:"ูุงฺบ ูุงู", o:-24}, {n:"ูุฑุฏฺฉ", o:-41},
        {n:"ูุธูุฑ ุขุจุงุฏ", o:-52}, {n:"ูุงุฑููุงู", o:-44}, {n:"ูพุณุฑูุฑ", o:-42}, {n:"ูพุชู", o:-40},
        {n:"ูพฺพุงู", o:-42}, {n:"ูพูฺ ฺฏฺพูพ", o:-40}, {n:"ูพุฑ ูุญู", o:-33}, {n:"ูุงุฏุฑ ุขุจุงุฏ", o:-38},
        {n:"ุฑุงุฌู ูพูุฑ", o:-18}, {n:"ุฑุงุฌ ุฌูฺฏ", o:-41}, {n:"ุฑููู ุดุฑู", o:-44}, {n:"ุณุงูุงู", o:-32},
        {n:"ุณุงููฺ", o:-33}, {n:"ุณูฺฏูุง ู", o:-42}, {n:"ุณุฑุงุฆ ุนุงููฺฏุฑ", o:-44}, {n:"ุดฺฉุฑ ฺฏฺฺพ", o:-43},
        {n:"ุดุง ูพูุฑ", o:-34}, {n:"ุดุฏ ุจูฺฏู", o:-38}, {n:"ุณุงูฺฉููน", o:-44}, {n:"ุณูุงู", o:-46},
        {n:"ุณฺฉฺพฺฉ", o:-43}, {n:"ุชู ฺฏูฺฏ", o:-47}, {n:"ุชุงูุฏูุงููุงู", o:-41}, {n:"ูุงฺ", o:-30},
        {n:"ุธูุฑูุงู", o:-42}
    ];

    pkCities.sort((a,b) => a.n.localeCompare(b.n));

    const baseData = {
        0: {s:["05:50","07:18","11:09","12:36","04:18","05:58","07:18"], e:["05:48","07:16","11:18","12:46","04:39","06:20","07:37"]},
        1: {s:["05:47","07:16","11:18","12:46","04:40","06:21","07:38"], e:["05:27","06:58","11:18","12:46","04:56","06:38","07:54"]},
        2: {s:["05:26","06:57","11:18","12:46","04:56","06:38","07:54"], e:["04:55","06:24","11:10","12:38","05:08","06:53","08:11"]},
        3: {s:["04:54","06:23","11:10","12:37","05:08","06:54","08:11"], e:["04:26","05:57","11:03","12:32","05:16","07:08","08:31"]},
        4: {s:["04:25","05:56","11:03","12:31","05:16","07:09","08:32"], e:["04:09","05:42","11:03","12:32","05:26","07:25","08:56"]},
        5: {s:["04:09","05:42","11:03","12:32","05:27","07:25","08:57"], e:["04:28","05:45","11:14","12:44","05:35","07:33","09:07"]},
        6: {s:["04:28","05:45","11:14","12:44","05:35","07:33","09:07"], e:["04:46","05:57","11:19","12:46","05:34","07:24","08:53"]},
        7: {s:["04:46","05:58","11:19","12:46","05:33","07:24","08:52"], e:["05:03","06:10","11:15","12:40","05:15","07:00","08:21"]},
        8: {s:["05:03","06:10","11:15","12:40","05:14","06:59","08:20"], e:["05:15","06:20","11:05","12:30","04:47","06:29","07:47"]},
        9: {s:["05:16","06:21","11:05","12:30","04:46","06:28","07:46"], e:["05:30","06:35","10:59","12:23","04:19","06:05","07:24"]},
        10: {s:["05:30","06:36","10:59","12:23","04:18","06:04","07:24"], e:["05:49","06:54","11:05","12:28","04:07","05:56","07:17"]},
        11: {s:["05:50","06:55","11:05","12:28","04:07","05:56","07:18"], e:["06:01","07:17","11:21","12:43","04:18","06:09","07:31"]}
    };

    function tToM(t) { const [h, m] = t.split(':').map(Number); return h * 60 + m; }
    function mToT(m) { let c = (m + 1440) % 1440; return `${String(Math.floor(c/60)).padStart(2,'0')}:${String(c%60).padStart(2,'0')}`; }
    function rndJ(m, off) { return Math.ceil((m + off) / 15) * 15; }

    const selC = document.getElementById('citySelect');
    pkCities.forEach(c => { let o = document.createElement('option'); o.value = c.o; o.innerText = c.n; selC.appendChild(o); });

    // ========== ุชูุงู ูุฎุตูุต ุฏู - ุงูุจุงุกุ ุตุญุงุจุ ุงููุงุกุ ุจุฒุฑฺฏุงู ุฏู (ูุฑุฏ ู ุฎูุงุชู) ==========
    function getSpecialDayUrdu(day, month) {
        const urduMonths = ["","ูุญุฑู","ุตูุฑ","ุฑุจุน ุงูุงูู","ุฑุจุน ุงูุซุงู","ุฌูุงุฏ ุงูุงูู","ุฌูุงุฏ ุงูุซุงู","ุฑุฌุจ","ุดุนุจุงู","ุฑูุถุงู","ุดูุงู","ุฐูุงููุนุฏ","ุฐูุงูุญุฌ"];
        
        let specialDay = "";
        
        // ===== ุงูุจุงุก ฺฉุฑุงู ุนูู ุงูุณูุงู =====
        // ูุญุฑู
        if(month === 1 && day === 10) specialDay += "ุนุงุดูุฑ (10 ูุญุฑู) โข ุญุถุฑุช ููุณูฐ ุนู ุงูุณูุงู ฺฉ ูุฌุงุช โข ุญุถุฑุช ููุญ ุนู ุงูุณูุงู ฺฉ ฺฉุดุช ฺฉุง ูพุงฺ ูพุฑ ูนฺพุฑูุง โข ";
        
        // ุฑุจุน ุงูุงูู
        if(month === 3 && day === 12) specialDay += "ุนุฏ ููุงุฏ ุงููุจ ๏ทบ (12 ุฑุจุน ุงูุงูู) โข ุญุถูุฑ ูุจ ุงฺฉุฑู ๏ทบ ฺฉ ููุงุฏุช โข ";
        if(month === 3 && day === 8) specialDay += "ุญุถุฑุช ุญุณู ุจู ุนู ุฑุถ ุงูู ุนููุง ฺฉ ููุงุฏุช โข ";
        if(month === 3 && day === 10) specialDay += "ุญุถุฑุช ุนุจุฏุงููุทูุจ ฺฉ ููุงุช โข ุญุถุฑุช ุฎุฏุฌ ุงูฺฉุจุฑูฐ ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุฑุจุน ุงูุซุงู
        if(month === 4 && day === 10) specialDay += "ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        
        // ุฌูุงุฏ ุงูุงูู
        if(month === 5 && day === 5) specialDay += "ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        if(month === 5 && day === 15) specialDay += "ุญุถุฑุช ุงุจุฑุงู ุนู ุงูุณูุงู ฺฉ ููุงุฏุช โข ";
        
        // ุฌูุงุฏ ุงูุซุงู
        if(month === 6 && day === 20) specialDay += "ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง ฺฉ ุดุงุฏุช โข ";
        
        // ุฑุฌุจ
        if(month === 7 && day === 1) specialDay += "ุญุถุฑุช ูุญูุฏ ๏ทบ ฺฉุง ูฺฉ ูฺฉุฑู ูฺบ ุชุดุฑู ูุงูุง โข ";
        if(month === 7 && day === 10) specialDay += "ุญุถุฑุช ุงูุงู ุนู ุฑุถุง ุนู ุงูุณูุงู ฺฉ ููุงุฏุช โข ";
        if(month === 7 && day === 13) specialDay += "ุญุถุฑุช ุงูุงู ุนู ุนู ุงูุณูุงู ฺฉ ููุงุฏุช โข ";
        if(month === 7 && day === 15) specialDay += "ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        if(month === 7 && day === 20) specialDay += "ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        if(month === 7 && day === 25) specialDay += "ุญุถุฑุช ุงูุงู ููุณูฐ ฺฉุงุธู ุนู ุงูุณูุงู ฺฉ ุดุงุฏุช โข ";
        if(month === 7 && day === 26) specialDay += "ุญุถุฑุช ุงุจูุทุงูุจ ฺฉ ููุงุช โข ";
        if(month === 7 && day === 27) specialDay += "ุดุจู ูุนุฑุงุฌ (27 ุฑุฌุจ) โข ุญุถูุฑ ๏ทบ ฺฉุง ูุนุฑุงุฌ ูพุฑ ุฌุงูุง โข ";
        
        // ุดุนุจุงู
        if(month === 8 && day === 1) specialDay += "ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 3) specialDay += "ุญุถุฑุช ุงูุงู ุญุณู ุนู ุงูุณูุงู ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 4) specialDay += "ุญุถุฑุช ุนุจุงุณ ุจู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 5) specialDay += "ุญุถุฑุช ุงูุงู ุนู ุฒู ุงูุนุงุจุฏู ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 7) specialDay += "ุญุถุฑุช ูุงุณู ุจู ุญุณู ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 11) specialDay += "ุญุถุฑุช ุนู ุงฺฉุจุฑ ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 15) specialDay += "ุดุจู ุจุฑุงุช (15 ุดุนุจุงู) โข ";
        if(month === 8 && day === 20) specialDay += "ุญุถุฑุช ุงุจุฑุงู ุนู ุงูุณูุงู ฺฉ ููุงุช โข ";
        
        // ุฑูุถุงู
        if(month === 9) {
            if(day === 1) specialDay += "ูพูุง ุฑูุถุงู โข ูุฑุขู ฺฉุง ูุฒูู ุดุฑูุน ูุง โข ";
            if(day === 10) specialDay += "ุญุถุฑุช ุฎุฏุฌ ุงูฺฉุจุฑูฐ ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
            if(day === 17) specialDay += "ุบุฒู ุจุฏุฑ โข ";
            if(day === 19) specialDay += "ุญุถุฑุช ุงูุงู ุนู ุนู ุงูุณูุงู ูพุฑ ุถุฑุจุช โข ";
            if(day === 20) specialDay += "ูุชุญ ูฺฉ โข ";
            if(day === 21) specialDay += "ุดุจู ูุฏุฑ ฺฉุง ุงุญุชูุงู (21 ุฑูุถุงู) โข ุญุถุฑุช ุงูุงู ุนู ุนู ุงูุณูุงู ฺฉ ุดุงุฏุช โข ";
            if(day === 23) specialDay += "ุดุจู ูุฏุฑ ฺฉุง ุงุญุชูุงู (23 ุฑูุถุงู) โข ";
            if(day === 25) specialDay += "ุดุจู ูุฏุฑ ฺฉุง ุงุญุชูุงู (25 ุฑูุถุงู) โข ";
            if(day === 27) specialDay += "ุดุจู ูุฏุฑ ฺฉุง ุงุญุชูุงู (27 ุฑูุถุงู) โข ";
            if(day === 29) specialDay += "ุดุจู ูุฏุฑ ฺฉุง ุงุญุชูุงู (29 ุฑูุถุงู) โข ";
        }
        
        // ุดูุงู
        if(month === 10 && day === 1) specialDay += "ุนุฏ ุงููุทุฑ โข ";
        if(month === 10 && day === 25) specialDay += "ุญุถุฑุช ุงูุงู ุฌุนูุฑ ุตุงุฏู ฺฉ ุดุงุฏุช โข ";
        
        // ุฐูุงููุนุฏ
        if(month === 11 && day === 1) specialDay += "ุญุถุฑุช ูุงุทู ูุนุตูู ฺฉ ููุงุฏุช โข ";
        if(month === 11 && day === 11) specialDay += "ุญุถุฑุช ุงูุงู ุนู ุฑุถุง ุนู ุงูุณูุงู ฺฉ ููุงุฏุช โข ";
        if(month === 11 && day === 29) specialDay += "ุญุถุฑุช ุงูุงู ูุญูุฏ ุชู ฺฉ ุดุงุฏุช โข ";
        if(month === 11 && day === 30) specialDay += "ุญุถุฑุช ุงูุงู ุนู ูู ฺฉ ุดุงุฏุช โข ";
        
        // ุฐูุงูุญุฌ
        if(month === 12) {
            if(day === 1) specialDay += "ุญุถุฑุช ูฺฉุงุญ ุงูุงู ุนู ู ูุงุทู โข ";
            if(day === 7) specialDay += "ุญุถุฑุช ุงูุงู ูุญูุฏ ุจุงูุฑ ฺฉ ุดุงุฏุช โข ";
            if(day === 8) specialDay += "ุญุถุฑุช ุงูุงู ุญุณู ุนู ุงูุณูุงู ฺฉุง ูฺฉ ุณ ฺฉุฑุจูุง ฺฉ ู ุฑูุงูฺฏ โข ";
            if(day === 9) specialDay += "ููู ุนุฑู (9 ุฐูุงูุญุฌ) โข ุญุถุฑุช ุงูุงู ุญุณู ุนู ุงูุณูุงู ฺฉุง ุนุฑูุงุช ูฺบ ูููู โข ";
            if(day === 10) specialDay += "ุนุฏ ุงูุงุถุญ (10 ุฐูุงูุญุฌ) โข ูุฑุจุงู โข ";
            if(day === 15) specialDay += "ุญุถุฑุช ุงูุงู ุนู ูู ฺฉ ููุงุฏุช โข ";
            if(day === 18) specialDay += "ุนุฏ ุบุฏุฑ โข ";
        }
        
        // ===== ุตุญุงุจ ฺฉุฑุงู ุฑุถ ุงูู ุนูู =====
        // ุญุถุฑุช ุงุจูุจฺฉุฑ ุตุฏู ุฑุถ ุงูู ุนู
        if(month === 3 && day === 21) specialDay += "ุญุถุฑุช ุงุจูุจฺฉุฑ ุตุฏู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 5 && day === 7) specialDay += "ุญุถุฑุช ุงุจูุจฺฉุฑ ุตุฏู ุฑุถ ุงูู ุนู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุนูุฑ ูุงุฑูู ุฑุถ ุงูู ุนู
        if(month === 1 && day === 26) specialDay += "ุญุถุฑุช ุนูุฑ ูุงุฑูู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        if(month === 3 && day === 12) specialDay += "ุญุถุฑุช ุนูุฑ ูุงุฑูู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        
        // ุญุถุฑุช ุนุซูุงู ุบู ุฑุถ ุงูู ุนู
        if(month === 4 && day === 15) specialDay += "ุญุถุฑุช ุนุซูุงู ุบู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 12 && day === 18) specialDay += "ุญุถุฑุช ุนุซูุงู ุบู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุญุถุฑุช ุนู ุงููุฑุชุถูฐ ุฑุถ ุงูู ุนู
        if(month === 7 && day === 13) specialDay += "ุญุถุฑุช ุนู ุงููุฑุชุถูฐ ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 9 && day === 21) specialDay += "ุญุถุฑุช ุนู ุงููุฑุชุถูฐ ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุญุถุฑุช ุญูุฒ ุฑุถ ุงูู ุนู
        if(month === 9 && day === 15) specialDay += "ุญุถุฑุช ุญูุฒ ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุญุถุฑุช ุจูุงู ุญุจุด ุฑุถ ุงูู ุนู
        if(month === 3 && day === 20) specialDay += "ุญุถุฑุช ุจูุงู ุญุจุด ุฑุถ ุงูู ุนู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุณููุงู ูุงุฑุณ ุฑุถ ุงูู ุนู
        if(month === 5 && day === 5) specialDay += "ุญุถุฑุช ุณููุงู ูุงุฑุณ ุฑุถ ุงูู ุนู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุฎุงูุฏ ุจู ููุฏ ุฑุถ ุงูู ุนู
        if(month === 9 && day === 18) specialDay += "ุญุถุฑุช ุฎุงูุฏ ุจู ููุฏ ุฑุถ ุงูู ุนู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุนุจุฏุงูุฑุญูู ุจู ุนูู ุฑุถ ุงูู ุนู
        if(month === 1 && day === 5) specialDay += "ุญุถุฑุช ุนุจุฏุงูุฑุญูู ุจู ุนูู ุฑุถ ุงูู ุนู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุณุนุฏ ุจู ุงุจ ููุงุต ุฑุถ ุงูู ุนู
        if(month === 4 && day === 20) specialDay += "ุญุถุฑุช ุณุนุฏ ุจู ุงุจ ููุงุต ุฑุถ ุงูู ุนู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุทูุญ ุจู ุนุจุฏุงูู ุฑุถ ุงูู ุนู
        if(month === 6 && day === 10) specialDay += "ุญุถุฑุช ุทูุญ ุจู ุนุจุฏุงูู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุญุถุฑุช ุฒุจุฑ ุจู ุนูุงู ุฑุถ ุงูู ุนู
        if(month === 6 && day === 10) specialDay += "ุญุถุฑุช ุฒุจุฑ ุจู ุนูุงู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ===== ุฎูุงุชู ุตุญุงุจุงุช ุฑุถ ุงูู ุนูู =====
        // ุญุถุฑุช ุฎุฏุฌ ุงูฺฉุจุฑูฐ ุฑุถ ุงูู ุนูุง
        if(month === 3 && day === 10) specialDay += "ุญุถุฑุช ุฎุฏุฌ ุงูฺฉุจุฑูฐ ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        if(month === 9 && day === 10) specialDay += "ุญุถุฑุช ุฎุฏุฌ ุงูฺฉุจุฑูฐ ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุนุงุฆุด ุตุฏู ุฑุถ ุงูู ุนูุง
        if(month === 4 && day === 14) specialDay += "ุญุถุฑุช ุนุงุฆุด ุตุฏู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        if(month === 9 && day === 17) specialDay += "ุญุถุฑุช ุนุงุฆุด ุตุฏู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง
        if(month === 4 && day === 10) specialDay += "ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        if(month === 6 && day === 20) specialDay += "ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง ฺฉ ุดุงุฏุช โข ";
        if(month === 9 && day === 13) specialDay += "ุญุถุฑุช ูุงุทู ุฒุฑุง ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง
        if(month === 5 && day === 5) specialDay += "ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        if(month === 7 && day === 15) specialDay += "ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        if(month === 8 && day === 1) specialDay += "ุญุถุฑุช ุฒูุจ ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุฏุช โข ";
        
        // ุญุถุฑุช ุฑู ุจูุช ุนู ุฑุถ ุงูู ุนูุง
        if(month === 5 && day === 20) specialDay += "ุญุถุฑุช ุฑู ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุงู ฺฉูุซูู ุจูุช ุนู ุฑุถ ุงูู ุนูุง
        if(month === 3 && day === 5) specialDay += "ุญุถุฑุช ุงู ฺฉูุซูู ุจูุช ุนู ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุณุฏ ููุณ ุฑุถ ุงูู ุนูุง
        if(month === 3 && day === 14) specialDay += "ุญุถุฑุช ุณุฏ ููุณ ุฑุถ ุงูู ุนูุง ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุฑุงุจุน ุจุตุฑ ุฑุญู ุงูู
        if(month === 5 && day === 15) specialDay += "ุญุถุฑุช ุฑุงุจุน ุจุตุฑ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ===== ุงุฆู ุงู ุจุช =====
        // ุงูุงู ุญุณู ูุฌุชุจูฐ ุฑุถ ุงูู ุนู
        if(month === 3 && day === 8) specialDay += "ุงูุงู ุญุณู ูุฌุชุจูฐ ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 9 && day === 5) specialDay += "ุงูุงู ุญุณู ูุฌุชุจูฐ ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ุญุณู ุดุฏ ุฑุถ ุงูู ุนู
        if(month === 3 && day === 5) specialDay += "ุงูุงู ุญุณู ุดุฏ ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 8 && day === 3) specialDay += "ุงูุงู ุญุณู ุดุฏ ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 1 && day === 10) specialDay += "ูู ุนุงุดูุฑ โข ุดุงุฏุช ุงูุงู ุญุณู ุฑุถ ุงูู ุนู โข ";
        
        // ุงูุงู ุฒู ุงูุนุงุจุฏู ุฑุถ ุงูู ุนู
        if(month === 5 && day === 5) specialDay += "ุงูุงู ุฒู ุงูุนุงุจุฏู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 1 && day === 25) specialDay += "ุงูุงู ุฒู ุงูุนุงุจุฏู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ูุญูุฏ ุจุงูุฑ ุฑุถ ุงูู ุนู
        if(month === 3 && day === 1) specialDay += "ุงูุงู ูุญูุฏ ุจุงูุฑ ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 12 && day === 7) specialDay += "ุงูุงู ูุญูุฏ ุจุงูุฑ ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ุฌุนูุฑ ุตุงุฏู ุฑุถ ุงูู ุนู
        if(month === 4 && day === 17) specialDay += "ุงูุงู ุฌุนูุฑ ุตุงุฏู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 10 && day === 25) specialDay += "ุงูุงู ุฌุนูุฑ ุตุงุฏู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ููุณูฐ ฺฉุงุธู ุฑุถ ุงูู ุนู
        if(month === 12 && day === 7) specialDay += "ุงูุงู ููุณูฐ ฺฉุงุธู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 7 && day === 25) specialDay += "ุงูุงู ููุณูฐ ฺฉุงุธู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ุนู ุฑุถุง ุฑุถ ุงูู ุนู
        if(month === 11 && day === 11) specialDay += "ุงูุงู ุนู ุฑุถุง ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 7 && day === 10) specialDay += "ุงูุงู ุนู ุฑุถุง ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 9 && day === 29) specialDay += "ุงูุงู ุนู ุฑุถุง ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ูุญูุฏ ุชู ุฑุถ ุงูู ุนู
        if(month === 11 && day === 29) specialDay += "ุงูุงู ูุญูุฏ ุชู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ุงูุงู ุนู ูู ุฑุถ ุงูู ุนู
        if(month === 12 && day === 15) specialDay += "ุงูุงู ุนู ูู ุฑุถ ุงูู ุนู ฺฉ ููุงุฏุช โข ";
        if(month === 11 && day === 30) specialDay += "ุงูุงู ุนู ูู ุฑุถ ุงูู ุนู ฺฉ ุดุงุฏุช โข ";
        
        // ===== ุงููุงุก ุงูู ู ุจุฒุฑฺฏุงู ุฏู =====
        // ุญุถุฑุช ุนุจุฏุงููุงุฏุฑ ุฌูุงู ุฑุญู ุงูู
        if(month === 3 && day === 11) specialDay += "ุญุถุฑุช ุนุจุฏุงููุงุฏุฑ ุฌูุงู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        if(month === 9 && day === 19) specialDay += "ุญุถุฑุช ุนุจุฏุงููุงุฏุฑ ุฌูุงู ุฑุญู ุงูู ฺฉ ููุงุฏุช โข ";
        
        // ุญุถุฑุช ุฎูุงุฌ ูุนู ุงูุฏู ฺุดุช ุฑุญู ุงูู
        if(month === 3 && day === 6) specialDay += "ุญุถุฑุช ุฎูุงุฌ ูุนู ุงูุฏู ฺุดุช ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุฎูุงุฌ ูุธุงู ุงูุฏู ุงููุงุก ุฑุญู ุงูู
        if(month === 3 && day === 18) specialDay += "ุญุถุฑุช ุฎูุงุฌ ูุธุงู ุงูุฏู ุงููุงุก ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุฎูุงุฌ ุจุฎุชุงุฑ ฺฉุงฺฉ ุฑุญู ุงูู
        if(month === 4 && day === 15) specialDay += "ุญุถุฑุช ุฎูุงุฌ ุจุฎุชุงุฑ ฺฉุงฺฉ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุจุงุจุง ูุฑุฏ ุงูุฏู ฺฏูุฌ ุดฺฉุฑ ุฑุญู ุงูู
        if(month === 5 && day === 5) specialDay += "ุญุถุฑุช ุจุงุจุง ูุฑุฏ ุงูุฏู ฺฏูุฌ ุดฺฉุฑ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุฎูุงุฌ ูุญูุฏ ุจุฎุด ุฑุญู ุงูู
        if(month === 5 && day === 9) specialDay += "ุญุถุฑุช ุฎูุงุฌ ูุญูุฏ ุจุฎุด ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุณูุทุงู ุจุงู ุฑุญู ุงูู
        if(month === 6 && day === 1) specialDay += "ุญุถุฑุช ุณูุทุงู ุจุงู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุดุง ูู ุงูู ูุญุฏุซ ุฏูู ุฑุญู ุงูู
        if(month === 6 && day === 7) specialDay += "ุญุถุฑุช ุดุง ูู ุงูู ูุญุฏุซ ุฏูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูุฌุฏุฏ ุงูู ุซุงู ุฑุญู ุงูู
        if(month === 7 && day === 1) specialDay += "ุญุถุฑุช ูุฌุฏุฏ ุงูู ุซุงู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุดุง ุนุจุฏุงูุนุฒุฒ ูุญุฏุซ ุฏูู ุฑุญู ุงูู
        if(month === 7 && day === 7) specialDay += "ุญุถุฑุช ุดุง ุนุจุฏุงูุนุฒุฒ ูุญุฏุซ ุฏูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุดุง ุนุจุฏุงูุฑุญู ุฑุญู ุงูู
        if(month === 8 && day === 15) specialDay += "ุญุถุฑุช ุดุง ุนุจุฏุงูุฑุญู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุดุง ูู ุงูู ุฑุญู ุงูู
        if(month === 8 && day === 20) specialDay += "ุญุถุฑุช ุดุง ูู ุงูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุดุง ุนุจุฏุงููุฏูุณ ฺฏูฺฏู ุฑุญู ุงูู
        if(month === 9 && day === 8) specialDay += "ุญุถุฑุช ุดุง ุนุจุฏุงููุฏูุณ ฺฏูฺฏู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูููุงูุง ุฑูู ุฑุญู ุงูู
        if(month === 9 && day === 16) specialDay += "ุญุถุฑุช ูููุงูุง ุฑูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุงูุงู ุบุฒุงู ุฑุญู ุงูู
        if(month === 9 && day === 14) specialDay += "ุญุถุฑุช ุงูุงู ุบุฒุงู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุงูุงู ุงุจู ุญูู ุฑุญู ุงูู
        if(month === 10 && day === 15) specialDay += "ุญุถุฑุช ุงูุงู ุงุจู ุญูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุงูุงู ุดุงูุน ุฑุญู ุงูู
        if(month === 10 && day === 20) specialDay += "ุญุถุฑุช ุงูุงู ุดุงูุน ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุงูุงู ุงุญูุฏ ุจู ุญูุจู ุฑุญู ุงูู
        if(month === 11 && day === 12) specialDay += "ุญุถุฑุช ุงูุงู ุงุญูุฏ ุจู ุญูุจู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ุงูุงู ูุงูฺฉ ุฑุญู ุงูู
        if(month === 11 && day === 14) specialDay += "ุญุถุฑุช ุงูุงู ูุงูฺฉ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ===== ุฌุฏุฏ ุงููุงุก =====
        // ุญุถุฑุช ฺุงฺฉูนุฑ ูุญูุฏ ุนุจุฏุงููุฏุฑ ุฎุงู ุตุงุญุจ
        if(month === 2 && day === 15) specialDay += "ุญุถุฑุช ฺุงฺฉูนุฑ ูุญูุฏ ุนุจุฏุงููุฏุฑ ุฎุงู ุตุงุญุจ ฺฉ ููุงุฏุช โข ";
        
        // ุญุถุฑุช ููุช ูุญูุฏ ุดูุน ุนุซูุงู ุฑุญู ุงูู
        if(month === 3 && day === 25) specialDay += "ุญุถุฑุช ููุช ูุญูุฏ ุดูุน ุนุซูุงู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูููุงูุง ุงุดุฑู ุนู ุชฺพุงูู ุฑุญู ุงูู
        if(month === 4 && day === 10) specialDay += "ุญุถุฑุช ูููุงูุง ุงุดุฑู ุนู ุชฺพุงูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูููุงูุง ุณุฏ ุงุจูุงูุงุนู ููุฏูุฏ ุฑุญู ุงูู
        if(month === 4 && day === 22) specialDay += "ุญุถุฑุช ูููุงูุง ุณุฏ ุงุจูุงูุงุนู ููุฏูุฏ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ฺุงฺฉูนุฑ ุงุณุฑุงุฑ ุงุญูุฏ ุฑุญู ุงูู
        if(month === 5 && day === 20) specialDay += "ุญุถุฑุช ฺุงฺฉูนุฑ ุงุณุฑุงุฑ ุงุญูุฏ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูุงุฑ ูุญูุฏ ุทุจ ุตุงุญุจ ุฑุญู ุงูู
        if(month === 6 && day === 10) specialDay += "ุญุถุฑุช ูุงุฑ ูุญูุฏ ุทุจ ุตุงุญุจ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ููุช ูุญููุฏ ุงูุญุณู ฺฏูฺฏู ุฑุญู ุงูู
        if(month === 7 && day === 5) specialDay += "ุญุถุฑุช ููุช ูุญููุฏ ุงูุญุณู ฺฏูฺฏู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูููุงูุง ูุญูุฏ ูุณู ฺฉุงูุฏฺพูู ุฑุญู ุงูู
        if(month === 8 && day === 15) specialDay += "ุญุถุฑุช ูููุงูุง ูุญูุฏ ูุณู ฺฉุงูุฏฺพูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูููุงูุง ูุญูุฏ ุงูุงุณ ฺฉุงูุฏฺพูู ุฑุญู ุงูู
        if(month === 9 && day === 10) specialDay += "ุญุถุฑุช ูููุงูุง ูุญูุฏ ุงูุงุณ ฺฉุงูุฏฺพูู ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูููุงูุง ุนุจุฏุงูุณุชุงุฑ ูุงุฒ ุฑุญู ุงูู
        if(month === 10 && day === 5) specialDay += "ุญุถุฑุช ูููุงูุง ุนุจุฏุงูุณุชุงุฑ ูุงุฒ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ูุงุฑ ุณุฏ ุตุฏู ุงุญูุฏ ุตุงุญุจ ุฑุญู ุงูู
        if(month === 11 && day === 20) specialDay += "ุญุถุฑุช ูุงุฑ ุณุฏ ุตุฏู ุงุญูุฏ ุตุงุญุจ ุฑุญู ุงูู ฺฉ ููุงุช โข ";
        
        // ุญุถุฑุช ููุช ูุญูุฏ ุชู ุนุซูุงู ุตุงุญุจ
        if(month === 12 && day === 15) specialDay += "ุญุถุฑุช ููุช ูุญูุฏ ุชู ุนุซูุงู ุตุงุญุจ ฺฉ ููุงุฏุช โข ";
        
        // ===== ฺุงูุฏ ุฑุงุชฺบ =====
        let chandRat = "";
        if(day === 29 || day === 30) {
            if(month === 1) chandRat = "๐ ูุญุฑู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 2) chandRat = "๐ ุตูุฑ ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 3) chandRat = "๐ ุฑุจุน ุงูุงูู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 4) chandRat = "๐ ุฑุจุน ุงูุซุงู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 5) chandRat = "๐ ุฌูุงุฏ ุงูุงูู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 6) chandRat = "๐ ุฌูุงุฏ ุงูุซุงู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 7) chandRat = "๐ ุฑุฌุจ ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 8) chandRat = "๐ ุดุนุจุงู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 9) chandRat = "๐ ุฑูุถุงู ุงููุจุงุฑฺฉ ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 10) chandRat = "๐ ุดูุงู ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 11) chandRat = "๐ ุฐูุงููุนุฏ ฺฉ ฺุงูุฏ ุฑุงุช";
            else if(month === 12) chandRat = "๐ ุฐูุงูุญุฌ ฺฉ ฺุงูุฏ ุฑุงุช";
            
            chandRat += ` (${day} ${urduMonths[month]})`;
        }
        
        if (specialDay === "") {
            specialDay = "ฺฉูุฆ ุฎุงุต ุฏู ูฺบ";
        } else {
            // ุขุฎุฑ "โข" ฺฉู ูนุงุฆฺบ
            specialDay = specialDay.slice(0, -2);
        }
        
        return { specialDay, chandRat };
    }

    // ========== ุตุฑู ุฑูุช ูุงู ฺฉููน ฺฉ ูุจ ุณุงุฆูน ุณ ฺูนุง ูู ูุงูุง ููฺฉุดู ==========
    async function getRuyatEHilalDate() {
        try {
            // ููฺูฺฏ ุงููุฑู ุฏฺฉฺพุงุฆฺบ
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // CORS proxy ุงุณุชุนูุงู ฺฉุฑฺบ
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const targetUrl = 'https://www.royaithilalcommittee.pk/';
            
            const response = await fetch(proxyUrl + encodeURIComponent(targetUrl), {
                headers: {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                }
            });
            
            if (!response.ok) {
                throw new Error('ูุจ ุณุงุฆูน ุณ ฺูนุง ูฺบ ูู ุณฺฉุง');
            }
            
            const html = await response.text();
            
            // HTML ุณ ุชุงุฑุฎ ูฺฉุงูู ฺฉ ฺฉูุดุด
            // ูุฎุชูู ูพูนุฑู ฺฺฉ ฺฉุฑฺบ
            
            // ูพูนุฑู 1: "ุขุฌ 20 ูุฑูุฑ 2026ุก ุจุฑูุฒ ุฌูุน 1 ุฑูุถุงู ุงููุจุงุฑฺฉ 1447ฺพ "
            let match = html.match(/ุขุฌ\s+(\d+)\s+(\S+)\s+(\d+)[ุก]?.*?(\d+)\s+(\S+)\s+(\d+)[ฺพ]/);
            
            if (match) {
                const gregorianDay = parseInt(match[1]);
                const gregorianMonth = match[2];
                const gregorianYear = parseInt(match[3]);
                const hijriDay = parseInt(match[4]);
                const hijriMonth = match[5];
                const hijriYear = parseInt(match[6]);
                
                // ูู ฺฉุง ููุจุฑ ูุนููู ฺฉุฑฺบ
                const monthMap = {
                    'ุฌููุฑ': 1, 'ูุฑูุฑ': 2, 'ูุงุฑฺ': 3, 'ุงูพุฑู': 4,
                    'ูุฆ': 5, 'ุฌูู': 6, 'ุฌููุงุฆ': 7, 'ุงฺฏุณุช': 8,
                    'ุณุชูุจุฑ': 9, 'ุงฺฉุชูุจุฑ': 10, 'ูููุจุฑ': 11, 'ุฏุณูุจุฑ': 12
                };
                
                const hijriMonthMap = {
                    'ูุญุฑู': 1, 'ูุญุฑู ุงูุญุฑุงู': 1,
                    'ุตูุฑ': 2, 'ุตูุฑ ุงููุธูุฑ': 2,
                    'ุฑุจุน ุงูุงูู': 3,
                    'ุฑุจุน ุงูุซุงู': 4,
                    'ุฌูุงุฏ ุงูุงูู': 5,
                    'ุฌูุงุฏ ุงูุซุงู': 6,
                    'ุฑุฌุจ': 7, 'ุฑุฌุจ ุงููุฑุฌุจ': 7,
                    'ุดุนุจุงู': 8, 'ุดุนุจุงู ุงููุนุธู': 8,
                    'ุฑูุถุงู': 9, 'ุฑูุถุงู ุงููุจุงุฑฺฉ': 9,
                    'ุดูุงู': 10, 'ุดูุงู ุงููฺฉุฑู': 10,
                    'ุฐูุงููุนุฏ': 11, 'ุฐูุงููุนุฏ ุงูุญุฑุงู': 11,
                    'ุฐูุงูุญุฌ': 12, 'ุฐูุงูุญุฌ ุงูุญุฑุงู': 12
                };
                
                return {
                    success: true,
                    gregorian: {
                        day: gregorianDay,
                        month: monthMap[gregorianMonth] || 2,
                        year: gregorianYear
                    },
                    hijri: {
                        day: hijriDay,
                        month: hijriMonthMap[hijriMonth] || 9,
                        monthName: hijriMonth,
                        year: hijriYear
                    }
                };
            }
            
            // ูพูนุฑู 2: "1 ุฑูุถุงู ุงููุจุงุฑฺฉ 1447ฺพ"
            match = html.match(/(\d+)\s+(\S+\s+\S+|\S+)\s+(\d+)[ฺพ]/);
            
            if (match) {
                const hijriDay = parseInt(match[1]);
                const hijriMonth = match[2];
                const hijriYear = parseInt(match[3]);
                
                const hijriMonthMap = {
                    'ูุญุฑู': 1, 'ูุญุฑู ุงูุญุฑุงู': 1,
                    'ุตูุฑ': 2, 'ุตูุฑ ุงููุธูุฑ': 2,
                    'ุฑุจุน ุงูุงูู': 3,
                    'ุฑุจุน ุงูุซุงู': 4,
                    'ุฌูุงุฏ ุงูุงูู': 5,
                    'ุฌูุงุฏ ุงูุซุงู': 6,
                    'ุฑุฌุจ': 7, 'ุฑุฌุจ ุงููุฑุฌุจ': 7,
                    'ุดุนุจุงู': 8, 'ุดุนุจุงู ุงููุนุธู': 8,
                    'ุฑูุถุงู': 9, 'ุฑูุถุงู ุงููุจุงุฑฺฉ': 9,
                    'ุดูุงู': 10, 'ุดูุงู ุงููฺฉุฑู': 10,
                    'ุฐูุงููุนุฏ': 11, 'ุฐูุงููุนุฏ ุงูุญุฑุงู': 11,
                    'ุฐูุงูุญุฌ': 12, 'ุฐูุงูุญุฌ ุงูุญุฑุงู': 12
                };
                
                // ุงฺฏุฑ ูู ฺฉุง ูุงู ูพูุฑุง  ุชู ุงุณ ฺฺพุงููนฺบ
                let monthNum = 9; // default ุฑูุถุงู
                for (let [key, value] of Object.entries(hijriMonthMap)) {
                    if (hijriMonth.includes(key)) {
                        monthNum = value;
                        break;
                    }
                }
                
                return {
                    success: true,
                    hijri: {
                        day: hijriDay,
                        month: monthNum,
                        monthName: hijriMonth,
                        year: hijriYear
                    }
                };
            }
            
            throw new Error('ุชุงุฑุฎ ูฺบ ูู ุณฺฉ');
            
        } catch (error) {
            console.log('ุฑูุช ูุงู ูุจ ุณุงุฆูน ุณ ฺูนุง ูฺบ ูู ุณฺฉุง:', error);
            return {
                success: false,
                error: error.message
            };
        } finally {
            // ููฺูฺฏ ุงููุฑู ฺฺพูพุงุฆฺบ
            document.getElementById('loadingOverlay').style.display = 'none';
        }
    }

    // ========== ูุณุชูู ุชุงุฑุฎ (ุงฺฏุฑ ูุจ ุณุงุฆูน ฺฉุงู ู ฺฉุฑ) ==========
    function getDefaultDate() {
        const today = new Date();
        const month = today.getMonth();
        const date = today.getDate();
        
        // ูุฑูุฑ 2026 ฺฉ ู ูุณุชูู ุชุงุฑุฎฺบ
        if (month === 1) { // ูุฑูุฑ
            if (date === 20) return { day: 2, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 21) return { day: 3, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 22) return { day: 4, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 23) return { day: 5, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 24) return { day: 6, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 25) return { day: 7, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 26) return { day: 8, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 27) return { day: 9, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
            if (date === 28) return { day: 10, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
        }
        
        // default
        return { day: 2, month: 9, year: 1447, monthName: "ุฑูุถุงู ุงููุจุงุฑฺฉ" };
    }

    async function renderApp() {
        const mi = parseInt(document.getElementById('monthSelect').value);
        const co = parseInt(selC.value);
        const cn = selC.options[selC.selectedIndex].text;
        const tb = document.getElementById('tableContent');
        const now = new Date();
        const dCount = new Date(2026, mi + 1, 0).getDate();
        document.getElementById('cityNameLabel').innerText = cn;
        tb.innerHTML = '';

        let todayMaghrib = "";
        const urduDays = ["ุงุชูุงุฑ", "ูพุฑ", "ููฺฏู", "ุจุฏฺพ", "ุฌูุนุฑุงุช", "ุฌูุน", "ูุช"];

        for (let d = 1; d <= dCount; d++) {
            let t = [];
            for (let i = 0; i < 7; i++) {
                let sm = tToM(baseData[mi].s[i]), em = tToM(baseData[mi].e[i]);
                let b = sm + Math.round(((em - sm) / (dCount - 1)) * (d - 1));
                t.push(mToT(b + co));
            }
            const ishraq = mToT(tToM(t[1]) + 20);
            const chasht = mToT(tToM(t[1]) + Math.round((tToM(t[2]) - tToM(t[1])) / 2));
            const zw = mToT(tToM(t[3]) - 20); 
            const jF = mToT(rndJ(tToM(t[0]), 25));
            const jZ = "01:30";
            const jA = mToT(rndJ(tToM(t[4]), 20));
            const jM = mToT(tToM(t[5]) + 3);
            const jI = mToT(rndJ(tToM(t[6]), 30));

            const isT = (mi === now.getMonth() && d === now.getDate());
            if (isT) todayMaghrib = t[5]; 

            const row = document.createElement('tr');
            if (isT) row.className = 'active-day';
            row.innerHTML = `<td>${d}</td><td>${t[0]}<span class="j-mini">ุฌ: ${jF}</span></td><td>${t[1]}</td><td>${ishraq}</td><td>${chasht}</td><td>${t[2]}</td><td class="danger">${zw}</td><td>${t[3]}<span class="j-mini">ุฌ: ${jZ}</span></td><td>${t[4]}<span class="j-mini">ุฌ: ${jA}</span></td><td>${t[5]}<span class="j-mini">ุฌ: ${jM}</span></td><td>${t[6]}<span class="j-mini">ุฌ: ${jI}</span></td>`;
            tb.appendChild(row);

            if (isT) {
                const ms = ["ุฌููุฑ","ูุฑูุฑ","ูุงุฑฺ","ุงูพุฑู","ูุฆ","ุฌูู","ุฌููุงุฆ","ุงฺฏุณุช","ุณุชูุจุฑ","ุงฺฉุชูุจุฑ","ูููุจุฑ","ุฏุณูุจุฑ"];
                const dayName = urduDays[now.getDay()];
                
                try {
                    let hijriDate;
                    
                    // ูุบุฑุจ ฺฉุง ุงุตูู
                    let targetDate = now;
                    if (now.getHours() * 60 + now.getMinutes() >= tToM(todayMaghrib)) {
                        targetDate = new Date(now);
                        targetDate.setDate(targetDate.getDate() + 1);
                    }
                    
                    // ูพู ุฑูุช ูุงู ูุจ ุณุงุฆูน ุณ ฺูนุง ูู ฺฉ ฺฉูุดุด
                    const ruyatData = await getRuyatEHilalDate();
                    
                    if (ruyatData.success && ruyatData.hijri) {
                        // ูุจ ุณุงุฆูน ุณ ฺูนุง ูู ฺฏุง
                        hijriDate = {
                            day: ruyatData.hijri.day,
                            month: ruyatData.hijri.month,
                            year: ruyatData.hijri.year,
                            monthName: ruyatData.hijri.monthName
                        };
                        
                        // ุจุฌ ุงูพฺูน ฺฉุฑฺบ
                        document.getElementById('sourceBadge').innerHTML = `
                            <span>๐ ุฑูุช ูุงู ฺฉููน ูพุงฺฉุณุชุงู</span>
                            <span class="verified">โ ุณุฑฺฉุงุฑ</span>
                            <span class="halal-badge">ุญูุงู ฺฉููน</span>
                        `;
                    } else {
                        // ู ูู ุชู ูุณุชูู ุชุงุฑุฎ ุงุณุชุนูุงู ฺฉุฑฺบ
                        hijriDate = getDefaultDate();
                        
                        document.getElementById('sourceBadge').innerHTML = `
                            <span>๐ ุฑูุช ูุงู ฺฉููน ูพุงฺฉุณุชุงู</span>
                            <span class="verified">โ ูุณุชูู</span>
                            <span class="halal-badge">ุญูุงู ฺฉููน</span>
                        `;
                    }

                    const hijriStr = `${hijriDate.day} ${hijriDate.monthName} ${hijriDate.year}ฺพ`;
                    
                    // ุงูพฺูน ุดุฏ ููฺฉุดู ุณ ูุฎุตูุต ุฏู ุงูุฑ ฺุงูุฏ ุฑุงุช ูฺบ
                    const { specialDay, chandRat } = getSpecialDayUrdu(hijriDate.day, hijriDate.month);

                    let specialDisplay = specialDay;
                    let chandDisplay = chandRat ? `<span class="chand-rat">${chandRat}</span>` : "";

                    document.getElementById('fullDateDisplay').innerHTML = `<span class="day-highlight">${dayName}</span> | ${d} ${ms[mi]} ${now.getFullYear()}ุก | <span class="hijri-date">${hijriStr}</span>`;
                    document.getElementById('makhsoosDin').innerHTML = `<span style="color: gold;">ูุฎุตูุต ุฏู:</span> <b>${specialDisplay}</b>${chandDisplay}`;
                    
                } catch (e) { 
                    document.getElementById('fullDateDisplay').innerHTML = `<span class="day-highlight">${dayName}</span> | ${d} ${ms[mi]} ${now.getFullYear()}ุก | <span class="hijri-date">ุชุงุฑุฎ ุฏุณุชุงุจ ูฺบ</span>`;
                    document.getElementById('makhsoosDin').innerHTML = `ูุฎุตูุต ุฏู: <b>ูุนููู ูฺบ</b>`;
                }
                
                const grid = document.getElementById('cardGrid');
                grid.innerHTML = '';
                const display = [
                    {l:"ูุฌุฑ",v:t[0],j:jF},
                    {l:"ุทููุน",v:t[1]},
                    {l:"ุงุดุฑุงู",v:ishraq},
                    {l:"ฺุงุดุช",v:chasht},
                    {l:"ุถุญู",v:t[2]},
                    {l:"ููููุน",v:zw,w:true},
                    {l:"ุธุฑ",v:t[3],j:jZ},
                    {l:"ุนุตุฑ",v:t[4],j:jA},
                    {l:"ูุบุฑุจ",v:t[5],j:jM},
                    {l:"ุนุดุงุก",v:t[6],j:jI}
                ];
                display.forEach(i => { 
                    grid.innerHTML += `<div class="time-box"><span class="t-label ${i.w?'danger':''}">${i.l}</span><span class="t-val">${i.v}</span>${i.j?`<span class="j-tag">ุฌูุงุนุช: ${i.j}</span>`:''}</div>`; 
                });
            }
        }
    }
    
    for(let i = 0; i < selC.options.length; i++) {
        if(selC.options[i].text === "ฺฉุฑุงฺ") {
            selC.selectedIndex = i;
            break;
        }
    }
    
    document.getElementById('monthSelect').value = new Date().getMonth();
    renderApp();
</script>
</body>
</html>
