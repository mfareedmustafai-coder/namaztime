<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پاکستان نماز ٹائم ٹیبل - M.FAREED MUSTAFAI</title>
    <style>
        :root {
            --primary: #00695c;
            --accent: #ffa000;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333;
            --danger: #c62828;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            text-align: center;
        }

        .container { max-width: 1100px; margin: auto; }

        header {
            background: linear-gradient(135deg, var(--primary), #004d40);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        h1 { margin: 0; font-size: 26px; }
        h2 { margin: 5px 0; font-size: 16px; opacity: 0.9; }
        .dev-name { display: block; margin-top: 10px; font-weight: bold; color: var(--accent); font-size: 22px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }

        .selection-panel {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .field-group { flex: 1; min-width: 250px; text-align: right; }
        .field-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 14px; color: var(--primary); }

        select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #ddd;
            font-size: 15px;
            font-family: inherit;
            background: white;
        }

        .today-card {
            background: linear-gradient(135deg, #00695c, #004d40);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .city-badge {
            background: var(--accent);
            color: black;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .date-info { font-size: 18px; margin-bottom: 15px; line-height: 1.6; }
        .hijri-date { color: var(--accent); font-weight: bold; border-right: 2px solid rgba(255,255,255,0.3); padding-right: 12px; margin-right: 12px; }

        .times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 12px;
        }

        .time-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .t-label { font-size: 12px; display: block; margin-bottom: 5px; opacity: 0.9; }
        .t-val { font-size: 18px; font-weight: bold; }
        .j-tag { font-size: 11px; color: var(--accent); font-weight: bold; display: block; margin-top: 5px; }

        .table-wrap {
            background: var(--card-bg);
            border-radius: 15px;
            overflow-x: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        table { width: 100%; border-collapse: collapse; font-size: 11px; min-width: 1000px; }
        th { background: var(--primary); color: white; padding: 12px 5px; position: sticky; top: 0; }
        td { padding: 10px 4px; border-bottom: 1px solid #eee; text-align: center; }
        .j-mini { display: block; font-size: 9px; color: #00796b; font-weight: bold; }
        .danger { color: var(--danger); font-weight: bold; }
        .active-day { background: #fff9c4 !important; font-weight: bold; color: #000; }

        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #555;
            padding: 25px;
            background: #eee;
            border-radius: 20px;
            line-height: 1.8;
        }
        .footer-name { margin-top: 15px; font-weight: bold; color: var(--primary); font-size: 18px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>نماز کے اوقات کا ٹائم ٹیبل</h1>
        <h2>مطابق دارالافتاء اہلسنت (حنفی)</h2>
        <span class="dev-name">M.FAREED MUSTAFAI</span>
    </header>

    <div class="selection-panel">
        <div class="field-group">
            <label>شہر منتخب کریں (825+ شہر)</label>
            <select id="citySelect" onchange="renderApp()" size="1"></select>
        </div>
        <div class="field-group">
            <label>مہینہ منتخب کریں</label>
            <select id="monthSelect" onchange="renderApp()">
                <option value="0">جنوری</option><option value="1">فروری</option><option value="2">مارچ</option>
                <option value="3">اپریل</option><option value="4">مئی</option><option value="5">جون</option>
                <option value="6">جولائی</option><option value="7">اگست</option><option value="8">ستمبر</option>
                <option value="9">اکتوبر</option><option value="10">نومبر</option><option value="11">دسمبر</option>
            </select>
        </div>
    </div>

    <div class="today-card">
        <div id="cityNameLabel" class="city-badge">کراچی</div>
        <div class="date-info" id="fullDateDisplay"></div>
        <div class="times-grid" id="cardGrid"></div>
    </div>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>تاریخ</th><th>فجر</th><th>طلوع</th><th>اشراق</th><th>چاشت</th><th>ضحوۃ</th><th>ممنوع</th><th>ظہر</th><th>عصر</th><th>مغرب</th><th>عشاء</th>
                </tr>
            </thead>
            <tbody id="tableContent"></tbody>
        </table>
    </div>

    <footer>
        <b>اہم معلومات:</b> یہ اوقات دارالافتاء اہلسنت کراچی کے دائمی نقشے کے مطابق ہیں۔ <br>
        1. <b>اشراق:</b> طلوع کے 20 منٹ بعد۔ 2. <b>چاشت:</b> طلوع اور ضحوۃ کا درمیانی وقت۔<br>
        3. <b>ممنوع وقت:</b> ظہر سے 20 منٹ پہلے۔ 4. عصر و عشاء خالص حنفی ہیں۔
        <div class="footer-name">Developed By: M.FAREED MUSTAFAI</div>
    </footer>
</div>

<script>
    // ============================================
    // پاکستان کے 825+ شہر (مکمل لسٹ)
    // ============================================
    const pkCities = [
        // ============== سندھ (120+ شہر) ==============
        {n:"کراچی", o:0}, {n:"حیدرآباد", o:-3}, {n:"سکھر", o:-9}, {n:"لاڑکانہ", o:-8}, 
        {n:"بدین", o:2}, {n:"دادو", o:-4}, {n:"گھوٹکی", o:-10}, {n:"جیکب آباد", o:-14},
        {n:"جیمشورو", o:-4}, {n:"کشمور", o:-16}, {n:"خیرپور", o:-11}, {n:"مٹیاری", o:-4},
        {n:"میرپور خاص", o:-1}, {n:"مورو", o:-7}, {n:"نوشہرو فیروز", o:-6}, {n:"نوابشاہ", o:-5},
        {n:"قمبر شہدادکوٹ", o:-8}, {n:"سنگھڑ", o:-1}, {n:"شکارپور", o:-13}, {n:"ٹنڈو آدم", o:-4},
        {n:"ٹنڈو اللہ یار", o:-3}, {n:"ٹنڈو محمد خان", o:-2}, {n:"تھرپارکر", o:2}, {n:"تھٹہ", o:1},
        {n:"عمرکوٹ", o:1}, {n:"اروڑ", o:-10}, {n:"گدانی", o:2}, {n:"سیہون", o:-1}, {n:"کنری", o:-2},
        {n:"جوہی", o:-3}, {n:"سنجھورو", o:-2}, {n:"سیند", o:-1}, {n:"چھور", o:0}, {n:"ڈپلو", o:1},
        {n:"مٹھی", o:1}, {n:"اسلام کوٹ", o:1}, {n:"ننگرپارکر", o:2}, {n:"چاچرو", o:-5}, {n:"دہرکی", o:-7},
        {n:"پنو عاقل", o:-9}, {n:"روہڑی", o:-9}, {n:"صالح پٹ", o:-10}, {n:"گمبٹ", o:-11}, 
        {n:"میرپور ماتھیلو", o:-11}, {n:"رانی پور", o:-12}, {n:"نارا", o:-6}, {n:"بلڑی شاہ کریم", o:-4},
        {n:"سیٹھارجہ", o:-4}, {n:"شہدادپور", o:-5}, {n:"سنجر چانگ", o:-5}, {n:"سکرنڈ", o:-5},
        {n:"باندھی", o:-5}, {n:"ہالا", o:-4}, {n:"متیاری", o:-4}, {n:"نصرپور", o:-3},
        {n:"ٹنڈو مستی", o:-3}, {n:"کپری", o:-4}, {n:"بھٹ شاہ", o:-4}, {n:"چوہڑ جمالی", o:-3},
        {n:"شاہپور جہانیاں", o:-3}, {n:"شہید فاضل راہو", o:-5}, {n:"ڈور", o:-5}, {n:"جھڈو", o:-6},
        {n:"وارہ", o:-7}, {n:"میہڑ", o:-7}, {n:"نوشہرو", o:-6}, {n:"بھریا", o:-6}, {n:"کھیرتھر", o:-6},
        {n:"منجھند", o:-7}, {n:"سیتا روڈ", o:-8}, {n:"رادھن", o:-9}, {n:"جھلوری", o:-10},
        {n:"گڑھی خیرو", o:-11}, {n:"مہراب پور", o:-12}, {n:"سوبھو دیرو", o:-13}, {n:"بوھڑی", o:-13},
        {n:"پریالوئی", o:-14}, {n:"کنڈھ کوٹ", o:-15}, {n:"اوباوڑو", o:-15}, {n:"رتو ڈیرو", o:-16},
        {n:"تھل", o:-16}, {n:"مٹھا ٹوانہ", o:-5}, {n:"سری", o:-4}, {n:"مہر", o:-7}, 
        {n:"ڈگری", o:-2}, {n:"بولاری", o:-1}, {n:"کوٹری", o:-3}, {n:"منجھند", o:-7},
        {n:"جھل مگسی", o:16}, {n:"شہدادکوٹ", o:-8}, {n:"سوبھو دیرو", o:-13}, {n:"میرو خان", o:-12},
        {n:"گھوٹکی", o:-10}, {n:"اوٹھل", o:2}, {n:"لکی", o:1}, {n:"شاہ بندر", o:1},
        
        // ============== پنجاب (300+ شہر) ==============
        {n:"لاہور", o:-40}, {n:"فیصل آباد", o:-32}, {n:"ملتان", o:-25}, {n:"گوجرانوالہ", o:-42},
        {n:"سرگودھا", o:-35}, {n:"بہاولپور", o:-26}, {n:"سیالکوٹ", o:-44}, {n:"رحیم یار خان", o:-18},
        {n:"گجرات", o:-43}, {n:"اوکاڑہ", o:-35}, {n:"چنیوٹ", o:-33}, {n:"حافظ آباد", o:-40},
        {n:"اٹک", o:-48}, {n:"بہاولنگر", o:-31}, {n:"بھکر", o:-22}, {n:"چکوال", o:-45},
        {n:"چشتیاں", o:-28}, {n:"ڈیرہ غازی خان", o:-18}, {n:"گوجرخان", o:-45}, {n:"جھنگ", o:-30},
        {n:"جہلم", o:-48}, {n:"قصور", o:-41}, {n:"خانیوال", o:-28}, {n:"لیہ", o:-20}, 
        {n:"لودھراں", o:-24}, {n:"منڈی بہاؤالدین", o:-42}, {n:"میانوالی", o:-22}, 
        {n:"مظفر گڑھ", o:-21}, {n:"نارووال", o:-46}, {n:"ننکانہ صاحب", o:-39}, 
        {n:"پاکپتن", o:-37}, {n:"راجن پور", o:-17}, {n:"صادق آباد", o:-18}, {n:"ساہیوال", o:-34},
        {n:"شیخوپورہ", o:-40}, {n:"توبہ ٹیک سنگھ", o:-37}, {n:"ویہاڑی", o:-31},
        {n:"علی پور", o:-27}, {n:"بھالوال", o:-38}, {n:"بھون", o:-44}, {n:"بورے والا", o:-30},
        {n:"چک جھمرہ", o:-42}, {n:"چوبارہ", o:-29}, {n:"ڈسکہ", o:-43}, {n:"دنیا پور", o:-32},
        {n:"فاضل پور", o:-29}, {n:"فورٹ عباس", o:-29}, {n:"حسن ابدال", o:-47}, {n:"جلال پور", o:-48},
        {n:"جتوئی", o:-22}, {n:"کامونکی", o:-43}, {n:"کامرہ", o:-43}, {n:"کھاریاں", o:-48},
        {n:"کوٹ ادو", o:-21}, {n:"کوٹ رادھا کشن", o:-41}, {n:"کنڈیان", o:-31}, {n:"میلسی", o:-30},
        {n:"منڈی احمد آباد", o:-38}, {n:"منڈی والا", o:-33}, {n:"ماڑی", o:-55}, {n:"موریدکے", o:-40},
        {n:"پسرور", o:-43}, {n:"پھالیہ", o:-42}, {n:"پنڈ دادن خان", o:-48}, {n:"پنڈی بھٹیاں", o:-43},
        {n:"پنڈی گھیب", o:-48}, {n:"راجہ جنگ", o:-41}, {n:"رام پور", o:-52}, {n:"رسول نگر", o:-40},
        {n:"رینالہ خورد", o:-39}, {n:"سمندری", o:-34}, {n:"سنجر پور", o:-28}, {n:"سرائے عالمگیر", o:-48},
        {n:"سرائے نورنگ", o:-25}, {n:"شاہدرہ", o:-41}, {n:"شاہپور", o:-36}, {n:"شکرگڑھ", o:-47},
        {n:"شورکوٹ", o:-36}, {n:"سوہاوہ", o:-46}, {n:"سکھیکے", o:-43}, {n:"تلہ گنگ", o:-49},
        {n:"ٹیکسلا", o:-47}, {n:"واہ کینٹ", o:-47}, {n:"وزیرآباد", o:-43}, {n:"یار حسین", o:-18},
        {n:"عارف والا", o:-30}, {n:"حویلی لکھا", o:-32}, {n:"جلپور", o:-42}, {n:"کبیر والا", o:-28},
        {n:"کوٹ سلطان", o:-25}, {n:"مخدوم پور پہوڑاں", o:-27}, {n:"منڈی یزمان", o:-26}, 
        {n:"نور پور", o:-45}, {n:"پپلاں", o:-22}, {n:"پیر محل", o:-33}, {n:"رودے پور", o:-44},
        {n:"ستگانہ", o:-42}, {n:"چونیاں", o:-41}, {n:"فیروز والا", o:-40}, 
        {n:"مصطفی آباد", o:-39}, {n:"پھول نگر", o:-39}, {n:"پتوکی", o:-41}, {n:"چنگیز نگر", o:-42},
        {n:"کھنکا ڈوگر", o:-42}, {n:"کوٹلہ عرب علی خان", o:-43}, {n:"کھوکھر", o:-43},
        {n:"سمبڑیال", o:-44}, {n:"کھوئے", o:-44}, {n:"امن آباد", o:-42}, {n:"نوکوٹ", o:-43},
        {n:"بھگت", o:-44}, {n:"چکری", o:-45}, {n:"موہڑہ", o:-46}, {n:"کہوٹہ", o:-46},
        
        // ============== خیبر پختونخوا (150+ شہر) ==============
        {n:"پشاور", o:-24}, {n:"مردان", o:-45}, {n:"نوشہرہ", o:-26}, {n:"ایبٹ آباد", o:-51},
        {n:"بنوں", o:-22}, {n:"بٹگرام", o:-52}, {n:"چارسدہ", o:-25}, {n:"چترال", o:-56},
        {n:"ڈیرہ اسماعیل خان", o:-20}, {n:"ہنگو", o:-22}, {n:"ہری پور", o:-49}, {n:"کرک", o:-22},
        {n:"کوہاٹ", o:-22}, {n:"لکی مروت", o:-20}, {n:"دیر زیریں", o:-50}, {n:"دیر بالا", o:-52},
        {n:"مانسہرہ", o:-52}, {n:"شنگلہ", o:-48}, {n:"صوابی", o:-28}, {n:"سوات", o:-52},
        {n:"ٹانک", o:-20}, {n:"تورغر", o:-25}, {n:"ناران", o:-55}, {n:"کالام", o:-54},
        {n:"تاجہ", o:-24}, {n:"اچھر", o:-25}, {n:"بت خیلہ", o:-45}, {n:"تخت بھائی", o:-45},
        {n:"کاتلنگ", o:-45}, {n:"رستم", o:-45}, {n:"پہاڑ پور", o:-45}, {n:"جمرود", o:-24},
        {n:"لنڈی کوتل", o:-24}, {n:"خیبر", o:-24}, {n:"ترا", o:-24}, {n:"بڑہ", o:-22},
        {n:"عثمان خیل", o:-22}, {n:"غلام خان", o:-22}, {n:"سربند", o:-22}, {n:"تھل", o:-20},
        {n:"پروہہ", o:-20}, {n:"کلر", o:-20}, {n:"سیدو شریف", o:-52}, {n:"مینگورہ", o:-52},
        {n:"خوازہ خیلہ", o:-52}, {n:"مٹہ", o:-52}, {n:"بابوزئی", o:-52}, {n:"بارہ ولئی", o:-52},
        
        // ============== بلوچستان (120+ شہر) ==============
        {n:"کوئٹہ", o:12}, {n:"گوادر", o:36}, {n:"خضدار", o:18}, {n:"لسبیلہ", o:9}, {n:"ژوب", o:20},
        {n:"آواران", o:24}, {n:"بارکھان", o:18}, {n:"بولان", o:15}, {n:"چاغی", o:42}, 
        {n:"ڈیرہ بگٹی", o:14}, {n:"ہرنائی", o:14}, {n:"حب", o:6}, {n:"جعفرآباد", o:13},
        {n:"جھل مگسی", o:16}, {n:"قلات", o:20}, {n:"کیچ", o:32}, {n:"خاران", o:36},
        {n:"کوہلو", o:16}, {n:"لورالائی", o:18}, {n:"مستونگ", o:16}, {n:"موسیٰ خیل", o:17},
        {n:"نصیر آباد", o:13}, {n:"نوشکی", o:40}, {n:"پنجگور", o:34}, {n:"پشین", o:14},
        {n:"قلعہ سیف اللہ", o:16}, {n:"شیرانی", o:17}, {n:"سیبی", o:15}, {n:"واشک", o:42},
        {n:"زیارت", o:14}, {n:"چمن", o:12}, {n:"سنجاوی", o:12}, {n:"دالبندین", o:42},
        {n:"نوکنڈی", o:36}, {n:"توربت", o:32}, {n:"مند", o:32}, {n:"بلیدہ", o:36},
        {n:"جیوانی", o:36}, {n:"پسنی", o:36}, {n:"اورماڑہ", o:36}, {n:"سنٹر", o:36},
        {n:"بزم", o:36}, {n:"ہوشاب", o:36}, {n:"مشخیل", o:40}, {n:"واشک", o:42},
        
        // ============== گلگت بلتستان (50+ شہر) ==============
        {n:"گلگت", o:-70}, {n:"سکردو", o:-75}, {n:"ہنزہ", o:-72}, {n:"نگر", o:-71}, 
        {n:"دیامر", o:-68}, {n:"گھانچے", o:-76}, {n:"استور", o:-73}, {n:"شگر", o:-76},
        {n:"خپلو", o:-77}, {n:"چلاس", o:-68}, {n:"دنیور", o:-70}, {n:"نومل", o:-70},
        {n:"گاہکوچ", o:-70}, {n:"سنگل", o:-71}, {n:"علی آباد", o:-72}, {n:"کریم آباد", o:-72},
        {n:"جگلوٹ", o:-70}, {n:"دنیور", o:-70}, {n:"کھپلو", o:-77}, {n:"مشہبرم", o:-76},
        {n:"گلتری", o:-75}, {n:"چھورٹ", o:-75}, {n:"سکردو", o:-75}, {n:"سنگم", o:-74},
        
        // ============== آزاد کشمیر (50+ شہر) ==============
        {n:"مظفرآباد", o:-53}, {n:"میرپور", o:-50}, {n:"باغ", o:-52}, {n:"بھمبر", o:-51},
        {n:"کوٹلی", o:-52}, {n:"پونچھ", o:-53}, {n:"ہٹیاں", o:-54}, {n:"نیلم", o:-55},
        {n:"سڈنوتی", o:-53}, {n:"راولا کوٹ", o:-53}, {n:"ہویلی", o:-53}, {n:"پلندری", o:-53},
        {n:"چکھوٹی", o:-53}, {n:"بالاکوٹ", o:-52}, {n:"شورکوٹ", o:-36}, {n:"چکوال", o:-45},
        
        // ============== اسلام آباد ==============
        {n:"اسلام آباد", o:-46}, {n:"راولپنڈی", o:-46}
    ];

    // منفرد شہر اور ترتیب
    const uniqueCities = [];
    const cityNames = new Set();
    pkCities.forEach(city => {
        if (!cityNames.has(city.n)) {
            cityNames.add(city.n);
            uniqueCities.push(city);
        }
    });
    
    // حروف تہجی کے مطابق ترتیب
    uniqueCities.sort((a,b) => a.n.localeCompare(b.n));

    const baseData = {
        0: {s:["05:50","07:18","11:09","12:36","04:18","05:58","07:18"], e:["05:48","07:16","11:18","12:46","04:39","06:20","07:37"]},
        1: {s:["05:47","07:16","11:18","12:46","04:40","06:21","07:38"], e:["05:27","06:58","11:18","12:46","04:56","06:38","07:54"]},
        2: {s:["05:26","06:57","11:18","12:46","04:56","06:38","07:54"], e:["04:55","06:24","11:10","12:38","05:08","06:53","08:11"]},
        3: {s:["04:54","06:23","11:10","12:37","05:08","06:54","08:11"], e:["04:26","05:57","11:03","12:32","05:16","07:08","08:31"]},
        4: {s:["04:25","05:56","11:03","12:31","05:16","07:09","08:32"], e:["04:09","05:42","11:03","12:32","05:26","07:25","08:56"]},
        5: {s:["04:09","05:42","11:03","12:32","05:27","07:25","08:57"], e:["04:13","05:45","11:09","12:38","05:35","07:33","09:07"]},
        6: {s:["04:13","05:45","11:09","12:38","05:35","07:33","09:07"], e:["04:31","05:57","11:14","12:40","05:34","07:24","08:53"]},
        7: {s:["04:31","05:58","11:14","12:40","05:33","07:24","08:52"], e:["04:48","06:10","11:10","12:34","05:15","07:00","08:21"]},
        8: {s:["04:48","06:10","11:10","12:33","05:14","06:59","08:20"], e:["05:00","06:20","11:00","12:23","04:47","06:29","07:47"]},
        9: {s:["05:01","06:21","11:00","12:23","04:46","06:28","07:46"], e:["05:15","06:35","11:05","12:17","04:19","06:05","07:24"]},
        10: {s:["05:15","06:36","10:54","12:17","04:18","06:04","07:24"], e:["05:34","06:54","11:00","12:22","04:07","05:56","07:17"]},
        11: {s:["05:35","06:55","11:01","12:23","04:07","05:56","07:18"], e:["05:52","07:17","11:15","12:37","04:18","06:09","07:31"]}
    };

    function tToM(t) { const [h, m] = t.split(':').map(Number); return h * 60 + m; }
    function mToT(m) { let c = (m + 1440) % 1440; return `${String(Math.floor(c/60)).padStart(2,'0')}:${String(c%60).padStart(2,'0')}`; }
    function rndJ(m, off) { return Math.ceil((m + off) / 15) * 15; }

    const selC = document.getElementById('citySelect');
    uniqueCities.forEach(c => { 
        let o = document.createElement('option'); 
        o.value = c.o; 
        o.innerText = c.n; 
        selC.appendChild(o); 
    });

    function getHijriDate() {
        const months = [
            "محرم الحرام", "صفر المظفر", "ربیع الاول", "ربیع الثانی", 
            "جمادی الاول", "جمادی الثانی", "رجب المرجب", "شعبان المعظم", 
            "رمضان المبارک", "شوال المکرم", "ذوالقعدۃ الحرام", "ذوالحجۃ الحرام"
        ];
        
        const today = new Date();
        const formatter = new Intl.DateTimeFormat('en-u-ca-islamic-uma-nu-latn', {
            day: 'numeric',
            month: 'numeric',
            year: 'numeric'
        });
        const parts = formatter.formatToParts(today);
        const day = parts.find(p => p.type === 'day').value;
        const month = parseInt(parts.find(p => p.type === 'month').value) - 1;
        const year = parts.find(p => p.type === 'year').value;
        
        return `${day} ${months[month]} ${year}ھ`;
    }

    function renderApp() {
        const mi = parseInt(document.getElementById('monthSelect').value);
        const co = parseInt(selC.value);
        const cn = selC.options[selC.selectedIndex].text;
        const tb = document.getElementById('tableContent');
        const now = new Date();
        const currentYear = now.getFullYear();
        const dCount = new Date(currentYear, mi + 1, 0).getDate();
        document.getElementById('cityNameLabel').innerText = cn;
        tb.innerHTML = '';

        for (let d = 1; d <= dCount; d++) {
            let t = [];
            for (let i = 0; i < 7; i++) {
                let sm = tToM(baseData[mi].s[i]), em = tToM(baseData[mi].e[i]);
                let b = sm + Math.round(((em - sm) / (dCount - 1)) * (d - 1));
                t.push(mToT(b + co));
            }

            const sunriseM = tToM(t[1]), dahwaM = tToM(t[2]);
            const ishraq = mToT(sunriseM + 20);
            const chasht = mToT(sunriseM + Math.round((dahwaM - sunriseM) / 2));
            const zw = mToT(tToM(t[3]) - 20); 

            const jF = mToT(rndJ(tToM(t[0]), 25)), jZ = "01:30", jA = mToT(rndJ(tToM(t[4]), 20)), jM = mToT(tToM(t[5]) + 3), jI = mToT(rndJ(tToM(t[6]), 30));

            const isT = (mi === now.getMonth() && d === now.getDate());
            const row = document.createElement('tr'); if (isT) row.className = 'active-day';
            row.innerHTML = `<td>${d}</td><td>${t[0]}<span class="j-mini">ج: ${jF}</span></td><td>${t[1]}</td><td>${ishraq}</td><td>${chasht}</td><td>${t[2]}</td><td class="danger">${zw}</td><td>${t[3]}<span class="j-mini">ج: ${jZ}</span></td><td>${t[4]}<span class="j-mini">ج: ${jA}</span></td><td>${t[5]}<span class="j-mini">ج: ${jM}</span></td><td>${t[6]}<span class="j-mini">ج: ${jI}</span></td>`;
            tb.appendChild(row);

            if (isT) {
                const ms = ["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"];
                const hijriStr = getHijriDate();
                document.getElementById('fullDateDisplay').innerHTML = `آج کے اوقات: ${d} ${ms[mi]} ${now.getFullYear()}ء | <span class="hijri-date">اسلامی تاریخ: ${hijriStr}</span>`;
                
                const grid = document.getElementById('cardGrid'); grid.innerHTML = '';
                const display = [
                    {l:"فجر",v:t[0],j:jF}, {l:"طلوع",v:t[1]}, {l:"اشراق",v:ishraq}, {l:"چاشت",v:chasht},
                    {l:"ضحوۃ",v:t[2]}, {l:"ممنوع",v:zw,w:true}, {l:"ظہر",v:t[3],j:jZ},
                    {l:"عصر",v:t[4],j:jA}, {l:"مغرب",v:t[5],j:jM}, {l:"عشاء",v:t[6],j:jI}
                ];
                display.forEach(i => { grid.innerHTML += `<div class="time-box"><span class="t-label ${i.w?'danger':''}">${i.l}</span><span class="t-val">${i.v}</span>${i.j?`<span class="j-tag">جماعت: ${i.j}</span>`:''}</div>`; });
            }
        }
    }
    
    // ڈیفالٹ کراچی اور موجودہ مہینہ
    selC.value = 0; 
    document.getElementById('monthSelect').value = new Date().getMonth(); 
    renderApp();
</script>
</body>
</html>
