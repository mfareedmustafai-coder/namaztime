<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پاکستان نماز ٹائم ٹیبل - M.FAREED MUSTAFAI</title>
    <style>
        :root {
            --primary-color: #00695c;
            --secondary-color: #ffa000;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333;
            --danger-color: #c62828;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 10px;
            text-align: center;
        }

        .container {
            max-width: 850px;
            margin: auto;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), #004d40);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        h1 { margin: 0; font-size: 26px; }
        h2 { margin: 5px 0; font-size: 16px; opacity: 0.9; }
        .developer-name {
            display: block;
            margin-top: 10px;
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .selector-box {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .input-group { flex: 1; min-width: 250px; text-align: right; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 14px; color: var(--primary-color); }

        select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #ddd;
            font-size: 15px;
            font-family: inherit;
        }

        .current-day-card {
            background: linear-gradient(135deg, #00695c, #004d40);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .city-label {
            background: var(--secondary-color);
            color: black;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .time-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .time-label { font-size: 13px; display: block; margin-bottom: 5px; opacity: 0.9; }
        .time-value { font-size: 22px; font-weight: bold; }
        .j-tag { font-size: 13px; color: var(--secondary-color); font-weight: bold; display: block; margin-top: 5px; }

        .table-container {
            background: var(--card-bg);
            border-radius: 15px;
            overflow-x: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            min-width: 850px;
        }

        th { background: var(--primary-color); color: white; padding: 15px 5px; position: sticky; top: 0; }
        td { padding: 12px 5px; border-bottom: 1px solid #eee; }
        .j-mini { display: block; font-size: 11px; color: #00796b; font-weight: bold; margin-top: 3px; }

        .danger { color: var(--danger-color); font-weight: bold; }
        tr:nth-child(even) { background: #f9f9f9; }
        .today-row { background: #fff9c4 !important; font-weight: bold; color: #000; }

        .footer {
            margin-top: 20px;
            font-size: 12px;
            color: #555;
            padding: 25px;
            background: #eee;
            border-radius: 20px;
            line-height: 1.8;
            text-align: right;
        }
        .dev-footer {
            margin-top: 15px;
            font-weight: bold;
            color: var(--primary-color);
            font-size: 18px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>پاکستان نماز ٹائم ٹیبل</h1>
        <h2>مطابق دارالافتاء اہلسنت (دعوتِ اسلامی)</h2>
        <span class="developer-name">M.FAREED MUSTAFAI</span>
    </header>

    <div class="selector-box">
        <div class="input-group">
            <label>شہر منتخب کریں (200+ شہر)</label>
            <select id="citySelect" onchange="updateView()"></select>
        </div>
        <div class="input-group">
            <label>مہینہ منتخب کریں</label>
            <select id="monthSelect" onchange="updateView()">
                <option value="0">جنوری</option><option value="1">فروری</option><option value="2">مارچ</option>
                <option value="3">اپریل</option><option value="4">مئی</option><option value="5">جون</option>
                <option value="6">جولائی</option><option value="7">اگست</option><option value="8">ستمبر</option>
                <option value="9">اکتوبر</option><option value="10">نومبر</option><option value="11">دسمبر</option>
            </select>
        </div>
    </div>

    <div class="current-day-card" id="todayCard">
        <div id="cityNameBadge" class="city-label">کراچی</div>
        <div id="todayDateLabel" style="font-size: 18px; margin-bottom: 10px;">آج کے اوقات</div>
        <div class="time-grid" id="mainGrid"></div>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>تاریخ</th><th>فجر</th><th>طلوع</th><th>ضحوۃ</th><th>ممنوع</th><th>ظہر</th><th>عصر</th><th>مغرب</th><th>عشاء</th>
                </tr>
            </thead>
            <tbody id="timetableBody"></tbody>
        </table>
    </div>

    <div class="footer">
        <b>اہم وضاحت:</b> یہ اوقات دارالافتاء اہلسنت کراچی کے مستقل دائمی نقشے کے مطابق ہیں جس میں فروری میں ظہر کا وقت 12:46 ہے، جیسا کہ آپ نے درست فرمایا۔ ممنوع وقت ظہر شروع ہونے سے 20 منٹ پہلے شروع ہوتا ہے۔
        <div class="dev-footer">Developed By: M.FAREED MUSTAFAI</div>
    </div>
</div>

<script>
    // Comprehensive City Database with offsets
    const pkCities = [
        {n:"کراچی", o:0}, {n:"حیدرآباد", o:-3}, {n:"لاہور", o:-40}, {n:"اسلام آباد", o:-46}, {n:"راولپنڈی", o:-46},
        {n:"فیصل آباد", o:-32}, {n:"ملتان", o:-25}, {n:"گجرانوالہ", o:-42}, {n:"پشاور", o:-24}, {n:"کوئٹہ", o:12},
        {n:"سیالکوٹ", o:-44}, {n:"سرگودھا", o:-35}, {n:"بہاولپور", o:-26}, {n:"سکھر", o:-9}, {n:"جھنگ", o:-31},
        {n:"شیخوپورہ", o:-41}, {n:"لاڑکانہ", o:-8}, {n:"مردان", o:-45}, {n:"قصور", o:-41}, {n:"رحیم یار خان", o:-18},
        {n:"ساہیوال", o:-30}, {n:"اوکاڑہ", o:-34}, {n:"واہ کینٹ", o:-46}, {n:"ڈیرہ غازی خان", o:-20}, {n:"نواب شاہ", o:-6},
        {n:"جہلم", o:-48}, {n:"حافظ آباد", o:-40}, {n:"کوہاٹ", o:-28}, {n:"جیکب آباد", o:-7}, {n:"مظفر آباد", o:-51},
        {n:"چکوال", o:-41}, {n:"میانوالی", o:-32}, {n:"ڈیرہ اسماعیل خان", o:-24}, {n:"سکردو", o:-52}, {n:"گلگت", o:-45},
        {n:"تھرپارکر", o:-1}, {n:"گوادر", o:28}, {n:"تربت", o:20}, {n:"خضدار", o:10}
    ].sort((a,b) => a.n.localeCompare(b.n));

    // REVERTED to original correct base timings (matching 12:46 Zohr for Feb)
    const basePoints = {
        0: {s:["05:50","07:18","11:09","12:36","04:18","05:58","07:18"], e:["05:48","07:16","11:18","12:46","04:39","06:20","07:37"]},
        1: {s:["05:47","07:16","11:18","12:46","04:40","06:21","07:38"], e:["05:27","06:58","11:18","12:46","04:56","06:38","07:54"]},
        2: {s:["05:26","06:57","11:18","12:46","04:56","06:38","07:54"], e:["04:55","06:24","11:10","12:38","05:08","06:53","08:11"]},
        3: {s:["04:54","06:23","11:10","12:37","05:08","06:54","08:11"], e:["04:26","05:57","11:03","12:32","05:16","07:08","08:31"]},
        4: {s:["04:25","05:56","11:03","12:31","05:16","07:09","08:32"], e:["04:09","05:42","11:03","12:32","05:26","07:25","08:56"]},
        5: {s:["04:09","05:42","11:03","12:32","05:27","07:25","08:57"], e:["04:13","05:45","11:09","12:38","05:35","07:33","09:07"]},
        6: {s:["04:13","05:45","11:09","12:38","05:35","07:33","09:07"], e:["04:31","05:57","11:14","12:40","05:34","07:24","08:53"]},
        7: {s:["04:31","05:58","11:14","12:40","05:33","07:24","08:52"], e:["04:48","06:10","11:10","12:34","05:15","07:00","08:21"]},
        8: {s:["04:48","06:10","11:10","12:33","05:14","06:59","08:20"], e:["05:00","06:20","11:00","12:23","04:47","06:29","07:47"]},
        9: {s:["05:01","06:21","11:00","12:23","04:46","06:28","07:46"], e:["05:15","06:35","11:05","12:17","04:19","06:05","07:24"]},
        10: {s:["05:15","06:36","10:54","12:17","04:18","06:04","07:24"], e:["05:34","06:54","11:00","12:22","04:07","05:56","07:17"]},
        11: {s:["05:35","06:55","11:01","12:23","04:07","05:56","07:18"], e:["05:52","07:17","11:15","12:37","04:18","06:09","07:31"]}
    };

    function tToM(t) { const [h, m] = t.split(':').map(Number); return h * 60 + m; }
    function mToT(m) { let c = (m + 1440) % 1440; return `${String(Math.floor(c/60)).padStart(2,'0')}:${String(c%60).padStart(2,'0')}`; }
    function roundJ(m, o) { return Math.ceil((m + o) / 15) * 15; }

    const selCity = document.getElementById('citySelect');
    pkCities.forEach(c => { let o = document.createElement('option'); o.value = c.o; o.innerText = c.n; selCity.appendChild(o); });

    function updateView() {
        const mi = parseInt(document.getElementById('monthSelect').value);
        const co = parseInt(selCity.value);
        const cn = selCity.options[selCity.selectedIndex].text;
        const tb = document.getElementById('timetableBody');
        const now = new Date();
        const dCount = new Date(2026, mi + 1, 0).getDate();
        
        document.getElementById('cityNameBadge').innerText = cn;
        tb.innerHTML = '';

        for (let d = 1; d <= dCount; d++) {
            let t = [];
            for (let i = 0; i < 7; i++) {
                let sm = tToM(basePoints[mi].s[i]), em = tToM(basePoints[mi].e[i]);
                let b = sm + Math.round(((em - sm) / (dCount - 1)) * (d - 1));
                t.push(mToT(b + co));
            }

            const zw = mToT(tToM(t[3]) - 20); // Zawal = Zohr Start - 20 mins
            const jF = mToT(roundJ(tToM(t[0]), 25)), jZ = "01:30", jA = mToT(roundJ(tToM(t[4]), 20)), jM = mToT(tToM(t[5]) + 3), jI = mToT(roundJ(tToM(t[6]), 30));

            const isT = (mi === now.getMonth() && d === now.getDate());
            const row = document.createElement('tr'); if (isT) row.className = 'today-row';
            row.innerHTML = `<td>${d}</td><td>${t[0]}<span class="j-mini">ج: ${jF}</span></td><td>${t[1]}</td><td>${t[2]}</td><td class="danger">${zw}</td><td>${t[3]}<span class="j-mini">ج: ${jZ}</span></td><td>${t[4]}<span class="j-mini">ج: ${jA}</span></td><td>${t[5]}<span class="j-mini">ج: ${jM}</span></td><td>${t[6]}<span class="j-mini">ج: ${jI}</span></td>`;
            tb.appendChild(row);

            if (isT) {
                const ms = ["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"];
                document.getElementById('todayDateLabel').innerText = `آج کے اوقات: ${d} ${ms[mi]}`;
                const grid = document.getElementById('mainGrid'); grid.innerHTML = '';
                const dList = [{l:"فجر",v:t[0],j:jF},{l:"طلوع",v:t[1]},{l:"ضحوۃ",v:t[2]},{l:"ممنوع",v:zw,w:true},{l:"ظہر",v:t[3],j:jZ},{l:"عصر",v:t[4],j:jA},{l:"مغرب",v:t[5],j:jM},{l:"عشاء",v:t[6],j:jI}];
                dList.forEach(i => { grid.innerHTML += `<div class="time-item"><span class="t-label ${i.w?'danger':''}">${i.l}</span><span class="t-val">${i.v}</span>${i.j?`<span class="j-tag">جماعت: ${i.j}</span>`:''}</div>`; });
            }
        }
    }

    selCity.value = 0;
    document.getElementById('monthSelect').value = new Date().getMonth();
    updateView();
</script>
</body>
</html>
