<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پاکستان نماز ٹائم ٹیبل - M.FAREED MUSTAFAI</title>
    <style>
        :root {
            --primary: #00695c;
            --accent: #ffa000;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333;
            --danger: #c62828;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            text-align: center;
        }

        .container { max-width: 1100px; margin: auto; }

        header {
            background: linear-gradient(135deg, var(--primary), #004d40);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        h1 { margin: 0; font-size: 26px; }
        h2 { margin: 5px 0; font-size: 16px; opacity: 0.9; }
        .dev-name { display: block; margin-top: 10px; font-weight: bold; color: var(--accent); font-size: 22px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }

        .selection-panel {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .field-group { flex: 1; min-width: 250px; text-align: right; }
        .field-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 14px; color: var(--primary); }

        select {
            width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #ddd;
            font-size: 15px; font-family: inherit; background: white;
        }

        .today-card {
            background: linear-gradient(135deg, #00695c, #004d40);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,215,0,0.3);
            border-top-color: gold;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: gold;
            font-size: 18px;
            font-weight: bold;
        }

        .city-badge {
            background: var(--accent);
            color: black;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .source-badge {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid gold;
            padding: 10px 25px;
            border-radius: 40px;
            font-size: 18px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            box-shadow: 0 0 15px rgba(255,215,0,0.3);
        }
        
        .verified {
            background: gold;
            color: black;
            padding: 4px 15px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .halal-badge {
            background: #4caf50;
            color: white;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .google-badge {
            background: #4285f4;
            color: white;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        .date-info { 
            font-size: 32px;
            margin-bottom: 20px; 
            line-height: 1.6; 
            font-weight: bold;
        }
        
        .hijri-date { 
            color: gold; 
            font-weight: bold; 
            border-right: 2px solid rgba(255,255,255,0.3); 
            padding-right: 12px; 
            margin-right: 12px;
            font-size: 32px;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }
        
        .day-highlight {
            display: inline-block;
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid gold;
            padding: 5px 20px;
            border-radius: 30px;
            margin-left: 10px;
            font-size: 32px;
            font-weight: bold;
        }
        
        .special-day-box {
            background: rgba(255,255,255,0.15);
            border: 2px dashed gold;
            padding: 15px;
            border-radius: 15px;
            margin: 15px auto;
            font-size: 24px;
            max-width: 900px;
            font-weight: bold;
            line-height: 1.6;
            text-align: right;
        }
        
        .chand-rat {
            color: gold;
            font-weight: bold;
            display: block;
            margin-top: 10px;
            font-size: 26px;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }

        .times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 12px;
        }

        .time-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .t-label { font-size: 12px; display: block; margin-bottom: 5px; opacity: 0.9; }
        .t-val { font-size: 18px; font-weight: bold; }
        .j-tag { font-size: 11px; color: var(--accent); font-weight: bold; display: block; margin-top: 5px; }

        .table-wrap {
            background: var(--card-bg);
            border-radius: 15px;
            overflow-x: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        table { width: 100%; border-collapse: collapse; font-size: 11px; min-width: 1050px; }
        th { background: var(--primary); color: white; padding: 12px 5px; position: sticky; top: 0; }
        td { padding: 10px 4px; border-bottom: 1px solid #eee; text-align: center; }
        .j-mini { display: block; font-size: 9px; color: #00796b; font-weight: bold; }
        .danger { color: var(--danger); font-weight: bold; }
        .active-day { background: #fff9c4 !important; font-weight: bold; color: #000; }

        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #555;
            padding: 25px;
            background: #eee;
            border-radius: 20px;
            line-height: 1.8;
        }
        .footer-name { margin-top: 15px; font-weight: bold; color: var(--primary); font-size: 18px; }
        
        .city-count {
            background: var(--primary);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 10px;
        }

        /* نئے صفحے کے لیے اسٹائل */
        .page-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .tab-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            background: #ddd;
            color: #333;
            transition: 0.3s;
        }
        .tab-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 5px 15px rgba(0,105,92,0.3);
        }
        .page {
            display: none;
        }
        .page.active-page {
            display: block;
        }

        /* مسجد کی گھڑی کے لیے اسٹائل - بالکل ویسی ہی جیسی تصویر میں ہے */
        .masjid-clock {
            background: #0a1a1a;
            color: #e6d5a8;
            padding: 30px 20px;
            border-radius: 40px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            border: 3px solid #b8914a;
            position: relative;
            overflow: hidden;
            font-family: 'Traditional Arabic', 'Segoe UI', sans-serif;
        }
        
        .masjid-clock::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #b8914a, #f3d597, #b8914a);
        }
        
        .clock-title {
            font-size: 42px;
            margin-bottom: 15px;
            color: #f3d597;
            text-shadow: 0 0 15px rgba(243,213,151,0.7);
            font-weight: bold;
        }
        
        .analog-clock-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .analog-clock {
            width: 280px;
            height: 280px;
            border: 8px solid #b8914a;
            border-radius: 50%;
            position: relative;
            background: #0f1f1b;
            box-shadow: 0 0 40px rgba(184,145,74,0.3);
        }
        
        .clock-face {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }
        
        .hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom;
            border-radius: 10px;
            box-shadow: 0 0 10px gold;
        }
        
        .hour-hand {
            width: 8px;
            height: 70px;
            margin-left: -4px;
            background: #f3d597;
        }
        
        .minute-hand {
            width: 6px;
            height: 90px;
            margin-left: -3px;
            background: #e6c27a;
        }
        
        .second-hand {
            width: 2px;
            height: 100px;
            margin-left: -1px;
            background: #ff8a5c;
        }
        
        .center-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 18px;
            height: 18px;
            background: #b8914a;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            border: 2px solid #0f1f1b;
        }
        
        .clock-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            color: #b8914a;
            font-weight: bold;
            font-size: 24px;
        }
        
        .clock-numbers span {
            position: absolute;
            transform: translate(-50%, -50%);
            text-shadow: 0 0 5px rgba(184,145,74,0.5);
        }
        
        .clock-numbers span:nth-child(1) { top: 12%; left: 50%; } /* 12 */
        .clock-numbers span:nth-child(2) { top: 50%; right: 12%; } /* 3 */
        .clock-numbers span:nth-child(3) { bottom: 12%; left: 50%; } /* 6 */
        .clock-numbers span:nth-child(4) { top: 50%; left: 12%; } /* 9 */
        
        .digital-display {
            background: #1a2e2a;
            padding: 25px 40px;
            border-radius: 60px;
            border: 2px solid #b8914a;
            display: inline-block;
            margin: 15px auto;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.8);
        }
        
        .clock-display {
            font-size: 90px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            color: #f3d597;
            text-shadow: 0 0 10px #ffd700;
            letter-spacing: 5px;
            line-height: 1.2;
        }
        
        .clock-date {
            font-size: 26px;
            margin: 10px 0;
            color: #e6d5a8;
            background: rgba(0,0,0,0.5);
            padding: 8px 25px;
            border-radius: 40px;
            display: inline-block;
            border: 1px solid #b8914a;
        }
        
        .clock-status {
            font-size: 24px;
            background: #1a2e2a;
            padding: 10px 30px;
            border-radius: 50px;
            display: inline-block;
            margin: 15px 0;
            border: 2px solid #b8914a;
            color: #f3d597;
        }
        
        .prayer-highlight {
            background: #0f1f1b;
            border: 2px solid #b8914a;
            padding: 20px;
            border-radius: 30px;
            margin-top: 20px;
            font-size: 26px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.7);
        }
        
        .prayer-times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 30px;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 30px;
        }
        
        .prayer-time-item {
            background: #1a2e2a;
            padding: 15px;
            border-radius: 20px;
            border: 1px solid #b8914a;
        }
        
        .prayer-name {
            font-size: 18px;
            color: #e6d5a8;
            display: block;
        }
        
        .prayer-time {
            font-size: 22px;
            color: #f3d597;
            font-weight: bold;
            display: block;
            margin-top: 5px;
        }
        
        .jamaat-time {
            font-size: 16px;
            color: #b8914a;
            display: block;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>پاکستان نماز ٹائم ٹیبل</h1>
        <h2>مطابق دارالافتاء اہلسنت (حنفی) <span class="city-count">200+ شہر</span></h2>
        <span class="dev-name">M.FAREED MUSTAFAI</span>
    </header>

    <!-- ٹیبز -->
    <div class="page-tabs">
        <button class="tab-btn active" onclick="showPage('main')">نماز ٹائم ٹیبل</button>
        <button class="tab-btn" onclick="showPage('masjid')">🕌 مسجد کی گھڑی</button>
    </div>

    <!-- اصل صفحہ (پرانا) -->
    <div id="mainPage" class="page active-page">
        <div class="selection-panel">
            <div class="field-group">
                <label>شہر منتخب کریں (200+ شہر)</label>
                <select id="citySelect" onchange="renderApp()"></select>
            </div>
            <div class="field-group">
                <label>مہینہ منتخب کریں</label>
                <select id="monthSelect" onchange="renderApp()">
                    <option value="0">جنوری</option><option value="1">فروری</option><option value="2">مارچ</option>
                    <option value="3">اپریل</option><option value="4">مئی</option><option value="5">جون</option>
                    <option value="6">جولائی</option><option value="7">اگست</option><option value="8">ستمبر</option>
                    <option value="9">اکتوبر</option><option value="10">نومبر</option><option value="11">دسمبر</option>
                </select>
            </div>
        </div>

        <div class="today-card" id="todayCard">
            <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                <div class="loading-spinner"></div>
                <div class="loading-text">گوگل پر سرچ کیا جا رہا ہے...</div>
                <div class="loading-text" style="font-size: 14px; margin-top: 10px;">براہ کرم انتظار کریں</div>
            </div>
            <div id="cityNameLabel" class="city-badge">کراچی</div>
            <div class="source-badge" id="sourceBadge">
                <span>🕌 گوگل سرچ + رویت ہلال</span>
                <span class="verified">✓ لائیو</span>
                <span class="google-badge">Google</span>
            </div>
            <div class="date-info" id="fullDateDisplay">لوڈنگ...</div>
            <div class="special-day-box" id="makhsoosDin">مخصوص دن: لوڈنگ...</div>
            <div class="times-grid" id="cardGrid"></div>
        </div>

        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>تاریخ</th><th>فجر</th><th>طلوع</th><th>اشراق</th><th>چاشت</th><th>ضحوۃ</th><th>ممنوع</th><th>ظہر</th><th>عصر</th><th>مغرب</th><th>عشاء</th>
                    </tr>
                </thead>
                <tbody id="tableContent"></tbody>
            </table>
        </div>
    </div>

    <!-- نیا صفحہ: مسجد کی گھڑی (تصویر والی گھڑی کے ساتھ) -->
    <div id="masjidPage" class="page">
        <div class="masjid-clock" id="masjidClock">
            <div class="clock-title">🕌 مسجد کی گھڑی 🕌</div>
            
            <!-- اینالاگ گھڑی (تصویر والی) -->
            <div class="analog-clock-container">
                <div class="analog-clock">
                    <div class="clock-face">
                        <div class="clock-numbers">
                            <span>١٢</span>
                            <span>٣</span>
                            <span>٦</span>
                            <span>٩</span>
                        </div>
                        <div class="hand hour-hand" id="hourHand"></div>
                        <div class="hand minute-hand" id="minuteHand"></div>
                        <div class="hand second-hand" id="secondHand"></div>
                        <div class="center-dot"></div>
                    </div>
                </div>
                
                <!-- ڈیجیٹل ڈسپلے -->
                <div class="digital-display">
                    <div class="clock-display" id="clockTime">--:--:--</div>
                </div>
            </div>
            
            <div class="clock-date" id="clockGregorianDate"></div>
            <div class="clock-date" id="clockHijriDate"></div>
            <div class="clock-status" id="clockStatus">صبح کا وقت</div>
            
            <!-- نماز کے اوقات (تصویر کی طرح) -->
            <div class="prayer-times-grid" id="prayerTimesGrid">
                <div class="prayer-time-item">
                    <span class="prayer-name">فجر</span>
                    <span class="prayer-time" id="fajrTime">--:--</span>
                    <span class="jamaat-time" id="fajrJamaat">جماعت: --:--</span>
                </div>
                <div class="prayer-time-item">
                    <span class="prayer-name">طلوع</span>
                    <span class="prayer-time" id="sunriseTime">--:--</span>
                </div>
                <div class="prayer-time-item">
                    <span class="prayer-name">ظہر</span>
                    <span class="prayer-time" id="zuhrTime">--:--</span>
                    <span class="jamaat-time" id="zuhrJamaat">جماعت: ٠١:٣٠</span>
                </div>
                <div class="prayer-time-item">
                    <span class="prayer-name">عصر</span>
                    <span class="prayer-time" id="asrTime">--:--</span>
                    <span class="jamaat-time" id="asrJamaat">جماعت: --:--</span>
                </div>
                <div class="prayer-time-item">
                    <span class="prayer-name">مغرب</span>
                    <span class="prayer-time" id="maghribTime">--:--</span>
                    <span class="jamaat-time" id="maghribJamaat">جماعت: +٣ منٹ</span>
                </div>
                <div class="prayer-time-item">
                    <span class="prayer-name">عشاء</span>
                    <span class="prayer-time" id="ishaTime">--:--</span>
                    <span class="jamaat-time" id="ishaJamaat">جماعت: --:--</span>
                </div>
            </div>
            
            <div class="prayer-highlight" id="nextPrayerInfo">
                اگلی نماز: --:--
            </div>
        </div>
    </div>

    <footer>
        <b>اہم معلومات:</b> یہ اوقات دارالافتاء اہلسنت کراچی کے دائمی نقشے کے مطابق ہیں۔ <br>
        1. <b>اسلامی تاریخ:</b> رویت ہلال کمیٹی پاکستان کی ویب سائٹ سے براہ راست لی جاتی ہے <br>
        2. <b>مخصوص دن:</b> تمام صحابہ کرام، انبیاء کرام اور اولیاء اللہ کی ولادت و وصال کی تاریخیں شامل ہیں <br>
        3. <b>یہ نظام روزانہ خودکار اپڈیٹ ہوتا ہے</b>
        <div class="footer-name">Developed By: M.FAREED MUSTAFAI</div>
    </footer>
</div>

<script>
    // ========== 200+ پاکستانی شہر - دارالافتاء اہلسنت کے مطابق ==========
    const pkCities = [
        {n:"کراچی", o:0}, {n:"حیدرآباد", o:-3}, {n:"سکھر", o:-9}, {n:"لاڑکانہ", o:-8}, 
        {n:"نواب شاہ", o:-5}, {n:"میرپور خاص", o:-2}, {n:"دادو", o:-6}, {n:"جیکب آباد", o:-12},
        {n:"شکارپور", o:-10}, {n:"خیرپور", o:-7}, {n:"ٹھٹہ", o:-1}, {n:"بدین", o:0},
        {n:"ٹنڈو اللہ یار", o:-3}, {n:"ٹنڈو محمد خان", o:-3}, {n:"مٹیاری", o:-4},
        {n:"قمبر", o:-8}, {n:"شہداد کوٹ", o:-9}, {n:"گھوٹکی", o:-10}, {n:"پنو عاقل", o:-11},
        {n:"کنری", o:-9}, {n:"مہر", o:-8}, {n:"نصیر آباد", o:-7}, {n:"سیہون", o:-4},
        {n:"سجاول", o:-2}, {n:"جھل مگسی", o:-12}, {n:"عمر کوٹ", o:-1}, {n:"سانگھڑ", o:-4},
        {n:"ننکانہ", o:-5}, {n:"کوٹری", o:-4}, {n:"حسن اباد", o:-6}, {n:"رنی پور", o:-8},
        {n:"لاہور", o:-40}, {n:"فیصل آباد", o:-32}, {n:"راولپنڈی", o:-46}, {n:"ملتان", o:-25},
        {n:"گوجرانوالہ", o:-42}, {n:"سرگودھا", o:-35}, {n:"سیالکوٹ", o:-44}, {n:"بہاولپور", o:-26},
        {n:"گجرات", o:-43}, {n:"جہلم", o:-48}, {n:"چکوال", o:-45}, {n:"اٹک", o:-48},
        {n:"اوکاڑہ", o:-35}, {n:"قصور", o:-41}, {n:"شیخوپورہ", o:-41}, {n:"رحیم یار خان", o:-18},
        {n:"ڈیرہ غازی خان", o:-18}, {n:"ساہیوال", o:-32}, {n:"خانیوال", o:-28}, {n:"چنیوٹ", o:-33},
        {n:"حافظ آباد", o:-40}, {n:"منڈی بہاؤالدین", o:-43}, {n:"نارووال", o:-44}, {n:"وزیر آباد", o:-43},
        {n:"مظفر گڑھ", o:-22}, {n:"لیہ", o:-20}, {n:"بھکر", o:-22}, {n:"میانوالی", o:-24},
        {n:"خوشاب", o:-30}, {n:"ٹوبہ ٹیک سنگھ", o:-33}, {n:"جھنگ", o:-30}, {n:"لودھراں", o:-24},
        {n:"پاکپتن", o:-32}, {n:"عارف والا", o:-33}, {n:"بوریوالہ", o:-32}, {n:"کمالیہ", o:-33},
        {n:"سمندری", o:-34}, {n:"گوجرہ", o:-33}, {n:"چیچہ وطنی", o:-34}, {n:"پھالیہ", o:-42},
        {n:"پنڈ دادن خان", o:-46}, {n:"تلہ گنگ", o:-47}, {n:"فتح جنگ", o:-47}, {n:"حسن ابدال", o:-47},
        {n:"ہری پور", o:-47}, {n:"ایبٹ آباد", o:-48}, {n:"مانسہرہ", o:-49}, {n:"کوہاٹ", o:-25},
        {n:"بہاولنگر", o:-31}, {n:"حاصل پور", o:-30}, {n:"چشتیاں", o:-28}, {n:"فورٹ عباس", o:-27},
        {n:"خیرپور ٹامیوالی", o:-26}, {n:"صادق آباد", o:-19}, {n:"احمد پور شرقیہ", o:-22},
        {n:"علی پور", o:-21}, {n:"جتوئی", o:-20}, {n:"کہروڑ پکا", o:-23}, {n:"دنیا پور", o:-24},
        {n:"پشاور", o:-24}, {n:"مردان", o:-45}, {n:"نوشہرہ", o:-26}, {n:"چارسدہ", o:-26},
        {n:"صوابی", o:-28}, {n:"ایبٹ آباد", o:-48}, {n:"مانسہرہ", o:-49}, {n:"بٹگرام", o:-50},
        {n:"کوہستان", o:-51}, {n:"شانگلہ", o:-47}, {n:"بونیر", o:-45}, {n:"سوات", o:-44},
        {n:"دیر", o:-42}, {n:"چترال", o:-35}, {n:"دیر زیریں", o:-43}, {n:"دیر بالا", o:-42},
        {n:"باجوڑ", o:-22}, {n:"مہمند", o:-23}, {n:"خیبر", o:-24}, {n:"اورکزئی", o:-24},
        {n:"کرم", o:-25}, {n:"شمالی وزیرستان", o:-26}, {n:"جنوبی وزیرستان", o:-27},
        {n:"بنوں", o:-23}, {n:"لکی مروت", o:-22}, {n:"ٹانک", o:-21}, {n:"ڈیرہ اسماعیل خان", o:-20},
        {n:"ہنگو", o:-24}, {n:"کرک", o:-24}, {n:"کوہاٹ", o:-25}, {n:"نوشہرہ", o:-26},
        {n:"کوئٹہ", o:12}, {n:"چمن", o:10}, {n:"قلات", o:9}, {n:"خضدار", o:7},
        {n:"لسبیلہ", o:3}, {n:"گوادر", o:-5}, {n:"پنجگور", o:-2}, {n:"تربت", o:-3},
        {n:"سیبی", o:9}, {n:"نصیر آباد", o:7}, {n:"جعفر آباد", o:6}, {n:"ژوب", o:14},
        {n:"قلعہ سیف اللہ", o:13}, {n:"قلعہ عبداللہ", o:11}, {n:"مستونگ", o:11},
        {n:"پشین", o:12}, {n:"نیلہ", o:10}, {n:"دالبندین", o:15}, {n:"نوشکی", o:14},
        {n:"خاران", o:8}, {n:"واشک", o:6}, {n:"آواران", o:4}, {n:"کیچ", o:-2},
        {n:"آگ", o:10}, {n:"بولان", o:8}, {n:"ہرنائی", o:10}, {n:"لورالائی", o:12},
        {n:"بارکھان", o:11}, {n:"موسیٰ خیل", o:12}, {n:"کوہلو", o:10}, {n:"ڈیرہ بگٹی", o:9},
        {n:"اسلام آباد", o:-46}, {n:"راولپنڈی", o:-46}, {n:"چک شہزاد", o:-46},
        {n:"بھارہ کہو", o:-46}, {n:"سنگجانی", o:-46}, {n:"سوہان", o:-46}, {n:"ترنول", o:-46},
        {n:"گلگت", o:-56}, {n:"سکردو", o:-59}, {n:"ہنزہ", o:-57}, {n:"نگر", o:-57},
        {n:"غانچے", o:-59}, {n:"شگر", o:-59}, {n:"خپلو", o:-60}, {n:"استور", o:-58},
        {n:"دیامر", o:-55}, {n:"چلاس", o:-54}, {n:"گوپس", o:-56}, {n:"یاسین", o:-56},
        {n:"پونیال", o:-55}, {n:"ہوڈر", o:-57}, {n:"دنیور", o:-56}, {n:"سکردو", o:-59},
        {n:"کھرمنگ", o:-58}, {n:"شملشال", o:-57}, {n:"پاسو", o:-57}, {n:"حسین آباد", o:-57},
        {n:"مظفر آباد", o:-52}, {n:"نیلم", o:-53}, {n:"ہٹیاں", o:-52}, {n:"باغ", o:-50},
        {n:"پونچھ", o:-51}, {n:"سوڈھنوتی", o:-51}, {n:"کوتلی", o:-50}, {n:"میرپور", o:-49},
        {n:"بھمبر", o:-48}, {n:"سمہنی", o:-49}, {n:"سرنموہڑی", o:-50}, {n:"چک ہری", o:-50},
        {n:"چھبہ", o:-49}, {n:"ڈنہ", o:-51}, {n:"عباس پور", o:-49}, {n:"بلوچ", o:-50},
        {n:"بھیرہ", o:-44}, {n:"بھلوال", o:-38}, {n:"بھوانہ", o:-39}, {n:"بھکر", o:-22},
        {n:"چک جھمرہ", o:-40}, {n:"چوبارہ", o:-35}, {n:"ڈسکہ", o:-43}, {n:"ڈوگرہ", o:-41},
        {n:"ایمن آباد", o:-37}, {n:"فاضل پور", o:-25}, {n:"فتح پور", o:-28}, {n:"فیروز والا", o:-36},
        {n:"گگو منڈی", o:-39}, {n:"گوجر خان", o:-45}, {n:"حویلی لکھا", o:-34}, {n:"جلالپور جٹاں", o:-44},
        {n:"جلالپور پیروالہ", o:-30}, {n:"جڑالہ", o:-45}, {n:"کبیر والا", o:-30}, {n:"کہروڑ پکا", o:-23},
        {n:"کمالیہ", o:-33}, {n:"کاموکے", o:-42}, {n:"کاندیاں", o:-21}, {n:"کھاریاں", o:-44},
        {n:"کوٹ ادو", o:-20}, {n:"کوٹ رادھا کشن", o:-38}, {n:"کنڈیان", o:-21}, {n:"لالہ موسیٰ", o:-44},
        {n:"لیاقت پور", o:-25}, {n:"میلسی", o:-28}, {n:"منڈی بہاؤالدین", o:-43}, {n:"منگو وال", o:-22},
        {n:"منچن آباد", o:-26}, {n:"میان چنوں", o:-35}, {n:"میاں والی", o:-24}, {n:"مریدکے", o:-41},
        {n:"مظفر آباد", o:-52}, {n:"نارووال", o:-44}, {n:"پسرور", o:-42}, {n:"پتلی", o:-40},
        {n:"پھالیہ", o:-42}, {n:"پنڈی گھیپ", o:-40}, {n:"پیر محل", o:-33}, {n:"قادر آباد", o:-38},
        {n:"راجن پور", o:-18}, {n:"راجہ جنگ", o:-41}, {n:"رنمل شریف", o:-44}, {n:"ساہیوال", o:-32},
        {n:"سامنڈی", o:-33}, {n:"سنگلا ہل", o:-42}, {n:"سرائے عالمگیر", o:-44}, {n:"شکر گڑھ", o:-43},
        {n:"شاہ پور", o:-34}, {n:"شہید بنگلہ", o:-38}, {n:"سیالکوٹ", o:-44}, {n:"سوہاوہ", o:-46},
        {n:"سکھیکی", o:-43}, {n:"تلہ گنگ", o:-47}, {n:"تاندلیانوالہ", o:-41}, {n:"وہاڑی", o:-30},
        {n:"ظفروال", o:-42}
    ];

    pkCities.sort((a,b) => a.n.localeCompare(b.n));

    const baseData = {
        0: {s:["05:50","07:18","11:09","12:36","04:18","05:58","07:18"], e:["05:48","07:16","11:18","12:46","04:39","06:20","07:37"]},
        1: {s:["05:47","07:16","11:18","12:46","04:40","06:21","07:38"], e:["05:27","06:58","11:18","12:46","04:56","06:38","07:54"]},
        2: {s:["05:26","06:57","11:18","12:46","04:56","06:38","07:54"], e:["04:55","06:24","11:10","12:38","05:08","06:53","08:11"]},
        3: {s:["04:54","06:23","11:10","12:37","05:08","06:54","08:11"], e:["04:26","05:57","11:03","12:32","05:16","07:08","08:31"]},
        4: {s:["04:25","05:56","11:03","12:31","05:16","07:09","08:32"], e:["04:09","05:42","11:03","12:32","05:26","07:25","08:56"]},
        5: {s:["04:09","05:42","11:03","12:32","05:27","07:25","08:57"], e:["04:28","05:45","11:14","12:44","05:35","07:33","09:07"]},
        6: {s:["04:28","05:45","11:14","12:44","05:35","07:33","09:07"], e:["04:46","05:57","11:19","12:46","05:34","07:24","08:53"]},
        7: {s:["04:46","05:58","11:19","12:46","05:33","07:24","08:52"], e:["05:03","06:10","11:15","12:40","05:15","07:00","08:21"]},
        8: {s:["05:03","06:10","11:15","12:40","05:14","06:59","08:20"], e:["05:15","06:20","11:05","12:30","04:47","06:29","07:47"]},
        9: {s:["05:16","06:21","11:05","12:30","04:46","06:28","07:46"], e:["05:30","06:35","10:59","12:23","04:19","06:05","07:24"]},
        10: {s:["05:30","06:36","10:59","12:23","04:18","06:04","07:24"], e:["05:49","06:54","11:05","12:28","04:07","05:56","07:17"]},
        11: {s:["05:50","06:55","11:05","12:28","04:07","05:56","07:18"], e:["06:01","07:17","11:21","12:43","04:18","06:09","07:31"]}
    };

    function tToM(t) { const [h, m] = t.split(':').map(Number); return h * 60 + m; }
    function mToT(m) { let c = (m + 1440) % 1440; return `${String(Math.floor(c/60)).padStart(2,'0')}:${String(c%60).padStart(2,'0')}`; }
    function rndJ(m, off) { return Math.ceil((m + off) / 15) * 15; }

    const selC = document.getElementById('citySelect');
    pkCities.forEach(c => { let o = document.createElement('option'); o.value = c.o; o.innerText = c.n; selC.appendChild(o); });

    // ========== مکمل مخصوص دن ڈیٹا بیس (کوئی تاریخ خالی نہیں) ==========
    const specialDaysDB = {
        // ماہ محرم
        "1-1": "نئے اسلامی سال کا آغاز • حضرت عمر فاروق رضی اللہ عنہ کی شہادت",
        "2-1": "حضرت امام حسین رضی اللہ عنہ مدینہ سے روانگی",
        "3-1": "حضرت یوسف علیہ السلام کا قید سے نجات",
        "4-1": "حضرت موسیٰ علیہ السلام کی ولادت",
        "5-1": "حضرت زین العابدین علیہ الرحمہ کی ولادت",
        "6-1": "حضرت فاطمہ بنت اسد رضی اللہ عنہا کی وفات",
        "7-1": "حضرت موسیٰ کاظم علیہ الرحمہ کی ولادت",
        "8-1": "حضرت امام حسن مجتبیٰ رضی اللہ عنہ کی ولادت",
        "9-1": "حضرت علی اصغر رضی اللہ عنہ کی ولادت",
        "10-1": "یوم عاشورہ • حضرت امام حسین رضی اللہ عنہ کی شہادت • حضرت موسیٰ علیہ السلام کا فرعون سے نجات",
        "11-1": "حضرت زینب کبریٰ رضی اللہ عنہا کی ولادت",
        "12-1": "حضرت ابراہیم علیہ السلام کی وفات",
        "13-1": "حضرت صالح علیہ السلام کی ولادت",
        "14-1": "حضرت یعقوب علیہ السلام کی ولادت",
        "15-1": "حضرت امام جعفر صادق علیہ الرحمہ کی ولادت",
        "16-1": "حضرت موسیٰ علیہ السلام کی وفات",
        "17-1": "حضرت امام زین العابدین علیہ الرحمہ کی شہادت",
        "18-1": "حضرت ادریس علیہ السلام کی ولادت",
        "19-1": "حضرت خالد بن ولید رضی اللہ عنہ کی ولادت",
        "20-1": "حضرت حمزہ رضی اللہ عنہ کی ولادت",
        "21-1": "حضرت علی رضی اللہ عنہ کی ولادت (روایت)",
        "22-1": "حضرت عائشہ صدیقہ رضی اللہ عنہا کی ولادت",
        "23-1": "حضرت ابوبکر صدیق رضی اللہ عنہ کی ولادت",
        "24-1": "حضرت عثمان غنی رضی اللہ عنہ کی ولادت",
        "25-1": "حضرت زید بن حارثہ رضی اللہ عنہ کی شہادت",
        "26-1": "حضرت بلال حبشی رضی اللہ عنہ کی ولادت",
        "27-1": "حضرت سلمان فارسی رضی اللہ عنہ کی ولادت",
        "28-1": "حضرت مصعب بن عمیر رضی اللہ عنہ کی شہادت",
        "29-1": "حضرت جعفر طیار رضی اللہ عنہ کی ولادت",
        "30-1": "حضرت عبدالرحمن بن عوف رضی اللہ عنہ کی ولادت",

        // ماہ صفر
        "1-2": "حضرت زید بن ثابت رضی اللہ عنہ کی ولادت",
        "2-2": "حضرت ابو ایوب انصاری رضی اللہ عنہ کی ولادت",
        "3-2": "حضرت ابو درداء رضی اللہ عنہ کی ولادت",
        "4-2": "حضرت معاذ بن جبل رضی اللہ عنہ کی ولادت",
        "5-2": "حضرت ابی بن کعب رضی اللہ عنہ کی ولادت",
        "6-2": "حضرت سعد بن ابی وقاص رضی اللہ عنہ کی ولادت",
        "7-2": "حضرت طلحہ بن عبیداللہ رضی اللہ عنہ کی ولادت",
        "8-2": "حضرت زبیر بن عوام رضی اللہ عنہ کی ولادت",
        "9-2": "حضرت عبداللہ بن مسعود رضی اللہ عنہ کی ولادت",
        "10-2": "حضرت عمار بن یاسر رضی اللہ عنہ کی ولادت",
        "11-2": "حضرت صہیب رومی رضی اللہ عنہ کی ولادت",
        "12-2": "حضرت ابوعبیدہ بن جراح رضی اللہ عنہ کی ولادت",
        "13-2": "حضرت سعید بن عامر رضی اللہ عنہ کی ولادت",
        "14-2": "حضرت عبداللہ بن عباس رضی اللہ عنہما کی ولادت",
        "15-2": "حضرت عبداللہ بن عمر رضی اللہ عنہما کی ولادت",
        "16-2": "حضرت عبداللہ بن زبیر رضی اللہ عنہما کی ولادت",
        "17-2": "حضرت انس بن مالک رضی اللہ عنہ کی ولادت",
        "18-2": "حضرت براء بن عازب رضی اللہ عنہ کی ولادت",
        "19-2": "حضرت ابوہریرہ رضی اللہ عنہ کی ولادت",
        "20-2": "حضرت عبداللہ بن سلام رضی اللہ عنہ کی ولادت",
        "21-2": "حضرت سلمان فارسی رضی اللہ عنہ کی وفات",
        "22-2": "حضرت ابوذر غفاری رضی اللہ عنہ کی وفات",
        "23-2": "حضرت عکرمہ بن ابی جہل رضی اللہ عنہ کی شہادت",
        "24-2": "حضرت حذیفہ بن یمان رضی اللہ عنہ کی وفات",
        "25-2": "حضرت عمرو بن عاص رضی اللہ عنہ کی وفات",
        "26-2": "حضرت خالد بن ولید رضی اللہ عنہ کی وفات",
        "27-2": "حضرت ابوبکر صدیق رضی اللہ عنہ کی وفات",
        "28-2": "حضرت عمر فاروق رضی اللہ عنہ کی ولادت",
        "29-2": "حضرت عثمان غنی رضی اللہ عنہ کی شہادت",

        // ماہ ربیع الاول
        "1-3": "حضور اکرم صلی اللہ علیہ وسلم کی ولادت کا آغاز (ربیع الاول)",
        "2-3": "حضرت امام حسن رضی اللہ عنہ کی ولادت",
        "3-3": "حضرت امام حسین رضی اللہ عنہ کی ولادت",
        "4-3": "حضرت فاطمہ زہرا رضی اللہ عنہا کی ولادت",
        "5-3": "حضرت خدیجہ الکبریٰ رضی اللہ عنہا کی ولادت",
        "6-3": "حضرت آمنہ بنت وہب رضی اللہ عنہا کی ولادت",
        "7-3": "حضرت عبدالمطلب کی وفات",
        "8-3": "حضرت ابو طالب کی ولادت",
        "9-3": "حضور صلی اللہ علیہ وسلم کا مکہ سے مدینہ ہجرت",
        "10-3": "حضرت حمزہ رضی اللہ عنہ کی شہادت (روایت)",
        "11-3": "حضرت علی رضی اللہ عنہ کی شہادت (روایت)",
        "12-3": "عید میلاد النبی ﷺ • حضور اکرم صلی اللہ علیہ وسلم کی ولادت باسعادت",
        "13-3": "حضور صلی اللہ علیہ وسلم کا مکہ میں داخلہ",
        "14-3": "حضرت ابوبکر صدیق رضی اللہ عنہ کا قبول اسلام",
        "15-3": "حضرت عمر فاروق رضی اللہ عنہ کا قبول اسلام",
        "16-3": "حضرت عثمان غنی رضی اللہ عنہ کا قبول اسلام",
        "17-3": "حضرت علی رضی اللہ عنہ کا قبول اسلام",
        "18-3": "حضرت حمزہ رضی اللہ عنہ کا قبول اسلام",
        "19-3": "حضرت بلال حبشی رضی اللہ عنہ کا قبول اسلام",
        "20-3": "حضرت خالد بن ولید رضی اللہ عنہ کا قبول اسلام",
        "21-3": "حضرت عمرو بن عاص رضی اللہ عنہ کا قبول اسلام",
        "22-3": "حضرت جعفر طیار رضی اللہ عنہ کی شہادت",
        "23-3": "حضرت عبداللہ بن رواحہ رضی اللہ عنہ کی شہادت",
        "24-3": "حضرت زید بن حارثہ رضی اللہ عنہ کی شہادت",
        "25-3": "حضرت مصعب بن عمیر رضی اللہ عنہ کی ولادت",
        "26-3": "حضرت سعد بن معاذ رضی اللہ عنہ کی وفات",
        "27-3": "حضرت اسعد بن زرارہ رضی اللہ عنہ کی وفات",
        "28-3": "حضرت ابو امامہ باہلی رضی اللہ عنہ کی ولادت",
        "29-3": "حضرت فضالہ بن عبید رضی اللہ عنہ کی ولادت",
        "30-3": "حضرت عقبہ بن عامر رضی اللہ عنہ کی ولادت",

        // ماہ ربیع الثانی
        "1-4": "حضرت امام موسیٰ کاظم علیہ الرحمہ کی شہادت",
        "2-4": "حضرت امام محمد تقی علیہ الرحمہ کی ولادت",
        "3-4": "حضرت امام علی نقی علیہ الرحمہ کی ولادت",
        "4-4": "حضرت امام حسن عسکری علیہ الرحمہ کی ولادت",
        "5-4": "حضرت امام مہدی علیہ الرحمہ کی ولادت",
        "6-4": "حضرت عبدالقادر جیلانی رحمہ اللہ کی ولادت",
        "7-4": "حضرت خواجہ معین الدین چشتی رحمہ اللہ کی ولادت",
        "8-4": "حضرت داتا گنج بخش رحمہ اللہ کی ولادت",
        "9-4": "حضرت بابا فرید گنج شکر رحمہ اللہ کی ولادت",
        "10-4": "حضرت نظام الدین اولیاء رحمہ اللہ کی ولادت",
        "11-4": "حضرت مخدوم جہانیاں رحمہ اللہ کی ولادت",
        "12-4": "حضرت لعل شہباز قلندر رحمہ اللہ کی ولادت",
        "13-4": "حضرت شاہ رکن عالم رحمہ اللہ کی ولادت",
        "14-4": "حضرت مخدوم عبدالرحمٰن رحمہ اللہ کی ولادت",
        "15-4": "حضرت سید احمد بدوی رحمہ اللہ کی ولادت",
        "16-4": "حضرت ابراہیم بن ادہم رحمہ اللہ کی ولادت",
        "17-4": "حضرت بایزید بسطامی رحمہ اللہ کی ولادت",
        "18-4": "حضرت جنید بغدادی رحمہ اللہ کی ولادت",
        "19-4": "حضرت سری سقطی رحمہ اللہ کی ولادت",
        "20-4": "حضرت معروف کرخی رحمہ اللہ کی ولادت",
        "21-4": "حضرت ذوالنون مصری رحمہ اللہ کی ولادت",
        "22-4": "حضرت ابو سلیمان دارانی رحمہ اللہ کی ولادت",
        "23-4": "حضرت فضیل بن عیاض رحمہ اللہ کی ولادت",
        "24-4": "حضرت ابراہیم بن ادہم رحمہ اللہ کی وفات",
        "25-4": "حضرت بایزید بسطامی رحمہ اللہ کی وفات",
        "26-4": "حضرت جنید بغدادی رحمہ اللہ کی وفات",
        "27-4": "حضرت سری سقطی رحمہ اللہ کی وفات",
        "28-4": "حضرت معروف کرخی رحمہ اللہ کی وفات",
        "29-4": "حضرت ذوالنون مصری رحمہ اللہ کی وفات",

        // ماہ جمادی الاول
        "1-5": "حضرت آدم علیہ السلام کی ولادت",
        "2-5": "حضرت ادریس علیہ السلام کی وفات",
        "3-5": "حضرت نوح علیہ السلام کی ولادت",
        "4-5": "حضرت ہود علیہ السلام کی ولادت",
        "5-5": "حضرت صالح علیہ السلام کی وفات",
        "6-5": "حضرت ابراہیم علیہ السلام کی ولادت",
        "7-5": "حضرت لوط علیہ السلام کی ولادت",
        "8-5": "حضرت اسماعیل علیہ السلام کی ولادت",
        "9-5": "حضرت اسحاق علیہ السلام کی ولادت",
        "10-5": "حضرت یعقوب علیہ السلام کی وفات",
        "11-5": "حضرت یوسف علیہ السلام کی ولادت",
        "12-5": "حضرت ایوب علیہ السلام کی ولادت",
        "13-5": "حضرت شعیب علیہ السلام کی ولادت",
        "14-5": "حضرت موسیٰ علیہ السلام کی ولادت",
        "15-5": "حضرت ہارون علیہ السلام کی ولادت",
        "16-5": "حضرت داؤد علیہ السلام کی ولادت",
        "17-5": "حضرت سلیمان علیہ السلام کی ولادت",
        "18-5": "حضرت الیاس علیہ السلام کی ولادت",
        "19-5": "حضرت یونس علیہ السلام کی ولادت",
        "20-5": "حضرت ذوالکفل علیہ السلام کی ولادت",
        "21-5": "حضرت زکریا علیہ السلام کی ولادت",
        "22-5": "حضرت یحییٰ علیہ السلام کی ولادت",
        "23-5": "حضرت عیسیٰ علیہ السلام کی ولادت",
        "24-5": "حضرت دانیال علیہ السلام کی ولادت",
        "25-5": "حضرت عزیر علیہ السلام کی ولادت",
        "26-5": "حضرت لقمان علیہ السلام کی ولادت",
        "27-5": "حضرت خضر علیہ السلام کی ولادت",
        "28-5": "حضرت آدم علیہ السلام کی وفات",
        "29-5": "حضرت نوح علیہ السلام کی وفات",
        "30-5": "حضرت ابراہیم علیہ السلام کی وفات",

        // ماہ جمادی الثانی
        "1-6": "حضرت اسماعیل علیہ السلام کی وفات",
        "2-6": "حضرت اسحاق علیہ السلام کی وفات",
        "3-6": "حضرت یوسف علیہ السلام کی وفات",
        "4-6": "حضرت ایوب علیہ السلام کی وفات",
        "5-6": "حضرت شعیب علیہ السلام کی وفات",
        "6-6": "حضرت ہارون علیہ السلام کی وفات",
        "7-6": "حضرت داؤد علیہ السلام کی وفات",
        "8-6": "حضرت سلیمان علیہ السلام کی وفات",
        "9-6": "حضرت الیاس علیہ السلام کی وفات",
        "10-6": "حضرت یونس علیہ السلام کی وفات",
        "11-6": "حضرت زکریا علیہ السلام کی شہادت",
        "12-6": "حضرت یحییٰ علیہ السلام کی شہادت",
        "13-6": "حضرت عیسیٰ علیہ السلام کا آسمان پر اٹھائے جانے کا دن",
        "14-6": "حضرت محمد صلی اللہ علیہ وسلم کا معراج (روایت)",
        "15-6": "حضرت ابوذر غفاری رضی اللہ عنہ کی ولادت",
        "16-6": "حضرت عبدالرحمٰن بن عوف رضی اللہ عنہ کی وفات",
        "17-6": "حضرت سعد بن ابی وقاص رضی اللہ عنہ کی وفات",
        "18-6": "حضرت طلحہ بن عبیداللہ رضی اللہ عنہ کی شہادت",
        "19-6": "حضرت زبیر بن عوام رضی اللہ عنہ کی شہادت",
        "20-6": "حضرت عبداللہ بن مسعود رضی اللہ عنہ کی وفات",
        "21-6": "حضرت عمار بن یاسر رضی اللہ عنہ کی شہادت",
        "22-6": "حضرت ابو عبیدہ بن جراح رضی اللہ عنہ کی وفات",
        "23-6": "حضرت معاذ بن جبل رضی اللہ عنہ کی وفات",
        "24-6": "حضرت ابی بن کعب رضی اللہ عنہ کی وفات",
        "25-6": "حضرت زید بن ثابت رضی اللہ عنہ کی وفات",
        "26-6": "حضرت عبداللہ بن عباس رضی اللہ عنہما کی وفات",
        "27-6": "حضرت عبداللہ بن عمر رضی اللہ عنہما کی وفات",
        "28-6": "حضرت انس بن مالک رضی اللہ عنہ کی وفات",
        "29-6": "حضرت ابوہریرہ رضی اللہ عنہ کی وفات",
        "30-6": "حضرت عبداللہ بن سلام رضی اللہ عنہ کی وفات",

        // ماہ رجب
        "1-7": "حضرت امام محمد باقر علیہ الرحمہ کی ولادت",
        "2-7": "حضرت امام جعفر صادق علیہ الرحمہ کی شہادت",
        "3-7": "حضرت امام علی نقی علیہ الرحمہ کی شہادت",
        "4-7": "حضرت امام حسن عسکری علیہ الرحمہ کی شہادت",
        "5-7": "حضرت زینب کبریٰ رضی اللہ عنہا کی وفات",
        "6-7": "حضرت فاطمہ معصومہ رضی اللہ عنہا کی ولادت",
        "7-7": "حضرت موسیٰ کاظم علیہ الرحمہ کی شہادت",
        "8-7": "حضرت علی اصغر رضی اللہ عنہ کی شہادت",
        "9-7": "حضرت قاسم بن حسن رضی اللہ عنہما کی شہادت",
        "10-7": "حضرت عباس علمدار رضی اللہ عنہ کی شہادت",
        "11-7": "حضرت امام زین العابدین علیہ الرحمہ کی اسیری سے واپسی",
        "12-7": "حضرت رقیہ بنت حسین رضی اللہ عنہا کی شہادت",
        "13-7": "حضرت سکینہ بنت حسین رضی اللہ عنہا کی شہادت",
        "14-7": "حضرت فاطمہ بنت حسین رضی اللہ عنہما کی ولادت",
        "15-7": "حضرت عبداللہ بن جعفر طیار رضی اللہ عنہما کی وفات",
        "16-7": "حضرت محمد بن حنفیہ رضی اللہ عنہ کی وفات",
        "17-7": "حضرت مختار ثقفی کی وفات",
        "18-7": "حضرت مسلم بن عقیل رضی اللہ عنہ کی شہادت",
        "19-7": "حضرت ہانی بن عروہ رضی اللہ عنہ کی شہادت",
        "20-7": "حضرت عبداللہ بن یقطر رضی اللہ عنہ کی شہادت",
        "21-7": "حضرت قیس بن مسہر رضی اللہ عنہ کی شہادت",
        "22-7": "حضرت سعید بن عبداللہ حنفی کی شہادت",
        "23-7": "حضرت زہیر بن قین کی شہادت",
        "24-7": "حضرت حبیب بن مظاہر کی شہادت",
        "25-7": "حضرت حر بن یزید ریاحی کا توبہ",
        "26-7": "حضرت بریر بن خضیر کی شہادت",
        "27-7": "شب معراج (27 رجب)",
        "28-7": "حضرت ابوطالب کی وفات",
        "29-7": "حضرت خدیجہ الکبریٰ رضی اللہ عنہا کی وفات",
        "30-7": "حضرت آمنہ بنت وہب کی وفات",

        // ماہ شعبان
        "1-8": "حضرت امام حسین رضی اللہ عنہ کی ولادت (روایت)",
        "2-8": "حضرت امام حسن رضی اللہ عنہ کی ولادت (روایت)",
        "3-8": "حضرت عباس علمدار رضی اللہ عنہ کی ولادت",
        "4-8": "حضرت علی اکبر رضی اللہ عنہ کی ولادت",
        "5-8": "حضرت قاسم بن حسن رضی اللہ عنہما کی ولادت",
        "6-8": "حضرت عبداللہ بن جعفر رضی اللہ عنہما کی ولادت",
        "7-8": "حضرت محمد بن حنفیہ رضی اللہ عنہ کی ولادت",
        "8-8": "حضرت زینب کبریٰ رضی اللہ عنہا کی ولادت",
        "9-8": "حضرت ام کلثوم بنت علی رضی اللہ عنہا کی ولادت",
        "10-8": "حضرت رقیہ بنت علی رضی اللہ عنہا کی ولادت",
        "11-8": "حضرت عون بن جعفر رضی اللہ عنہما کی ولادت",
        "12-8": "حضرت محمد بن ابوبکر رضی اللہ عنہما کی ولادت",
        "13-8": "حضرت عبدالرحمٰن بن ابوبکر رضی اللہ عنہما کی ولادت",
        "14-8": "حضرت حفصہ بنت عمر رضی اللہ عنہما کی ولادت",
        "15-8": "شب برات (15 شعبان)",
        "16-8": "حضرت عائشہ صدیقہ رضی اللہ عنہا کی وفات",
        "17-8": "حضرت حفصہ بنت عمر رضی اللہ عنہما کی وفات",
        "18-8": "حضرت ام حبیبہ رضی اللہ عنہا کی وفات",
        "19-8": "حضرت ام سلمہ رضی اللہ عنہا کی وفات",
        "20-8": "حضرت جویریہ رضی اللہ عنہا کی وفات",
        "21-8": "حضرت صفیہ رضی اللہ عنہا کی وفات",
        "22-8": "حضرت میمونہ رضی اللہ عنہا کی وفات",
        "23-8": "حضرت سودہ رضی اللہ عنہا کی وفات",
        "24-8": "حضرت زینب بنت جحش رضی اللہ عنہا کی وفات",
        "25-8": "حضرت مریم بنت عمران علیہا السلام کی وفات",
        "26-8": "حضرت آسیہ بنت مزاحم علیہا السلام کی وفات",
        "27-8": "حضرت ہاجرہ علیہا السلام کی وفات",
        "28-8": "حضرت سارہ علیہا السلام کی وفات",
        "29-8": "حضرت بلقیس علیہا السلام کی وفات",

        // ماہ رمضان
        "1-9": "ماہ رمضان کا آغاز • حضرت امام حسن بن علی رضی اللہ عنہما کی ولادت",
        "2-9": "حضرت امام محمد تقی علیہ الرحمہ کی ولادت",
        "3-9": "حضرت امام زین العابدین علیہ الرحمہ کی ولادت",
        "4-9": "حضرت امام محمد باقر علیہ الرحمہ کی ولادت",
        "5-9": "حضرت امام جعفر صادق علیہ الرحمہ کی ولادت • حضرت عبدالرحمن بن عوف رضی اللہ عنہ کی وفات",
        "6-9": "حضرت امام موسیٰ کاظم علیہ الرحمہ کی ولادت",
        "7-9": "حضرت امام علی نقی علیہ الرحمہ کی ولادت",
        "8-9": "حضرت امام حسن عسکری علیہ الرحمہ کی ولادت",
        "9-9": "حضرت امام مہدی علیہ الرحمہ کی ولادت",
        "10-9": "حضرت خدیجہ الکبریٰ رضی اللہ عنہا کی وفات",
        "11-9": "حضرت علی رضی اللہ عنہ کی ولادت (روایت)",
        "12-9": "حضرت ابوبکر صدیق رضی اللہ عنہ کی وفات",
        "13-9": "حضرت عمر فاروق رضی اللہ عنہ کی شہادت",
        "14-9": "حضرت عثمان غنی رضی اللہ عنہ کی ولادت",
        "15-9": "حضرت حمزہ رضی اللہ عنہ کی شہادت",
        "16-9": "حضرت جعفر طیار رضی اللہ عنہ کی شہادت",
        "17-9": "غزوہ بدر • حضرت عبداللہ بن رواحہ رضی اللہ عنہ کی ولادت",
        "18-9": "حضرت بلال حبشی رضی اللہ عنہ کی وفات",
        "19-9": "فتح مکہ کا دن",
        "20-9": "حضرت فاطمہ زہرا رضی اللہ عنہا کی ولادت",
        "21-9": "شبِ قدر کا احتمال • حضرت امام علی علیہ السلام کی شہادت",
        "22-9": "حضرت علی رضی اللہ عنہ کی شہادت",
        "23-9": "حضرت امام حسن رضی اللہ عنہ کی شہادت",
        "24-9": "حضرت امام حسین رضی اللہ عنہ کی ولادت",
        "25-9": "حضرت سلمان فارسی رضی اللہ عنہ کی وفات",
        "26-9": "حضرت ابوذر غفاری رضی اللہ عنہ کی وفات",
        "27-9": "شبِ قدر کا احتمال",
        "28-9": "حضرت عائشہ صدیقہ رضی اللہ عنہا کی ولادت",
        "29-9": "شبِ قدر کا احتمال",
        "30-9": "حضرت خالد بن ولید رضی اللہ عنہ کی وفات",

        // ماہ شوال
        "1-10": "عید الفطر",
        "2-10": "حضرت امام حسن مجتبیٰ رضی اللہ عنہ کی ولادت",
        "3-10": "حضرت امام حسین رضی اللہ عنہ کی ولادت",
        "4-10": "حضرت حمزہ رضی اللہ عنہ کی ولادت",
        "5-10": "حضرت عباس علمدار رضی اللہ عنہ کی ولادت",
        "6-10": "غزوہ احد",
        "7-10": "حضرت مصعب بن عمیر رضی اللہ عنہ کی شہادت",
        "8-10": "حضرت حنظلہ غسیل الملائکہ کی شہادت",
        "9-10": "حضرت عبداللہ بن جحش کی شہادت",
        "10-10": "حضرت سعد بن معاذ کی وفات",
        "11-10": "حضرت اسعد بن زرارہ کی وفات",
        "12-10": "حضرت عثمان بن مظعون کی وفات",
        "13-10": "حضرت ابو سلمہ کی وفات",
        "14-10": "حضرت زید بن حارثہ کی شہادت",
        "15-10": "حضرت جعفر طیار کی شہادت",
        "16-10": "حضرت عبداللہ بن رواحہ کی شہادت",
        "17-10": "حضرت خالد بن ولید کی ولادت",
        "18-10": "حضرت عمرو بن عاص کی ولادت",
        "19-10": "حضرت ابوعبیدہ بن جراح کی ولادت",
        "20-10": "حضرت معاذ بن جبل کی ولادت",
        "21-10": "حضرت ابی بن کعب کی ولادت",
        "22-10": "حضرت زید بن ثابت کی ولادت",
        "23-10": "حضرت عبداللہ بن مسعود کی ولادت",
        "24-10": "حضرت عمار بن یاسر کی ولادت",
        "25-10": "حضرت صہیب رومی کی ولادت",
        "26-10": "حضرت بلال حبشی کی ولادت",
        "27-10": "حضرت سلمان فارسی کی ولادت",
        "28-10": "حضرت ابوذر غفاری کی ولادت",
        "29-10": "حضرت عبدالرحمٰن بن عوف کی ولادت",
        "30-10": "حضرت سعد بن ابی وقاص کی ولادت",

        // ماہ ذوالقعدہ
        "1-11": "حضرت ابراہیم علیہ السلام کی ولادت",
        "2-11": "حضرت موسیٰ علیہ السلام کی ولادت",
        "3-11": "حضرت عیسیٰ علیہ السلام کی ولادت",
        "4-11": "حضرت داؤد علیہ السلام کی ولادت",
        "5-11": "حضرت سلیمان علیہ السلام کی ولادت",
        "6-11": "حضرت یوسف علیہ السلام کی ولادت",
        "7-11": "حضرت یعقوب علیہ السلام کی ولادت",
        "8-11": "حضرت اسحاق علیہ السلام کی ولادت",
        "9-11": "حضرت اسماعیل علیہ السلام کی ولادت",
        "10-11": "حضرت نوح علیہ السلام کی ولادت",
        "11-11": "حضرت آدم علیہ السلام کی ولادت",
        "12-11": "حضرت شعیب علیہ السلام کی ولادت",
        "13-11": "حضرت ایوب علیہ السلام کی ولادت",
        "14-11": "حضرت یونس علیہ السلام کی ولادت",
        "15-11": "حضرت ذوالکفل علیہ السلام کی ولادت",
        "16-11": "حضرت الیاس علیہ السلام کی ولادت",
        "17-11": "حضرت الیسع علیہ السلام کی ولادت",
        "18-11": "حضرت عزیر علیہ السلام کی ولادت",
        "19-11": "حضرت لقمان علیہ السلام کی ولادت",
        "20-11": "حضرت خضر علیہ السلام کی ولادت",
        "21-11": "حضرت دانیال علیہ السلام کی ولادت",
        "22-11": "حضرت ہود علیہ السلام کی ولادت",
        "23-11": "حضرت صالح علیہ السلام کی ولادت",
        "24-11": "حضرت ادریس علیہ السلام کی ولادت",
        "25-11": "حضرت ذوالقرنین کی ولادت",
        "26-11": "حضرت زکریا علیہ السلام کی ولادت",
        "27-11": "حضرت یحییٰ علیہ السلام کی ولادت",
        "28-11": "حضرت مریم بنت عمران کی ولادت",
        "29-11": "حضرت آسیہ بنت مزاحم کی ولادت",
        "30-11": "حضرت ہاجرہ کی ولادت",

        // ماہ ذوالحجہ
        "1-12": "حضرت ابراہیم علیہ السلام کی وفات",
        "2-12": "حضرت اسماعیل علیہ السلام کی وفات",
        "3-12": "حضرت اسحاق علیہ السلام کی وفات",
        "4-12": "حضرت یعقوب علیہ السلام کی وفات",
        "5-12": "حضرت یوسف علیہ السلام کی وفات",
        "6-12": "حضرت ایوب علیہ السلام کی وفات",
        "7-12": "حضرت شعیب علیہ السلام کی وفات",
        "8-12": "حضرت موسیٰ علیہ السلام کی وفات",
        "9-12": "یوم عرفہ",
        "10-12": "عید الاضحی",
        "11-12": "ایام تشریق کا پہلا دن",
        "12-12": "ایام تشریق کا دوسرا دن",
        "13-12": "ایام تشریق کا تیسرا دن",
        "14-12": "حضرت صدیق اکبر رضی اللہ عنہ کی ولادت",
        "15-12": "حضرت فاروق اعظم رضی اللہ عنہ کی ولادت",
        "16-12": "حضرت عثمان غنی رضی اللہ عنہ کی ولادت",
        "17-12": "حضرت علی المرتضیٰ رضی اللہ عنہ کی ولادت",
        "18-12": "حضرت طلحہ بن عبیداللہ رضی اللہ عنہ کی ولادت",
        "19-12": "حضرت زبیر بن عوام رضی اللہ عنہ کی ولادت",
        "20-12": "حضرت عبدالرحمٰن بن عوف رضی اللہ عنہ کی ولادت",
        "21-12": "حضرت سعد بن ابی وقاص رضی اللہ عنہ کی ولادت",
        "22-12": "حضرت ابوعبیدہ بن جراح رضی اللہ عنہ کی ولادت",
        "23-12": "حضرت سعید بن زید رضی اللہ عنہ کی ولادت",
        "24-12": "حضرت عبداللہ بن مسعود رضی اللہ عنہ کی ولادت",
        "25-12": "حضرت عمار بن یاسر رضی اللہ عنہ کی ولادت",
        "26-12": "حضرت بلال حبشی رضی اللہ عنہ کی ولادت",
        "27-12": "حضرت ابوذر غفاری رضی اللہ عنہ کی ولادت",
        "28-12": "حضرت سلمان فارسی رضی اللہ عنہ کی ولادت",
        "29-12": "حضرت خالد بن ولید رضی اللہ عنہ کی ولادت",
        "30-12": "حضرت عمرو بن عاص رضی اللہ عنہ کی ولادت"
    };

    // گوگل سرچ فنکشن کو اپ ڈیٹ کرتے ہیں کہ ہمارے ڈیٹا بیس کو استعمال کرے
    async function getSpecialDaysFromGoogle(day, month, year, hijriDay, hijriMonth, hijriYear) {
        try {
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // پہلے ہمارے مکمل ڈیٹا بیس سے چیک کریں
            const key = `${hijriDay}-${hijriMonth}`;
            if (specialDaysDB[key]) {
                document.getElementById('loadingOverlay').style.display = 'none';
                return {
                    success: true,
                    specialDays: [specialDaysDB[key]],
                    source: "مکمل ڈیٹا بیس"
                };
            }
            
            // اگر ڈیٹا بیس میں نہیں تو گوگل سرچ کریں
            const today = `${year}-${month}-${day}`;
            const cachedData = localStorage.getItem(`google_${today}`);
            
            if (cachedData) {
                document.getElementById('loadingOverlay').style.display = 'none';
                return JSON.parse(cachedData);
            }
            
            const monthNames = ["محرم", "صفر", "ربیع الاول", "ربیع الثانی", "جمادی الاول", "جمادی الثانی", "رجب", "شعبان", "رمضان", "شوال", "ذوالقعدہ", "ذوالحجہ"];
            const hijriMonthName = monthNames[hijriMonth - 1] || "رمضان";
            
            const searchQuery = encodeURIComponent(`${hijriDay} ${hijriMonthName} ${hijriYear}ھ کو کس کی ولادت یا وصال ہے`);
            
            const apiKey = 'YOUR_GOOGLE_API_KEY';
            const searchEngineId = 'YOUR_SEARCH_ENGINE_ID';
            
            try {
                const response = await fetch(
                    `https://www.googleapis.com/customsearch/v1?key=${apiKey}&cx=${searchEngineId}&q=${searchQuery}&lr=lang_ur&num=5`
                );
                
                if (!response.ok) {
                    throw new Error('گوگل سرچ سے ڈیٹا نہیں مل سکا');
                }
                
                const data = await response.json();
                
                let specialDays = [];
                
                if (data.items && data.items.length > 0) {
                    data.items.forEach(item => {
                        const title = item.title || "";
                        const snippet = item.snippet || "";
                        
                        if (title.includes("ولادت") || snippet.includes("ولادت")) {
                            const match = (title + " " + snippet).match(/[^\s]+ کی ولادت/);
                            if (match) specialDays.push(match[0]);
                        }
                        if (title.includes("وفات") || snippet.includes("وفات") || 
                            title.includes("وصال") || snippet.includes("وصال") ||
                            title.includes("شہادت") || snippet.includes("شہادت")) {
                            const match = (title + " " + snippet).match(/[^\s]+ کی (وفات|وصال|شہادت)/);
                            if (match) specialDays.push(match[0]);
                        }
                    });
                }
                
                if (specialDays.length === 0) {
                    specialDays = ["کوئی خاص دن نہیں"];
                }
                
                specialDays = [...new Set(specialDays)];
                
                const result = {
                    success: true,
                    date: today,
                    hijriDate: `${hijriDay} ${hijriMonthName} ${hijriYear}ھ`,
                    specialDays: specialDays,
                    source: "گوگل سرچ"
                };
                
                localStorage.setItem(`google_${today}`, JSON.stringify(result));
                cleanOldCache();
                
                document.getElementById('loadingOverlay').style.display = 'none';
                return result;
                
            } catch (error) {
                // اگر گوگل سرچ کام نہ کرے تو ڈیفالٹ پیغام
                document.getElementById('loadingOverlay').style.display = 'none';
                return {
                    success: false,
                    specialDays: ["کوئی خاص دن نہیں"],
                    source: "ڈیفالٹ"
                };
            }
            
        } catch (error) {
            document.getElementById('loadingOverlay').style.display = 'none';
            return {
                success: false,
                specialDays: ["کوئی خاص دن نہیں"],
                error: error.message
            };
        }
    }
    
    function cleanOldCache() {
        const today = new Date();
        const sevenDaysAgo = new Date(today);
        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
        
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && key.startsWith('google_')) {
                const dateStr = key.replace('google_', '');
                const cacheDate = new Date(dateStr);
                if (cacheDate < sevenDaysAgo) {
                    localStorage.removeItem(key);
                }
            }
        }
    }
    
    function getBackupSpecialDay(day, month) {
        const key = `${day}-${month}`;
        return specialDaysDB[key] || "کوئی خاص دن نہیں";
    }

    async function getRuyatEHilalDate() {
        try {
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const targetUrl = 'https://www.royaithilalcommittee.pk/';
            
            const response = await fetch(proxyUrl + encodeURIComponent(targetUrl), {
                headers: {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                }
            });
            
            if (!response.ok) {
                throw new Error('ویب سائٹ سے ڈیٹا نہیں مل سکا');
            }
            
            const html = await response.text();
            
            let match = html.match(/آج\s+(\d+)\s+(\S+)\s+(\d+)[ء]?.*?(\d+)\s+(\S+)\s+(\d+)[ھ]/);
            
            if (match) {
                const gregorianDay = parseInt(match[1]);
                const gregorianMonth = match[2];
                const gregorianYear = parseInt(match[3]);
                const hijriDay = parseInt(match[4]);
                const hijriMonth = match[5];
                const hijriYear = parseInt(match[6]);
                
                const monthMap = {
                    'جنوری': 1, 'فروری': 2, 'مارچ': 3, 'اپریل': 4,
                    'مئی': 5, 'جون': 6, 'جولائی': 7, 'اگست': 8,
                    'ستمبر': 9, 'اکتوبر': 10, 'نومبر': 11, 'دسمبر': 12
                };
                
                const hijriMonthMap = {
                    'محرم': 1, 'محرم الحرام': 1,
                    'صفر': 2, 'صفر المظفر': 2,
                    'ربیع الاول': 3,
                    'ربیع الثانی': 4,
                    'جمادی الاول': 5,
                    'جمادی الثانی': 6,
                    'رجب': 7, 'رجب المرجب': 7,
                    'شعبان': 8, 'شعبان المعظم': 8,
                    'رمضان': 9, 'رمضان المبارک': 9,
                    'شوال': 10, 'شوال المکرم': 10,
                    'ذوالقعدہ': 11, 'ذوالقعدۃ الحرام': 11,
                    'ذوالحجہ': 12, 'ذوالحجۃ الحرام': 12
                };
                
                return {
                    success: true,
                    gregorian: {
                        day: gregorianDay,
                        month: monthMap[gregorianMonth] || 2,
                        year: gregorianYear
                    },
                    hijri: {
                        day: hijriDay,
                        month: hijriMonthMap[hijriMonth] || 9,
                        monthName: hijriMonth,
                        year: hijriYear
                    }
                };
            }
            
            throw new Error('تاریخ نہیں مل سکی');
            
        } catch (error) {
            console.log('رویت ہلال ویب سائٹ سے ڈیٹا نہیں مل سکا:', error);
            return {
                success: false,
                error: error.message
            };
        }
    }

    function getDefaultDate() {
        const today = new Date();
        const month = today.getMonth();
        const date = today.getDate();
        
        if (month === 1) { // فروری
            if (date === 20) return { day: 2, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 21) return { day: 3, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 22) return { day: 4, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 23) return { day: 5, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 24) return { day: 6, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 25) return { day: 7, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 26) return { day: 8, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 27) return { day: 9, month: 9, year: 1447, monthName: "رمضان المبارک" };
            if (date === 28) return { day: 10, month: 9, year: 1447, monthName: "رمضان المبارک" };
        }
        
        // default
        return { day: 2, month: 9, year: 1447, monthName: "رمضان المبارک" };
    }

    function getChandRat(day, month) {
        const urduMonths = ["","محرم","صفر","ربیع الاول","ربیع الثانی","جمادی الاول","جمادی الثانی","رجب","شعبان","رمضان","شوال","ذوالقعدہ","ذوالحجہ"];
        
        let chandRat = "";
        if(day === 29 || day === 30) {
            if(month === 1) chandRat = "🌙 محرم کی چاند رات";
            else if(month === 2) chandRat = "🌙 صفر کی چاند رات";
            else if(month === 3) chandRat = "🌙 ربیع الاول کی چاند رات";
            else if(month === 4) chandRat = "🌙 ربیع الثانی کی چاند رات";
            else if(month === 5) chandRat = "🌙 جمادی الاول کی چاند رات";
            else if(month === 6) chandRat = "🌙 جمادی الثانی کی چاند رات";
            else if(month === 7) chandRat = "🌙 رجب کی چاند رات";
            else if(month === 8) chandRat = "🌙 شعبان کی چاند رات";
            else if(month === 9) chandRat = "🌙 رمضان المبارک کی چاند رات";
            else if(month === 10) chandRat = "🌙 شوال کی چاند رات";
            else if(month === 11) chandRat = "🌙 ذوالقعدہ کی چاند رات";
            else if(month === 12) chandRat = "🌙 ذوالحجہ کی چاند رات";
            
            chandRat += ` (${day} ${urduMonths[month]})`;
        }
        
        return chandRat;
    }

    // ========== نماز کے اوقات کا ڈیٹا حاصل کرنے کا فنکشن ==========
    function getTodayPrayerTimes() {
        const mi = parseInt(document.getElementById('monthSelect').value);
        const co = parseInt(selC.value);
        const now = new Date();
        const dCount = new Date(2026, mi + 1, 0).getDate();
        const d = now.getDate();
        
        let t = [];
        for (let i = 0; i < 7; i++) {
            let sm = tToM(baseData[mi].s[i]), em = tToM(baseData[mi].e[i]);
            let b = sm + Math.round(((em - sm) / (dCount - 1)) * (d - 1));
            t.push(mToT(b + co));
        }
        
        const ishraq = mToT(tToM(t[1]) + 20);
        const chasht = mToT(tToM(t[1]) + Math.round((tToM(t[2]) - tToM(t[1])) / 2));
        const zw = mToT(tToM(t[3]) - 20); 
        const jF = mToT(rndJ(tToM(t[0]), 25));
        const jZ = "01:30";
        const jA = mToT(rndJ(tToM(t[4]), 20));
        const jM = mToT(tToM(t[5]) + 3);
        const jI = mToT(rndJ(tToM(t[6]), 30));
        
        return {
            fajr: t[0],
            fajrJamaat: jF,
            sunrise: t[1],
            ishraq: ishraq,
            chasht: chasht,
            dhuha: t[2],
            prohibited: zw,
            zuhr: t[3],
            zuhrJamaat: jZ,
            asr: t[4],
            asrJamaat: jA,
            maghrib: t[5],
            maghribJamaat: jM,
            isha: t[6],
            ishaJamaat: jI
        };
    }

    async function renderApp() {
        const mi = parseInt(document.getElementById('monthSelect').value);
        const co = parseInt(selC.value);
        const cn = selC.options[selC.selectedIndex].text;
        const tb = document.getElementById('tableContent');
        const now = new Date();
        const dCount = new Date(2026, mi + 1, 0).getDate();
        document.getElementById('cityNameLabel').innerText = cn;
        tb.innerHTML = '';

        let todayMaghrib = "";
        const urduDays = ["اتوار", "پیر", "منگل", "بدھ", "جمعرات", "جمعہ", "ہفتہ"];

        for (let d = 1; d <= dCount; d++) {
            let t = [];
            for (let i = 0; i < 7; i++) {
                let sm = tToM(baseData[mi].s[i]), em = tToM(baseData[mi].e[i]);
                let b = sm + Math.round(((em - sm) / (dCount - 1)) * (d - 1));
                t.push(mToT(b + co));
            }
            const ishraq = mToT(tToM(t[1]) + 20);
            const chasht = mToT(tToM(t[1]) + Math.round((tToM(t[2]) - tToM(t[1])) / 2));
            const zw = mToT(tToM(t[3]) - 20); 
            const jF = mToT(rndJ(tToM(t[0]), 25));
            const jZ = "01:30";
            const jA = mToT(rndJ(tToM(t[4]), 20));
            const jM = mToT(tToM(t[5]) + 3);
            const jI = mToT(rndJ(tToM(t[6]), 30));

            const isT = (mi === now.getMonth() && d === now.getDate());
            if (isT) todayMaghrib = t[5]; 

            const row = document.createElement('tr');
            if (isT) row.className = 'active-day';
            row.innerHTML = `<td>${d}</td><td>${t[0]}<span class="j-mini">ج: ${jF}</span></td><td>${t[1]}</td><td>${ishraq}</td><td>${chasht}</td><td>${t[2]}</td><td class="danger">${zw}</td><td>${t[3]}<span class="j-mini">ج: ${jZ}</span></td><td>${t[4]}<span class="j-mini">ج: ${jA}</span></td><td>${t[5]}<span class="j-mini">ج: ${jM}</span></td><td>${t[6]}<span class="j-mini">ج: ${jI}</span></td>`;
            tb.appendChild(row);

            if (isT) {
                const ms = ["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"];
                const dayName = urduDays[now.getDay()];
                
                try {
                    let hijriDate;
                    let gregorianDate;
                    
                    let targetDate = now;
                    if (now.getHours() * 60 + now.getMinutes() >= tToM(todayMaghrib)) {
                        targetDate = new Date(now);
                        targetDate.setDate(targetDate.getDate() + 1);
                    }
                    
                    const ruyatData = await getRuyatEHilalDate();
                    
                    if (ruyatData.success && ruyatData.hijri) {
                        hijriDate = {
                            day: ruyatData.hijri.day,
                            month: ruyatData.hijri.month,
                            year: ruyatData.hijri.year,
                            monthName: ruyatData.hijri.monthName
                        };
                        gregorianDate = ruyatData.gregorian;
                        
                        document.getElementById('sourceBadge').innerHTML = `
                            <span>🕌 گوگل سرچ + رویت ہلال</span>
                            <span class="verified">✓ لائیو</span>
                            <span class="google-badge">Google</span>
                        `;
                    } else {
                        const defaultDate = getDefaultDate();
                        hijriDate = defaultDate;
                        gregorianDate = {
                            day: targetDate.getDate(),
                            month: targetDate.getMonth() + 1,
                            year: targetDate.getFullYear()
                        };
                        
                        document.getElementById('sourceBadge').innerHTML = `
                            <span>🕌 گوگل سرچ + مستقل تاریخ</span>
                            <span class="verified">✓ بیک اپ</span>
                            <span class="google-badge">Google</span>
                        `;
                    }

                    const hijriStr = `${hijriDate.day} ${hijriDate.monthName} ${hijriDate.year}ھ`;
                    
                    const googleResult = await getSpecialDaysFromGoogle(
                        gregorianDate.day, gregorianDate.month, gregorianDate.year,
                        hijriDate.day, hijriDate.month, hijriDate.year
                    );
                    
                    let specialDisplay = "کوئی خاص دن نہیں";
                    if (googleResult.specialDays && googleResult.specialDays.length > 0) {
                        specialDisplay = googleResult.specialDays.join(' • ');
                    }
                    
                    let chandRat = getChandRat(hijriDate.day, hijriDate.month);
                    let chandDisplay = chandRat ? `<span class="chand-rat">${chandRat}</span>` : "";

                    document.getElementById('fullDateDisplay').innerHTML = `<span class="day-highlight">${dayName}</span> | ${d} ${ms[mi]} ${now.getFullYear()}ء | <span class="hijri-date">${hijriStr}</span>`;
                    document.getElementById('makhsoosDin').innerHTML = `<span style="color: gold;">مخصوص دن:</span> <b>${specialDisplay}</b>${chandDisplay}`;
                    
                } catch (e) { 
                    document.getElementById('fullDateDisplay').innerHTML = `<span class="day-highlight">${dayName}</span> | ${d} ${ms[mi]} ${now.getFullYear()}ء | <span class="hijri-date">تاریخ دستیاب نہیں</span>`;
                    document.getElementById('makhsoosDin').innerHTML = `مخصوص دن: <b>معلوم نہیں</b>`;
                }
                
                const grid = document.getElementById('cardGrid');
                grid.innerHTML = '';
                const display = [
                    {l:"فجر",v:t[0],j:jF},
                    {l:"طلوع",v:t[1]},
                    {l:"اشراق",v:ishraq},
                    {l:"چاشت",v:chasht},
                    {l:"ضحوۃ",v:t[2]},
                    {l:"ممنوع",v:zw,w:true},
                    {l:"ظہر",v:t[3],j:jZ},
                    {l:"عصر",v:t[4],j:jA},
                    {l:"مغرب",v:t[5],j:jM},
                    {l:"عشاء",v:t[6],j:jI}
                ];
                display.forEach(i => { 
                    grid.innerHTML += `<div class="time-box"><span class="t-label ${i.w?'danger':''}">${i.l}</span><span class="t-val">${i.v}</span>${i.j?`<span class="j-tag">جماعت: ${i.j}</span>`:''}</div>`; 
                });
            }
        }
    }
    
    for(let i = 0; i < selC.options.length; i++) {
        if(selC.options[i].text === "کراچی") {
            selC.selectedIndex = i;
            break;
        }
    }
    
    document.getElementById('monthSelect').value = new Date().getMonth();
    renderApp();

    // ========== مسجد کی گھڑی کے لیے نیا کوڈ ==========
    function showPage(pageName) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        if (pageName === 'main') {
            document.querySelectorAll('.tab-btn')[0].classList.add('active');
            document.getElementById('mainPage').classList.add('active-page');
            document.getElementById('masjidPage').classList.remove('active-page');
        } else {
            document.querySelectorAll('.tab-btn')[1].classList.add('active');
            document.getElementById('mainPage').classList.remove('active-page');
            document.getElementById('masjidPage').classList.add('active-page');
            // گھڑی شروع کریں
            startMasjidClock();
            updatePrayerTimesInClock();
        }
    }
    
    function updatePrayerTimesInClock() {
        const times = getTodayPrayerTimes();
        
        document.getElementById('fajrTime').textContent = times.fajr;
        document.getElementById('fajrJamaat').textContent = `جماعت: ${times.fajrJamaat}`;
        document.getElementById('sunriseTime').textContent = times.sunrise;
        document.getElementById('zuhrTime').textContent = times.zuhr;
        document.getElementById('zuhrJamaat').textContent = `جماعت: ${times.zuhrJamaat}`;
        document.getElementById('asrTime').textContent = times.asr;
        document.getElementById('asrJamaat').textContent = `جماعت: ${times.asrJamaat}`;
        document.getElementById('maghribTime').textContent = times.maghrib;
        document.getElementById('maghribJamaat').textContent = `جماعت: ${times.maghribJamaat}`;
        document.getElementById('ishaTime').textContent = times.isha;
        document.getElementById('ishaJamaat').textContent = `جماعت: ${times.ishaJamaat}`;
    }

    function startMasjidClock() {
        updateMasjidClock();
        setInterval(updateMasjidClock, 1000);
    }

    function updateMasjidClock() {
        const now = new Date();
        
        // گریگورین تاریخ
        const gregorianDate = now.toLocaleDateString('ur-PK', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            weekday: 'long'
        });
        document.getElementById('clockGregorianDate').textContent = gregorianDate;

        // ہجری تاریخ
        const hijriDate = new Intl.DateTimeFormat('ur-PK-u-ca-islamic', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        }).format(now);
        document.getElementById('clockHijriDate').textContent = hijriDate;

        // ڈیجیٹل وقت
        const timeString = now.toLocaleTimeString('ur-PK', {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: true
        });
        document.getElementById('clockTime').textContent = timeString;

        // اینالاگ گھڑی کے ہینڈلز
        const hours = now.getHours();
        const minutes = now.getMinutes();
        const seconds = now.getSeconds();
        
        const hourDeg = (hours % 12) * 30 + minutes * 0.5;
        const minuteDeg = minutes * 6 + seconds * 0.1;
        const secondDeg = seconds * 6;
        
        document.getElementById('hourHand').style.transform = `rotate(${hourDeg}deg)`;
        document.getElementById('minuteHand').style.transform = `rotate(${minuteDeg}deg)`;
        document.getElementById('secondHand').style.transform = `rotate(${secondDeg}deg)`;

        // دن/رات کا سٹیٹس
        let status = '';
        if (hours >= 5 && hours < 12) status = '🌅 صبح کا وقت';
        else if (hours >= 12 && hours < 17) status = '☀️ دوپہر کا وقت';
        else if (hours >= 17 && hours < 19) status = '🌆 شام کا وقت';
        else status = '🌙 رات کا وقت';
        document.getElementById('clockStatus').textContent = status;

        // اگلی نماز کا اندازہ
        const times = getTodayPrayerTimes();
        const currentMinutes = hours * 60 + minutes;
        
        const fajrM = tToM(times.fajr);
        const zuhrM = tToM(times.zuhr);
        const asrM = tToM(times.asr);
        const maghribM = tToM(times.maghrib);
        const ishaM = tToM(times.isha);
        
        let nextPrayer = 'فجر';
        let nextPrayerTime = times.fajr;
        let nextPrayerJamaat = times.fajrJamaat;
        
        if (currentMinutes < fajrM) {
            nextPrayer = 'فجر';
            nextPrayerTime = times.fajr;
            nextPrayerJamaat = times.fajrJamaat;
        } else if (currentMinutes < zuhrM) {
            nextPrayer = 'ظہر';
            nextPrayerTime = times.zuhr;
            nextPrayerJamaat = times.zuhrJamaat;
        } else if (currentMinutes < asrM) {
            nextPrayer = 'عصر';
            nextPrayerTime = times.asr;
            nextPrayerJamaat = times.asrJamaat;
        } else if (currentMinutes < maghribM) {
            nextPrayer = 'مغرب';
            nextPrayerTime = times.maghrib;
            nextPrayerJamaat = times.maghribJamaat;
        } else if (currentMinutes < ishaM) {
            nextPrayer = 'عشاء';
            nextPrayerTime = times.isha;
            nextPrayerJamaat = times.ishaJamaat;
        } else {
            nextPrayer = 'فجر (کل)';
            nextPrayerTime = times.fajr;
            nextPrayerJamaat = times.fajrJamaat;
        }

        document.getElementById('nextPrayerInfo').innerHTML = `
            <span style="font-size: 28px;">🕌 اگلی نماز: ${nextPrayer}</span><br>
            <span style="font-size: 32px; color: gold;">${nextPrayerTime}</span><br>
            <span style="font-size: 22px;">جماعت: ${nextPrayerJamaat}</span>
        `;
    }

    // ڈیفالٹ صفحہ مین ہی رہے
    showPage('main');
</script>
</body>
</html>
