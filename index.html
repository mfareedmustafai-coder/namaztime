<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ø§Ú©Ø³ØªØ§Ù† Ù†Ù…Ø§Ø² Ù¹Ø§Ø¦Ù… Ù¹ÛŒØ¨Ù„ - M.FAREED MUSTAFAI</title>
    <style>
        :root {
            --primary: #00695c;
            --accent: #ffa000;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333;
            --danger: #c62828;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            text-align: center;
        }

        .container { max-width: 1100px; margin: auto; }

        header {
            background: linear-gradient(135deg, var(--primary), #004d40);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        h1 { margin: 0; font-size: 26px; }
        h2 { margin: 5px 0; font-size: 16px; opacity: 0.9; }
        .dev-name { display: block; margin-top: 10px; font-weight: bold; color: var(--accent); font-size: 22px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }

        .selection-panel {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .field-group { flex: 1; min-width: 250px; text-align: right; }
        .field-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 14px; color: var(--primary); }

        select {
            width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #ddd;
            font-size: 15px; font-family: inherit; background: white;
        }

        .today-card {
            background: linear-gradient(135deg, #00695c, #004d40);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,215,0,0.3);
            border-top-color: gold;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: gold;
            font-size: 18px;
            font-weight: bold;
        }

        .city-badge {
            background: var(--accent);
            color: black;
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
        }

        .source-badge {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid gold;
            padding: 10px 25px;
            border-radius: 40px;
            font-size: 18px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            box-shadow: 0 0 15px rgba(255,215,0,0.3);
        }
        
        .verified {
            background: gold;
            color: black;
            padding: 4px 15px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .halal-badge {
            background: #4caf50;
            color: white;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-left: 10px;
        }

        .date-info { 
            font-size: 32px;
            margin-bottom: 20px; 
            line-height: 1.6; 
            font-weight: bold;
        }
        
        .hijri-date { 
            color: gold; 
            font-weight: bold; 
            border-right: 2px solid rgba(255,255,255,0.3); 
            padding-right: 12px; 
            margin-right: 12px;
            font-size: 32px;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }
        
        .day-highlight {
            display: inline-block;
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid gold;
            padding: 5px 20px;
            border-radius: 30px;
            margin-left: 10px;
            font-size: 32px;
            font-weight: bold;
        }
        
        .special-day-box {
            background: rgba(255,255,255,0.15);
            border: 2px dashed gold;
            padding: 15px;
            border-radius: 15px;
            margin: 15px auto;
            font-size: 28px;
            max-width: 700px;
            font-weight: bold;
            line-height: 1.5;
        }
        
        .chand-rat {
            color: gold;
            font-weight: bold;
            display: block;
            margin-top: 10px;
            font-size: 26px;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }

        .times-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 12px;
        }

        .time-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .t-label { font-size: 12px; display: block; margin-bottom: 5px; opacity: 0.9; }
        .t-val { font-size: 18px; font-weight: bold; }
        .j-tag { font-size: 11px; color: var(--accent); font-weight: bold; display: block; margin-top: 5px; }

        .table-wrap {
            background: var(--card-bg);
            border-radius: 15px;
            overflow-x: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        table { width: 100%; border-collapse: collapse; font-size: 11px; min-width: 1050px; }
        th { background: var(--primary); color: white; padding: 12px 5px; position: sticky; top: 0; }
        td { padding: 10px 4px; border-bottom: 1px solid #eee; text-align: center; }
        .j-mini { display: block; font-size: 9px; color: #00796b; font-weight: bold; }
        .danger { color: var(--danger); font-weight: bold; }
        .active-day { background: #fff9c4 !important; font-weight: bold; color: #000; }

        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #555;
            padding: 25px;
            background: #eee;
            border-radius: 20px;
            line-height: 1.8;
        }
        .footer-name { margin-top: 15px; font-weight: bold; color: var(--primary); font-size: 18px; }
        
        .city-count {
            background: var(--primary);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Ù¾Ø§Ú©Ø³ØªØ§Ù† Ù†Ù…Ø§Ø² Ù¹Ø§Ø¦Ù… Ù¹ÛŒØ¨Ù„</h1>
        <h2>Ù…Ø·Ø§Ø¨Ù‚ Ø¯Ø§Ø±Ø§Ù„Ø§ÙØªØ§Ø¡ Ø§ÛÙ„Ø³Ù†Øª (Ø­Ù†ÙÛŒ) <span class="city-count">200+ Ø´ÛØ±</span></h2>
        <span class="dev-name">M.FAREED MUSTAFAI</span>
    </header>

    <div class="selection-panel">
        <div class="field-group">
            <label>Ø´ÛØ± Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº (200+ Ø´ÛØ±)</label>
            <select id="citySelect" onchange="renderApp()"></select>
        </div>
        <div class="field-group">
            <label>Ù…ÛÛŒÙ†Û Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº</label>
            <select id="monthSelect" onchange="renderApp()">
                <option value="0">Ø¬Ù†ÙˆØ±ÛŒ</option><option value="1">ÙØ±ÙˆØ±ÛŒ</option><option value="2">Ù…Ø§Ø±Ú†</option>
                <option value="3">Ø§Ù¾Ø±ÛŒÙ„</option><option value="4">Ù…Ø¦ÛŒ</option><option value="5">Ø¬ÙˆÙ†</option>
                <option value="6">Ø¬ÙˆÙ„Ø§Ø¦ÛŒ</option><option value="7">Ø§Ú¯Ø³Øª</option><option value="8">Ø³ØªÙ…Ø¨Ø±</option>
                <option value="9">Ø§Ú©ØªÙˆØ¨Ø±</option><option value="10">Ù†ÙˆÙ…Ø¨Ø±</option><option value="11">Ø¯Ø³Ù…Ø¨Ø±</option>
            </select>
        </div>
    </div>

    <div class="today-card" id="todayCard">
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ Ú©ÛŒ ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù„ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’...</div>
            <div class="loading-text" style="font-size: 14px; margin-top: 10px;">Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Ù†ØªØ¸Ø§Ø± Ú©Ø±ÛŒÚº</div>
        </div>
        <div id="cityNameLabel" class="city-badge">Ú©Ø±Ø§Ú†ÛŒ</div>
        <div class="source-badge" id="sourceBadge">
            <span>ğŸ•Œ Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ Ù¾Ø§Ú©Ø³ØªØ§Ù†</span>
            <span class="verified">âœ“ Ø³Ø±Ú©Ø§Ø±ÛŒ</span>
            <span class="halal-badge">Ø­Ù„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ</span>
        </div>
        <div class="date-info" id="fullDateDisplay">Ù„ÙˆÚˆÙ†Ú¯...</div>
        <div class="special-day-box" id="makhsoosDin">Ù…Ø®ØµÙˆØµ Ø¯Ù†: Ù„ÙˆÚˆÙ†Ú¯...</div>
        <div class="times-grid" id="cardGrid"></div>
    </div>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>ØªØ§Ø±ÛŒØ®</th><th>ÙØ¬Ø±</th><th>Ø·Ù„ÙˆØ¹</th><th>Ø§Ø´Ø±Ø§Ù‚</th><th>Ú†Ø§Ø´Øª</th><th>Ø¶Ø­ÙˆÛƒ</th><th>Ù…Ù…Ù†ÙˆØ¹</th><th>Ø¸ÛØ±</th><th>Ø¹ØµØ±</th><th>Ù…ØºØ±Ø¨</th><th>Ø¹Ø´Ø§Ø¡</th>
                </tr>
            </thead>
            <tbody id="tableContent"></tbody>
        </table>
    </div>

    <footer>
        <b>Ø§ÛÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª:</b> ÛŒÛ Ø§ÙˆÙ‚Ø§Øª Ø¯Ø§Ø±Ø§Ù„Ø§ÙØªØ§Ø¡ Ø§ÛÙ„Ø³Ù†Øª Ú©Ø±Ø§Ú†ÛŒ Ú©Û’ Ø¯Ø§Ø¦Ù…ÛŒ Ù†Ù‚Ø´Û’ Ú©Û’ Ù…Ø·Ø§Ø¨Ù‚ ÛÛŒÚºÛ” <br>
        1. <b>Ø§Ø³Ù„Ø§Ù…ÛŒ ØªØ§Ø±ÛŒØ®:</b> Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ Ù¾Ø§Ú©Ø³ØªØ§Ù† Ú©ÛŒ ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ Ø¨Ø±Ø§Û Ø±Ø§Ø³Øª Ù„ÛŒ Ø¬Ø§ØªÛŒ ÛÛ’ <br>
        2. <b>Ø¯Ù† Ú©Ø§ Ù†Ø§Ù…:</b> ÛØ§Ø¦ÛŒ Ù„Ø§Ø¦Ù¹ Ú©ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û”
        <div class="footer-name">Developed By: M.FAREED MUSTAFAI</div>
    </footer>
</div>

<script>
    // ========== 200+ Ù¾Ø§Ú©Ø³ØªØ§Ù†ÛŒ Ø´ÛØ± - Ø¯Ø§Ø±Ø§Ù„Ø§ÙØªØ§Ø¡ Ø§ÛÙ„Ø³Ù†Øª Ú©Û’ Ù…Ø·Ø§Ø¨Ù‚ ==========
    const pkCities = [
        {n:"Ú©Ø±Ø§Ú†ÛŒ", o:0}, {n:"Ø­ÛŒØ¯Ø±Ø¢Ø¨Ø§Ø¯", o:-3}, {n:"Ø³Ú©Ú¾Ø±", o:-9}, {n:"Ù„Ø§Ú‘Ú©Ø§Ù†Û", o:-8}, 
        {n:"Ù†ÙˆØ§Ø¨ Ø´Ø§Û", o:-5}, {n:"Ù…ÛŒØ±Ù¾ÙˆØ± Ø®Ø§Øµ", o:-2}, {n:"Ø¯Ø§Ø¯Ùˆ", o:-6}, {n:"Ø¬ÛŒÚ©Ø¨ Ø¢Ø¨Ø§Ø¯", o:-12},
        {n:"Ø´Ú©Ø§Ø±Ù¾ÙˆØ±", o:-10}, {n:"Ø®ÛŒØ±Ù¾ÙˆØ±", o:-7}, {n:"Ù¹Ú¾Ù¹Û", o:-1}, {n:"Ø¨Ø¯ÛŒÙ†", o:0},
        {n:"Ù¹Ù†ÚˆÙˆ Ø§Ù„Ù„Û ÛŒØ§Ø±", o:-3}, {n:"Ù¹Ù†ÚˆÙˆ Ù…Ø­Ù…Ø¯ Ø®Ø§Ù†", o:-3}, {n:"Ù…Ù¹ÛŒØ§Ø±ÛŒ", o:-4},
        {n:"Ù‚Ù…Ø¨Ø±", o:-8}, {n:"Ø´ÛØ¯Ø§Ø¯ Ú©ÙˆÙ¹", o:-9}, {n:"Ú¯Ú¾ÙˆÙ¹Ú©ÛŒ", o:-10}, {n:"Ù¾Ù†Ùˆ Ø¹Ø§Ù‚Ù„", o:-11},
        {n:"Ú©Ù†Ø±ÛŒ", o:-9}, {n:"Ù…ÛØ±", o:-8}, {n:"Ù†ØµÛŒØ± Ø¢Ø¨Ø§Ø¯", o:-7}, {n:"Ø³ÛŒÛÙˆÙ†", o:-4},
        {n:"Ø³Ø¬Ø§ÙˆÙ„", o:-2}, {n:"Ø¬Ú¾Ù„ Ù…Ú¯Ø³ÛŒ", o:-12}, {n:"Ø¹Ù…Ø± Ú©ÙˆÙ¹", o:-1}, {n:"Ø³Ø§Ù†Ú¯Ú¾Ú‘", o:-4},
        {n:"Ù†Ù†Ú©Ø§Ù†Û", o:-5}, {n:"Ú©ÙˆÙ¹Ø±ÛŒ", o:-4}, {n:"Ø­Ø³Ù† Ø§Ø¨Ø§Ø¯", o:-6}, {n:"Ø±Ù†ÛŒ Ù¾ÙˆØ±", o:-8},
        {n:"Ù„Ø§ÛÙˆØ±", o:-40}, {n:"ÙÛŒØµÙ„ Ø¢Ø¨Ø§Ø¯", o:-32}, {n:"Ø±Ø§ÙˆÙ„Ù¾Ù†ÚˆÛŒ", o:-46}, {n:"Ù…Ù„ØªØ§Ù†", o:-25},
        {n:"Ú¯ÙˆØ¬Ø±Ø§Ù†ÙˆØ§Ù„Û", o:-42}, {n:"Ø³Ø±Ú¯ÙˆØ¯Ú¾Ø§", o:-35}, {n:"Ø³ÛŒØ§Ù„Ú©ÙˆÙ¹", o:-44}, {n:"Ø¨ÛØ§ÙˆÙ„Ù¾ÙˆØ±", o:-26},
        {n:"Ú¯Ø¬Ø±Ø§Øª", o:-43}, {n:"Ø¬ÛÙ„Ù…", o:-48}, {n:"Ú†Ú©ÙˆØ§Ù„", o:-45}, {n:"Ø§Ù¹Ú©", o:-48},
        {n:"Ø§ÙˆÚ©Ø§Ú‘Û", o:-35}, {n:"Ù‚ØµÙˆØ±", o:-41}, {n:"Ø´ÛŒØ®ÙˆÙ¾ÙˆØ±Û", o:-41}, {n:"Ø±Ø­ÛŒÙ… ÛŒØ§Ø± Ø®Ø§Ù†", o:-18},
        {n:"ÚˆÛŒØ±Û ØºØ§Ø²ÛŒ Ø®Ø§Ù†", o:-18}, {n:"Ø³Ø§ÛÛŒÙˆØ§Ù„", o:-32}, {n:"Ø®Ø§Ù†ÛŒÙˆØ§Ù„", o:-28}, {n:"Ú†Ù†ÛŒÙˆÙ¹", o:-33},
        {n:"Ø­Ø§ÙØ¸ Ø¢Ø¨Ø§Ø¯", o:-40}, {n:"Ù…Ù†ÚˆÛŒ Ø¨ÛØ§Ø¤Ø§Ù„Ø¯ÛŒÙ†", o:-43}, {n:"Ù†Ø§Ø±ÙˆÙˆØ§Ù„", o:-44}, {n:"ÙˆØ²ÛŒØ± Ø¢Ø¨Ø§Ø¯", o:-43},
        {n:"Ù…Ø¸ÙØ± Ú¯Ú‘Ú¾", o:-22}, {n:"Ù„ÛŒÛ", o:-20}, {n:"Ø¨Ú¾Ú©Ø±", o:-22}, {n:"Ù…ÛŒØ§Ù†ÙˆØ§Ù„ÛŒ", o:-24},
        {n:"Ø®ÙˆØ´Ø§Ø¨", o:-30}, {n:"Ù¹ÙˆØ¨Û Ù¹ÛŒÚ© Ø³Ù†Ú¯Ú¾", o:-33}, {n:"Ø¬Ú¾Ù†Ú¯", o:-30}, {n:"Ù„ÙˆØ¯Ú¾Ø±Ø§Úº", o:-24},
        {n:"Ù¾Ø§Ú©Ù¾ØªÙ†", o:-32}, {n:"Ø¹Ø§Ø±Ù ÙˆØ§Ù„Ø§", o:-33}, {n:"Ø¨ÙˆØ±ÛŒÙˆØ§Ù„Û", o:-32}, {n:"Ú©Ù…Ø§Ù„ÛŒÛ", o:-33},
        {n:"Ø³Ù…Ù†Ø¯Ø±ÛŒ", o:-34}, {n:"Ú¯ÙˆØ¬Ø±Û", o:-33}, {n:"Ú†ÛŒÚ†Û ÙˆØ·Ù†ÛŒ", o:-34}, {n:"Ù¾Ú¾Ø§Ù„ÛŒÛ", o:-42},
        {n:"Ù¾Ù†Úˆ Ø¯Ø§Ø¯Ù† Ø®Ø§Ù†", o:-46}, {n:"ØªÙ„Û Ú¯Ù†Ú¯", o:-47}, {n:"ÙØªØ­ Ø¬Ù†Ú¯", o:-47}, {n:"Ø­Ø³Ù† Ø§Ø¨Ø¯Ø§Ù„", o:-47},
        {n:"ÛØ±ÛŒ Ù¾ÙˆØ±", o:-47}, {n:"Ø§ÛŒØ¨Ù¹ Ø¢Ø¨Ø§Ø¯", o:-48}, {n:"Ù…Ø§Ù†Ø³ÛØ±Û", o:-49}, {n:"Ú©ÙˆÛØ§Ù¹", o:-25},
        {n:"Ø¨ÛØ§ÙˆÙ„Ù†Ú¯Ø±", o:-31}, {n:"Ø­Ø§ØµÙ„ Ù¾ÙˆØ±", o:-30}, {n:"Ú†Ø´ØªÛŒØ§Úº", o:-28}, {n:"ÙÙˆØ±Ù¹ Ø¹Ø¨Ø§Ø³", o:-27},
        {n:"Ø®ÛŒØ±Ù¾ÙˆØ± Ù¹Ø§Ù…ÛŒÙˆØ§Ù„ÛŒ", o:-26}, {n:"ØµØ§Ø¯Ù‚ Ø¢Ø¨Ø§Ø¯", o:-19}, {n:"Ø§Ø­Ù…Ø¯ Ù¾ÙˆØ± Ø´Ø±Ù‚ÛŒÛ", o:-22},
        {n:"Ø¹Ù„ÛŒ Ù¾ÙˆØ±", o:-21}, {n:"Ø¬ØªÙˆØ¦ÛŒ", o:-20}, {n:"Ú©ÛØ±ÙˆÚ‘ Ù¾Ú©Ø§", o:-23}, {n:"Ø¯Ù†ÛŒØ§ Ù¾ÙˆØ±", o:-24},
        {n:"Ù¾Ø´Ø§ÙˆØ±", o:-24}, {n:"Ù…Ø±Ø¯Ø§Ù†", o:-45}, {n:"Ù†ÙˆØ´ÛØ±Û", o:-26}, {n:"Ú†Ø§Ø±Ø³Ø¯Û", o:-26},
        {n:"ØµÙˆØ§Ø¨ÛŒ", o:-28}, {n:"Ø§ÛŒØ¨Ù¹ Ø¢Ø¨Ø§Ø¯", o:-48}, {n:"Ù…Ø§Ù†Ø³ÛØ±Û", o:-49}, {n:"Ø¨Ù¹Ú¯Ø±Ø§Ù…", o:-50},
        {n:"Ú©ÙˆÛØ³ØªØ§Ù†", o:-51}, {n:"Ø´Ø§Ù†Ú¯Ù„Û", o:-47}, {n:"Ø¨ÙˆÙ†ÛŒØ±", o:-45}, {n:"Ø³ÙˆØ§Øª", o:-44},
        {n:"Ø¯ÛŒØ±", o:-42}, {n:"Ú†ØªØ±Ø§Ù„", o:-35}, {n:"Ø¯ÛŒØ± Ø²ÛŒØ±ÛŒÚº", o:-43}, {n:"Ø¯ÛŒØ± Ø¨Ø§Ù„Ø§", o:-42},
        {n:"Ø¨Ø§Ø¬ÙˆÚ‘", o:-22}, {n:"Ù…ÛÙ…Ù†Ø¯", o:-23}, {n:"Ø®ÛŒØ¨Ø±", o:-24}, {n:"Ø§ÙˆØ±Ú©Ø²Ø¦ÛŒ", o:-24},
        {n:"Ú©Ø±Ù…", o:-25}, {n:"Ø´Ù…Ø§Ù„ÛŒ ÙˆØ²ÛŒØ±Ø³ØªØ§Ù†", o:-26}, {n:"Ø¬Ù†ÙˆØ¨ÛŒ ÙˆØ²ÛŒØ±Ø³ØªØ§Ù†", o:-27},
        {n:"Ø¨Ù†ÙˆÚº", o:-23}, {n:"Ù„Ú©ÛŒ Ù…Ø±ÙˆØª", o:-22}, {n:"Ù¹Ø§Ù†Ú©", o:-21}, {n:"ÚˆÛŒØ±Û Ø§Ø³Ù…Ø§Ø¹ÛŒÙ„ Ø®Ø§Ù†", o:-20},
        {n:"ÛÙ†Ú¯Ùˆ", o:-24}, {n:"Ú©Ø±Ú©", o:-24}, {n:"Ú©ÙˆÛØ§Ù¹", o:-25}, {n:"Ù†ÙˆØ´ÛØ±Û", o:-26},
        {n:"Ú©ÙˆØ¦Ù¹Û", o:12}, {n:"Ú†Ù…Ù†", o:10}, {n:"Ù‚Ù„Ø§Øª", o:9}, {n:"Ø®Ø¶Ø¯Ø§Ø±", o:7},
        {n:"Ù„Ø³Ø¨ÛŒÙ„Û", o:3}, {n:"Ú¯ÙˆØ§Ø¯Ø±", o:-5}, {n:"Ù¾Ù†Ø¬Ú¯ÙˆØ±", o:-2}, {n:"ØªØ±Ø¨Øª", o:-3},
        {n:"Ø³ÛŒØ¨ÛŒ", o:9}, {n:"Ù†ØµÛŒØ± Ø¢Ø¨Ø§Ø¯", o:7}, {n:"Ø¬Ø¹ÙØ± Ø¢Ø¨Ø§Ø¯", o:6}, {n:"Ú˜ÙˆØ¨", o:14},
        {n:"Ù‚Ù„Ø¹Û Ø³ÛŒÙ Ø§Ù„Ù„Û", o:13}, {n:"Ù‚Ù„Ø¹Û Ø¹Ø¨Ø¯Ø§Ù„Ù„Û", o:11}, {n:"Ù…Ø³ØªÙˆÙ†Ú¯", o:11},
        {n:"Ù¾Ø´ÛŒÙ†", o:12}, {n:"Ù†ÛŒÙ„Û", o:10}, {n:"Ø¯Ø§Ù„Ø¨Ù†Ø¯ÛŒÙ†", o:15}, {n:"Ù†ÙˆØ´Ú©ÛŒ", o:14},
        {n:"Ø®Ø§Ø±Ø§Ù†", o:8}, {n:"ÙˆØ§Ø´Ú©", o:6}, {n:"Ø¢ÙˆØ§Ø±Ø§Ù†", o:4}, {n:"Ú©ÛŒÚ†", o:-2},
        {n:"Ø¢Ú¯", o:10}, {n:"Ø¨ÙˆÙ„Ø§Ù†", o:8}, {n:"ÛØ±Ù†Ø§Ø¦ÛŒ", o:10}, {n:"Ù„ÙˆØ±Ø§Ù„Ø§Ø¦ÛŒ", o:12},
        {n:"Ø¨Ø§Ø±Ú©Ú¾Ø§Ù†", o:11}, {n:"Ù…ÙˆØ³ÛŒÙ° Ø®ÛŒÙ„", o:12}, {n:"Ú©ÙˆÛÙ„Ùˆ", o:10}, {n:"ÚˆÛŒØ±Û Ø¨Ú¯Ù¹ÛŒ", o:9},
        {n:"Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯", o:-46}, {n:"Ø±Ø§ÙˆÙ„Ù¾Ù†ÚˆÛŒ", o:-46}, {n:"Ú†Ú© Ø´ÛØ²Ø§Ø¯", o:-46},
        {n:"Ø¨Ú¾Ø§Ø±Û Ú©ÛÙˆ", o:-46}, {n:"Ø³Ù†Ú¯Ø¬Ø§Ù†ÛŒ", o:-46}, {n:"Ø³ÙˆÛØ§Ù†", o:-46}, {n:"ØªØ±Ù†ÙˆÙ„", o:-46},
        {n:"Ú¯Ù„Ú¯Øª", o:-56}, {n:"Ø³Ú©Ø±Ø¯Ùˆ", o:-59}, {n:"ÛÙ†Ø²Û", o:-57}, {n:"Ù†Ú¯Ø±", o:-57},
        {n:"ØºØ§Ù†Ú†Û’", o:-59}, {n:"Ø´Ú¯Ø±", o:-59}, {n:"Ø®Ù¾Ù„Ùˆ", o:-60}, {n:"Ø§Ø³ØªÙˆØ±", o:-58},
        {n:"Ø¯ÛŒØ§Ù…Ø±", o:-55}, {n:"Ú†Ù„Ø§Ø³", o:-54}, {n:"Ú¯ÙˆÙ¾Ø³", o:-56}, {n:"ÛŒØ§Ø³ÛŒÙ†", o:-56},
        {n:"Ù¾ÙˆÙ†ÛŒØ§Ù„", o:-55}, {n:"ÛÙˆÚˆØ±", o:-57}, {n:"Ø¯Ù†ÛŒÙˆØ±", o:-56}, {n:"Ø³Ú©Ø±Ø¯Ùˆ", o:-59},
        {n:"Ú©Ú¾Ø±Ù…Ù†Ú¯", o:-58}, {n:"Ø´Ù…Ù„Ø´Ø§Ù„", o:-57}, {n:"Ù¾Ø§Ø³Ùˆ", o:-57}, {n:"Ø­Ø³ÛŒÙ† Ø¢Ø¨Ø§Ø¯", o:-57},
        {n:"Ù…Ø¸ÙØ± Ø¢Ø¨Ø§Ø¯", o:-52}, {n:"Ù†ÛŒÙ„Ù…", o:-53}, {n:"ÛÙ¹ÛŒØ§Úº", o:-52}, {n:"Ø¨Ø§Øº", o:-50},
        {n:"Ù¾ÙˆÙ†Ú†Ú¾", o:-51}, {n:"Ø³ÙˆÚˆÚ¾Ù†ÙˆØªÛŒ", o:-51}, {n:"Ú©ÙˆØªÙ„ÛŒ", o:-50}, {n:"Ù…ÛŒØ±Ù¾ÙˆØ±", o:-49},
        {n:"Ø¨Ú¾Ù…Ø¨Ø±", o:-48}, {n:"Ø³Ù…ÛÙ†ÛŒ", o:-49}, {n:"Ø³Ø±Ù†Ù…ÙˆÛÚ‘ÛŒ", o:-50}, {n:"Ú†Ú© ÛØ±ÛŒ", o:-50},
        {n:"Ú†Ú¾Ø¨Û", o:-49}, {n:"ÚˆÙ†Û", o:-51}, {n:"Ø¹Ø¨Ø§Ø³ Ù¾ÙˆØ±", o:-49}, {n:"Ø¨Ù„ÙˆÚ†", o:-50},
        {n:"Ø¨Ú¾ÛŒØ±Û", o:-44}, {n:"Ø¨Ú¾Ù„ÙˆØ§Ù„", o:-38}, {n:"Ø¨Ú¾ÙˆØ§Ù†Û", o:-39}, {n:"Ø¨Ú¾Ú©Ø±", o:-22},
        {n:"Ú†Ú© Ø¬Ú¾Ù…Ø±Û", o:-40}, {n:"Ú†ÙˆØ¨Ø§Ø±Û", o:-35}, {n:"ÚˆØ³Ú©Û", o:-43}, {n:"ÚˆÙˆÚ¯Ø±Û", o:-41},
        {n:"Ø§ÛŒÙ…Ù† Ø¢Ø¨Ø§Ø¯", o:-37}, {n:"ÙØ§Ø¶Ù„ Ù¾ÙˆØ±", o:-25}, {n:"ÙØªØ­ Ù¾ÙˆØ±", o:-28}, {n:"ÙÛŒØ±ÙˆØ² ÙˆØ§Ù„Ø§", o:-36},
        {n:"Ú¯Ú¯Ùˆ Ù…Ù†ÚˆÛŒ", o:-39}, {n:"Ú¯ÙˆØ¬Ø± Ø®Ø§Ù†", o:-45}, {n:"Ø­ÙˆÛŒÙ„ÛŒ Ù„Ú©Ú¾Ø§", o:-34}, {n:"Ø¬Ù„Ø§Ù„Ù¾ÙˆØ± Ø¬Ù¹Ø§Úº", o:-44},
        {n:"Ø¬Ù„Ø§Ù„Ù¾ÙˆØ± Ù¾ÛŒØ±ÙˆØ§Ù„Û", o:-30}, {n:"Ø¬Ú‘Ø§Ù„Û", o:-45}, {n:"Ú©Ø¨ÛŒØ± ÙˆØ§Ù„Ø§", o:-30}, {n:"Ú©ÛØ±ÙˆÚ‘ Ù¾Ú©Ø§", o:-23},
        {n:"Ú©Ù…Ø§Ù„ÛŒÛ", o:-33}, {n:"Ú©Ø§Ù…ÙˆÚ©Û’", o:-42}, {n:"Ú©Ø§Ù†Ø¯ÛŒØ§Úº", o:-21}, {n:"Ú©Ú¾Ø§Ø±ÛŒØ§Úº", o:-44},
        {n:"Ú©ÙˆÙ¹ Ø§Ø¯Ùˆ", o:-20}, {n:"Ú©ÙˆÙ¹ Ø±Ø§Ø¯Ú¾Ø§ Ú©Ø´Ù†", o:-38}, {n:"Ú©Ù†ÚˆÛŒØ§Ù†", o:-21}, {n:"Ù„Ø§Ù„Û Ù…ÙˆØ³ÛŒÙ°", o:-44},
        {n:"Ù„ÛŒØ§Ù‚Øª Ù¾ÙˆØ±", o:-25}, {n:"Ù…ÛŒÙ„Ø³ÛŒ", o:-28}, {n:"Ù…Ù†ÚˆÛŒ Ø¨ÛØ§Ø¤Ø§Ù„Ø¯ÛŒÙ†", o:-43}, {n:"Ù…Ù†Ú¯Ùˆ ÙˆØ§Ù„", o:-22},
        {n:"Ù…Ù†Ú†Ù† Ø¢Ø¨Ø§Ø¯", o:-26}, {n:"Ù…ÛŒØ§Ù† Ú†Ù†ÙˆÚº", o:-35}, {n:"Ù…ÛŒØ§Úº ÙˆØ§Ù„ÛŒ", o:-24}, {n:"Ù…Ø±ÛŒØ¯Ú©Û’", o:-41},
        {n:"Ù…Ø¸ÙØ± Ø¢Ø¨Ø§Ø¯", o:-52}, {n:"Ù†Ø§Ø±ÙˆÙˆØ§Ù„", o:-44}, {n:"Ù¾Ø³Ø±ÙˆØ±", o:-42}, {n:"Ù¾ØªÙ„ÛŒ", o:-40},
        {n:"Ù¾Ú¾Ø§Ù„ÛŒÛ", o:-42}, {n:"Ù¾Ù†ÚˆÛŒ Ú¯Ú¾ÛŒÙ¾", o:-40}, {n:"Ù¾ÛŒØ± Ù…Ø­Ù„", o:-33}, {n:"Ù‚Ø§Ø¯Ø± Ø¢Ø¨Ø§Ø¯", o:-38},
        {n:"Ø±Ø§Ø¬Ù† Ù¾ÙˆØ±", o:-18}, {n:"Ø±Ø§Ø¬Û Ø¬Ù†Ú¯", o:-41}, {n:"Ø±Ù†Ù…Ù„ Ø´Ø±ÛŒÙ", o:-44}, {n:"Ø³Ø§ÛÛŒÙˆØ§Ù„", o:-32},
        {n:"Ø³Ø§Ù…Ù†ÚˆÛŒ", o:-33}, {n:"Ø³Ù†Ú¯Ù„Ø§ ÛÙ„", o:-42}, {n:"Ø³Ø±Ø§Ø¦Û’ Ø¹Ø§Ù„Ù…Ú¯ÛŒØ±", o:-44}, {n:"Ø´Ú©Ø± Ú¯Ú‘Ú¾", o:-43},
        {n:"Ø´Ø§Û Ù¾ÙˆØ±", o:-34}, {n:"Ø´ÛÛŒØ¯ Ø¨Ù†Ú¯Ù„Û", o:-38}, {n:"Ø³ÛŒØ§Ù„Ú©ÙˆÙ¹", o:-44}, {n:"Ø³ÙˆÛØ§ÙˆÛ", o:-46},
        {n:"Ø³Ú©Ú¾ÛŒÚ©ÛŒ", o:-43}, {n:"ØªÙ„Û Ú¯Ù†Ú¯", o:-47}, {n:"ØªØ§Ù†Ø¯Ù„ÛŒØ§Ù†ÙˆØ§Ù„Û", o:-41}, {n:"ÙˆÛØ§Ú‘ÛŒ", o:-30},
        {n:"Ø¸ÙØ±ÙˆØ§Ù„", o:-42}
    ];

    pkCities.sort((a,b) => a.n.localeCompare(b.n));

    const baseData = {
        0: {s:["05:50","07:18","11:09","12:36","04:18","05:58","07:18"], e:["05:48","07:16","11:18","12:46","04:39","06:20","07:37"]},
        1: {s:["05:47","07:16","11:18","12:46","04:40","06:21","07:38"], e:["05:27","06:58","11:18","12:46","04:56","06:38","07:54"]},
        2: {s:["05:26","06:57","11:18","12:46","04:56","06:38","07:54"], e:["04:55","06:24","11:10","12:38","05:08","06:53","08:11"]},
        3: {s:["04:54","06:23","11:10","12:37","05:08","06:54","08:11"], e:["04:26","05:57","11:03","12:32","05:16","07:08","08:31"]},
        4: {s:["04:25","05:56","11:03","12:31","05:16","07:09","08:32"], e:["04:09","05:42","11:03","12:32","05:26","07:25","08:56"]},
        5: {s:["04:09","05:42","11:03","12:32","05:27","07:25","08:57"], e:["04:28","05:45","11:14","12:44","05:35","07:33","09:07"]},
        6: {s:["04:28","05:45","11:14","12:44","05:35","07:33","09:07"], e:["04:46","05:57","11:19","12:46","05:34","07:24","08:53"]},
        7: {s:["04:46","05:58","11:19","12:46","05:33","07:24","08:52"], e:["05:03","06:10","11:15","12:40","05:15","07:00","08:21"]},
        8: {s:["05:03","06:10","11:15","12:40","05:14","06:59","08:20"], e:["05:15","06:20","11:05","12:30","04:47","06:29","07:47"]},
        9: {s:["05:16","06:21","11:05","12:30","04:46","06:28","07:46"], e:["05:30","06:35","10:59","12:23","04:19","06:05","07:24"]},
        10: {s:["05:30","06:36","10:59","12:23","04:18","06:04","07:24"], e:["05:49","06:54","11:05","12:28","04:07","05:56","07:17"]},
        11: {s:["05:50","06:55","11:05","12:28","04:07","05:56","07:18"], e:["06:01","07:17","11:21","12:43","04:18","06:09","07:31"]}
    };

    function tToM(t) { const [h, m] = t.split(':').map(Number); return h * 60 + m; }
    function mToT(m) { let c = (m + 1440) % 1440; return `${String(Math.floor(c/60)).padStart(2,'0')}:${String(c%60).padStart(2,'0')}`; }
    function rndJ(m, off) { return Math.ceil((m + off) / 15) * 15; }

    const selC = document.getElementById('citySelect');
    pkCities.forEach(c => { let o = document.createElement('option'); o.value = c.o; o.innerText = c.n; selC.appendChild(o); });

    function getSpecialDayUrdu(day, month) {
        const urduMonths = ["","Ù…Ø­Ø±Ù…","ØµÙØ±","Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø§ÙˆÙ„","Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø«Ø§Ù†ÛŒ","Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø§ÙˆÙ„","Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø«Ø§Ù†ÛŒ","Ø±Ø¬Ø¨","Ø´Ø¹Ø¨Ø§Ù†","Ø±Ù…Ø¶Ø§Ù†","Ø´ÙˆØ§Ù„","Ø°ÙˆØ§Ù„Ù‚Ø¹Ø¯Û","Ø°ÙˆØ§Ù„Ø­Ø¬Û"];
        
        let specialDay = "";
        if(month === 1 && day === 10) specialDay = "Ø¹Ø§Ø´ÙˆØ±Û (10 Ù…Ø­Ø±Ù…)";
        else if(month === 3 && day === 12) specialDay = "Ø¹ÛŒØ¯ Ù…ÛŒÙ„Ø§Ø¯ Ø§Ù„Ù†Ø¨ÛŒ ï·º (12 Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø§ÙˆÙ„)";
        else if(month === 7 && day === 27) specialDay = "Ø´Ø¨Ù Ù…Ø¹Ø±Ø§Ø¬ (27 Ø±Ø¬Ø¨)";
        else if(month === 8 && day === 15) specialDay = "Ø´Ø¨Ù Ø¨Ø±Ø§Øª (15 Ø´Ø¹Ø¨Ø§Ù†)";
        else if(month === 9 && day === 27) specialDay = "Ø´Ø¨Ù Ù‚Ø¯Ø± (27 Ø±Ù…Ø¶Ø§Ù†)";
        else if(month === 10 && day === 1) specialDay = "Ø¹ÛŒØ¯ Ø§Ù„ÙØ·Ø±";
        else if(month === 12 && day === 9) specialDay = "ÛŒÙˆÙ…Ù Ø¹Ø±ÙÛ (9 Ø°ÙˆØ§Ù„Ø­Ø¬Û)";
        else if(month === 12 && day === 10) specialDay = "Ø¹ÛŒØ¯ Ø§Ù„Ø§Ø¶Ø­ÛŒ (10 Ø°ÙˆØ§Ù„Ø­Ø¬Û)";
        
        let chandRat = "";
        if(day === 29 || day === 30) {
            if(month === 1) chandRat = "ğŸŒ™ Ù…Ø­Ø±Ù… Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 2) chandRat = "ğŸŒ™ ØµÙØ± Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 3) chandRat = "ğŸŒ™ Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø§ÙˆÙ„ Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 4) chandRat = "ğŸŒ™ Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø«Ø§Ù†ÛŒ Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 5) chandRat = "ğŸŒ™ Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø§ÙˆÙ„ Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 6) chandRat = "ğŸŒ™ Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø«Ø§Ù†ÛŒ Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 7) chandRat = "ğŸŒ™ Ø±Ø¬Ø¨ Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 8) chandRat = "ğŸŒ™ Ø´Ø¹Ø¨Ø§Ù† Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 9) chandRat = "ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú© Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 10) chandRat = "ğŸŒ™ Ø´ÙˆØ§Ù„ Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 11) chandRat = "ğŸŒ™ Ø°ÙˆØ§Ù„Ù‚Ø¹Ø¯Û Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            else if(month === 12) chandRat = "ğŸŒ™ Ø°ÙˆØ§Ù„Ø­Ø¬Û Ú©ÛŒ Ú†Ø§Ù†Ø¯ Ø±Ø§Øª";
            
            chandRat += ` (${day} ${urduMonths[month]})`;
        }
        
        return { specialDay, chandRat };
    }

    // ========== ØµØ±Ù Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ Ú©ÛŒ ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù„ÛŒÙ†Û’ ÙˆØ§Ù„Ø§ ÙÙ†Ú©Ø´Ù† ==========
    async function getRuyatEHilalDate() {
        try {
            // Ù„ÙˆÚˆÙ†Ú¯ Ø§ÙˆÙˆØ±Ù„Û’ Ø¯Ú©Ú¾Ø§Ø¦ÛŒÚº
            document.getElementById('loadingOverlay').style.display = 'flex';
            
            // CORS proxy Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const targetUrl = 'https://www.royaithilalcommittee.pk/';
            
            const response = await fetch(proxyUrl + encodeURIComponent(targetUrl), {
                headers: {
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                }
            });
            
            if (!response.ok) {
                throw new Error('ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù†ÛÛŒÚº Ù…Ù„ Ø³Ú©Ø§');
            }
            
            const html = await response.text();
            
            // HTML Ø³Û’ ØªØ§Ø±ÛŒØ® Ù†Ú©Ø§Ù„Ù†Û’ Ú©ÛŒ Ú©ÙˆØ´Ø´
            // Ù…Ø®ØªÙ„Ù Ù¾ÛŒÙ¹Ø±Ù† Ú†ÛŒÚ© Ú©Ø±ÛŒÚº
            
            // Ù¾ÛŒÙ¹Ø±Ù† 1: "Ø¢Ø¬ 20 ÙØ±ÙˆØ±ÛŒ 2026Ø¡ Ø¨Ø±ÙˆØ² Ø¬Ù…Ø¹Û 1 Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú© 1447Ú¾ ÛÛ’"
            let match = html.match(/Ø¢Ø¬\s+(\d+)\s+(\S+)\s+(\d+)[Ø¡]?.*?(\d+)\s+(\S+)\s+(\d+)[Ú¾]/);
            
            if (match) {
                const gregorianDay = parseInt(match[1]);
                const gregorianMonth = match[2];
                const gregorianYear = parseInt(match[3]);
                const hijriDay = parseInt(match[4]);
                const hijriMonth = match[5];
                const hijriYear = parseInt(match[6]);
                
                // Ù…ÛÛŒÙ†Û’ Ú©Ø§ Ù†Ù…Ø¨Ø± Ù…Ø¹Ù„ÙˆÙ… Ú©Ø±ÛŒÚº
                const monthMap = {
                    'Ø¬Ù†ÙˆØ±ÛŒ': 1, 'ÙØ±ÙˆØ±ÛŒ': 2, 'Ù…Ø§Ø±Ú†': 3, 'Ø§Ù¾Ø±ÛŒÙ„': 4,
                    'Ù…Ø¦ÛŒ': 5, 'Ø¬ÙˆÙ†': 6, 'Ø¬ÙˆÙ„Ø§Ø¦ÛŒ': 7, 'Ø§Ú¯Ø³Øª': 8,
                    'Ø³ØªÙ…Ø¨Ø±': 9, 'Ø§Ú©ØªÙˆØ¨Ø±': 10, 'Ù†ÙˆÙ…Ø¨Ø±': 11, 'Ø¯Ø³Ù…Ø¨Ø±': 12
                };
                
                const hijriMonthMap = {
                    'Ù…Ø­Ø±Ù…': 1, 'Ù…Ø­Ø±Ù… Ø§Ù„Ø­Ø±Ø§Ù…': 1,
                    'ØµÙØ±': 2, 'ØµÙØ± Ø§Ù„Ù…Ø¸ÙØ±': 2,
                    'Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø§ÙˆÙ„': 3,
                    'Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø«Ø§Ù†ÛŒ': 4,
                    'Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø§ÙˆÙ„': 5,
                    'Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø«Ø§Ù†ÛŒ': 6,
                    'Ø±Ø¬Ø¨': 7, 'Ø±Ø¬Ø¨ Ø§Ù„Ù…Ø±Ø¬Ø¨': 7,
                    'Ø´Ø¹Ø¨Ø§Ù†': 8, 'Ø´Ø¹Ø¨Ø§Ù† Ø§Ù„Ù…Ø¹Ø¸Ù…': 8,
                    'Ø±Ù…Ø¶Ø§Ù†': 9, 'Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©': 9,
                    'Ø´ÙˆØ§Ù„': 10, 'Ø´ÙˆØ§Ù„ Ø§Ù„Ù…Ú©Ø±Ù…': 10,
                    'Ø°ÙˆØ§Ù„Ù‚Ø¹Ø¯Û': 11, 'Ø°ÙˆØ§Ù„Ù‚Ø¹Ø¯Ûƒ Ø§Ù„Ø­Ø±Ø§Ù…': 11,
                    'Ø°ÙˆØ§Ù„Ø­Ø¬Û': 12, 'Ø°ÙˆØ§Ù„Ø­Ø¬Ûƒ Ø§Ù„Ø­Ø±Ø§Ù…': 12
                };
                
                return {
                    success: true,
                    gregorian: {
                        day: gregorianDay,
                        month: monthMap[gregorianMonth] || 2,
                        year: gregorianYear
                    },
                    hijri: {
                        day: hijriDay,
                        month: hijriMonthMap[hijriMonth] || 9,
                        monthName: hijriMonth,
                        year: hijriYear
                    }
                };
            }
            
            // Ù¾ÛŒÙ¹Ø±Ù† 2: "1 Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú© 1447Ú¾"
            match = html.match(/(\d+)\s+(\S+\s+\S+|\S+)\s+(\d+)[Ú¾]/);
            
            if (match) {
                const hijriDay = parseInt(match[1]);
                const hijriMonth = match[2];
                const hijriYear = parseInt(match[3]);
                
                const hijriMonthMap = {
                    'Ù…Ø­Ø±Ù…': 1, 'Ù…Ø­Ø±Ù… Ø§Ù„Ø­Ø±Ø§Ù…': 1,
                    'ØµÙØ±': 2, 'ØµÙØ± Ø§Ù„Ù…Ø¸ÙØ±': 2,
                    'Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø§ÙˆÙ„': 3,
                    'Ø±Ø¨ÛŒØ¹ Ø§Ù„Ø«Ø§Ù†ÛŒ': 4,
                    'Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø§ÙˆÙ„': 5,
                    'Ø¬Ù…Ø§Ø¯ÛŒ Ø§Ù„Ø«Ø§Ù†ÛŒ': 6,
                    'Ø±Ø¬Ø¨': 7, 'Ø±Ø¬Ø¨ Ø§Ù„Ù…Ø±Ø¬Ø¨': 7,
                    'Ø´Ø¹Ø¨Ø§Ù†': 8, 'Ø´Ø¹Ø¨Ø§Ù† Ø§Ù„Ù…Ø¹Ø¸Ù…': 8,
                    'Ø±Ù…Ø¶Ø§Ù†': 9, 'Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©': 9,
                    'Ø´ÙˆØ§Ù„': 10, 'Ø´ÙˆØ§Ù„ Ø§Ù„Ù…Ú©Ø±Ù…': 10,
                    'Ø°ÙˆØ§Ù„Ù‚Ø¹Ø¯Û': 11, 'Ø°ÙˆØ§Ù„Ù‚Ø¹Ø¯Ûƒ Ø§Ù„Ø­Ø±Ø§Ù…': 11,
                    'Ø°ÙˆØ§Ù„Ø­Ø¬Û': 12, 'Ø°ÙˆØ§Ù„Ø­Ø¬Ûƒ Ø§Ù„Ø­Ø±Ø§Ù…': 12
                };
                
                // Ø§Ú¯Ø± Ù…ÛÛŒÙ†Û’ Ú©Ø§ Ù†Ø§Ù… Ù¾ÙˆØ±Ø§ ÛÛ’ ØªÙˆ Ø§Ø³Û’ Ú†Ú¾Ø§Ù†Ù¹ÛŒÚº
                let monthNum = 9; // default Ø±Ù…Ø¶Ø§Ù†
                for (let [key, value] of Object.entries(hijriMonthMap)) {
                    if (hijriMonth.includes(key)) {
                        monthNum = value;
                        break;
                    }
                }
                
                return {
                    success: true,
                    hijri: {
                        day: hijriDay,
                        month: monthNum,
                        monthName: hijriMonth,
                        year: hijriYear
                    }
                };
            }
            
            throw new Error('ØªØ§Ø±ÛŒØ® Ù†ÛÛŒÚº Ù…Ù„ Ø³Ú©ÛŒ');
            
        } catch (error) {
            console.log('Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù†ÛÛŒÚº Ù…Ù„ Ø³Ú©Ø§:', error);
            return {
                success: false,
                error: error.message
            };
        } finally {
            // Ù„ÙˆÚˆÙ†Ú¯ Ø§ÙˆÙˆØ±Ù„Û’ Ú†Ú¾Ù¾Ø§Ø¦ÛŒÚº
            document.getElementById('loadingOverlay').style.display = 'none';
        }
    }

    // ========== Ù…Ø³ØªÙ‚Ù„ ØªØ§Ø±ÛŒØ® (Ø§Ú¯Ø± ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ú©Ø§Ù… Ù†Û Ú©Ø±Û’) ==========
    function getDefaultDate() {
        const today = new Date();
        const month = today.getMonth();
        const date = today.getDate();
        
        // ÙØ±ÙˆØ±ÛŒ 2026 Ú©Û’ Ù„ÛŒÛ’ Ù…Ø³ØªÙ‚Ù„ ØªØ§Ø±ÛŒØ®ÛŒÚº
        if (month === 1) { // ÙØ±ÙˆØ±ÛŒ
            if (date === 20) return { day: 2, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 21) return { day: 3, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 22) return { day: 4, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 23) return { day: 5, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 24) return { day: 6, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 25) return { day: 7, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 26) return { day: 8, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 27) return { day: 9, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
            if (date === 28) return { day: 10, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
        }
        
        // default
        return { day: 2, month: 9, year: 1447, monthName: "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©" };
    }

    async function renderApp() {
        const mi = parseInt(document.getElementById('monthSelect').value);
        const co = parseInt(selC.value);
        const cn = selC.options[selC.selectedIndex].text;
        const tb = document.getElementById('tableContent');
        const now = new Date();
        const dCount = new Date(2026, mi + 1, 0).getDate();
        document.getElementById('cityNameLabel').innerText = cn;
        tb.innerHTML = '';

        let todayMaghrib = "";
        const urduDays = ["Ø§ØªÙˆØ§Ø±", "Ù¾ÛŒØ±", "Ù…Ù†Ú¯Ù„", "Ø¨Ø¯Ú¾", "Ø¬Ù…Ø¹Ø±Ø§Øª", "Ø¬Ù…Ø¹Û", "ÛÙØªÛ"];

        for (let d = 1; d <= dCount; d++) {
            let t = [];
            for (let i = 0; i < 7; i++) {
                let sm = tToM(baseData[mi].s[i]), em = tToM(baseData[mi].e[i]);
                let b = sm + Math.round(((em - sm) / (dCount - 1)) * (d - 1));
                t.push(mToT(b + co));
            }
            const ishraq = mToT(tToM(t[1]) + 20);
            const chasht = mToT(tToM(t[1]) + Math.round((tToM(t[2]) - tToM(t[1])) / 2));
            const zw = mToT(tToM(t[3]) - 20); 
            const jF = mToT(rndJ(tToM(t[0]), 25));
            const jZ = "01:30";
            const jA = mToT(rndJ(tToM(t[4]), 20));
            const jM = mToT(tToM(t[5]) + 3);
            const jI = mToT(rndJ(tToM(t[6]), 30));

            const isT = (mi === now.getMonth() && d === now.getDate());
            if (isT) todayMaghrib = t[5]; 

            const row = document.createElement('tr');
            if (isT) row.className = 'active-day';
            row.innerHTML = `<td>${d}</td><td>${t[0]}<span class="j-mini">Ø¬: ${jF}</span></td><td>${t[1]}</td><td>${ishraq}</td><td>${chasht}</td><td>${t[2]}</td><td class="danger">${zw}</td><td>${t[3]}<span class="j-mini">Ø¬: ${jZ}</span></td><td>${t[4]}<span class="j-mini">Ø¬: ${jA}</span></td><td>${t[5]}<span class="j-mini">Ø¬: ${jM}</span></td><td>${t[6]}<span class="j-mini">Ø¬: ${jI}</span></td>`;
            tb.appendChild(row);

            if (isT) {
                const ms = ["Ø¬Ù†ÙˆØ±ÛŒ","ÙØ±ÙˆØ±ÛŒ","Ù…Ø§Ø±Ú†","Ø§Ù¾Ø±ÛŒÙ„","Ù…Ø¦ÛŒ","Ø¬ÙˆÙ†","Ø¬ÙˆÙ„Ø§Ø¦ÛŒ","Ø§Ú¯Ø³Øª","Ø³ØªÙ…Ø¨Ø±","Ø§Ú©ØªÙˆØ¨Ø±","Ù†ÙˆÙ…Ø¨Ø±","Ø¯Ø³Ù…Ø¨Ø±"];
                const dayName = urduDays[now.getDay()];
                
                try {
                    let hijriDate;
                    
                    // Ù…ØºØ±Ø¨ Ú©Ø§ Ø§ØµÙˆÙ„
                    let targetDate = now;
                    if (now.getHours() * 60 + now.getMinutes() >= tToM(todayMaghrib)) {
                        targetDate = new Date(now);
                        targetDate.setDate(targetDate.getDate() + 1);
                    }
                    
                    // Ù¾ÛÙ„Û’ Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù„ÛŒÙ†Û’ Ú©ÛŒ Ú©ÙˆØ´Ø´
                    const ruyatData = await getRuyatEHilalDate();
                    
                    if (ruyatData.success && ruyatData.hijri) {
                        // ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ø³Û’ ÚˆÛŒÙ¹Ø§ Ù…Ù„ Ú¯ÛŒØ§
                        hijriDate = {
                            day: ruyatData.hijri.day,
                            month: ruyatData.hijri.month,
                            year: ruyatData.hijri.year,
                            monthName: ruyatData.hijri.monthName
                        };
                        
                        // Ø¨ÛŒØ¬ Ø§Ù¾ÚˆÛŒÙ¹ Ú©Ø±ÛŒÚº
                        document.getElementById('sourceBadge').innerHTML = `
                            <span>ğŸ•Œ Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ Ù¾Ø§Ú©Ø³ØªØ§Ù†</span>
                            <span class="verified">âœ“ Ø³Ø±Ú©Ø§Ø±ÛŒ</span>
                            <span class="halal-badge">Ø­Ù„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ</span>
                        `;
                    } else {
                        // Ù†Û Ù…Ù„Û’ ØªÙˆ Ù…Ø³ØªÙ‚Ù„ ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº
                        hijriDate = getDefaultDate();
                        
                        document.getElementById('sourceBadge').innerHTML = `
                            <span>ğŸ•Œ Ø±ÙˆÛŒØª ÛÙ„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ Ù¾Ø§Ú©Ø³ØªØ§Ù†</span>
                            <span class="verified">âœ“ Ù…Ø³ØªÙ‚Ù„</span>
                            <span class="halal-badge">Ø­Ù„Ø§Ù„ Ú©Ù…ÛŒÙ¹ÛŒ</span>
                        `;
                    }

                    const hijriStr = `${hijriDate.day} ${hijriDate.monthName} ${hijriDate.year}Ú¾`;
                    const { specialDay, chandRat } = getSpecialDayUrdu(hijriDate.day, hijriDate.month);

                    let specialDisplay = "Ú©ÙˆØ¦ÛŒ Ø®Ø§Øµ Ø¯Ù† Ù†ÛÛŒÚº";
                    if (specialDay) specialDisplay = specialDay;
                    
                    let chandDisplay = "";
                    if (chandRat) chandDisplay = `<span class="chand-rat">${chandRat}</span>`;

                    document.getElementById('fullDateDisplay').innerHTML = `<span class="day-highlight">${dayName}</span> | ${d} ${ms[mi]} ${now.getFullYear()}Ø¡ | <span class="hijri-date">${hijriStr}</span>`;
                    document.getElementById('makhsoosDin').innerHTML = `Ù…Ø®ØµÙˆØµ Ø¯Ù†: <b>${specialDisplay}</b>${chandDisplay}`;
                    
                } catch (e) { 
                    document.getElementById('fullDateDisplay').innerHTML = `<span class="day-highlight">${dayName}</span> | ${d} ${ms[mi]} ${now.getFullYear()}Ø¡ | <span class="hijri-date">ØªØ§Ø±ÛŒØ® Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚº</span>`;
                    document.getElementById('makhsoosDin').innerHTML = `Ù…Ø®ØµÙˆØµ Ø¯Ù†: <b>Ù…Ø¹Ù„ÙˆÙ… Ù†ÛÛŒÚº</b>`;
                }
                
                const grid = document.getElementById('cardGrid');
                grid.innerHTML = '';
                const display = [
                    {l:"ÙØ¬Ø±",v:t[0],j:jF},
                    {l:"Ø·Ù„ÙˆØ¹",v:t[1]},
                    {l:"Ø§Ø´Ø±Ø§Ù‚",v:ishraq},
                    {l:"Ú†Ø§Ø´Øª",v:chasht},
                    {l:"Ø¶Ø­ÙˆÛƒ",v:t[2]},
                    {l:"Ù…Ù…Ù†ÙˆØ¹",v:zw,w:true},
                    {l:"Ø¸ÛØ±",v:t[3],j:jZ},
                    {l:"Ø¹ØµØ±",v:t[4],j:jA},
                    {l:"Ù…ØºØ±Ø¨",v:t[5],j:jM},
                    {l:"Ø¹Ø´Ø§Ø¡",v:t[6],j:jI}
                ];
                display.forEach(i => { 
                    grid.innerHTML += `<div class="time-box"><span class="t-label ${i.w?'danger':''}">${i.l}</span><span class="t-val">${i.v}</span>${i.j?`<span class="j-tag">Ø¬Ù…Ø§Ø¹Øª: ${i.j}</span>`:''}</div>`; 
                });
            }
        }
    }
    
    for(let i = 0; i < selC.options.length; i++) {
        if(selC.options[i].text === "Ú©Ø±Ø§Ú†ÛŒ") {
            selC.selectedIndex = i;
            break;
        }
    }
    
    document.getElementById('monthSelect').value = new Date().getMonth();
    renderApp();
</script>
</body>
</html>
